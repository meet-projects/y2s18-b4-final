(function(){function r(e,t,i){function o(s,a){if(!t[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(n)return n(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=t[s]={exports:{}};e[s][0].call(c.exports,function(t){var i=e[s][1][t];return o(i||t)},c,c.exports,r,e,t,i)}return t[s].exports}for(var n="function"==typeof require&&require,s=0;s<i.length;s++)o(i[s]);return o}return r})()({1:[function(e,t,i){"use strict";(function(t,i){if(typeof define==="function"&&define.amd&&(typeof e!=="function"||typeof e==="function"&&typeof e.specified==="function"&&e.specified("userlike"))){return define("userlike",i())}else{return i()}})(window,function(){var i,r,n,o,s,a,u,l,c,p,f,h,d,m;o=e("./utils/jq.coffee")._jq;p=e("./global.coffee");c=p.get;u=p._ullog;n=p.UL_EMOTICONS;r=c("CONTEXT");p.set("avoid_globals",(d=window.userlike._config.options)!=null?d.avoid_globals:void 0);e("./utils/favicon.coffee");s=e("./popup.coffee");s.assignCallbacks(r);a=e("./public.coffee");a.assignApi(r);h=e("./preview.coffee");h.assignPreview(r);i=e("./public.coffee").App;m=c("userlike");i.get().run(m._config.app_key,m._config.widget_key,m._config.data,m._router);l=c("avoid_globals");for(f in r){if(!l){window[f]=r[f]}m[f]=r[f]}m["preview"]=c("preview");m.getData=p.getData;m.setData=p.setData;t.exports=m;return m})},{"./global.coffee":13,"./popup.coffee":17,"./preview.coffee":19,"./public.coffee":20,"./utils/favicon.coffee":30,"./utils/jq.coffee":31}],2:[function(e,t,i){var r=function(e,t){for(var i in t){if(n.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e},n={}.hasOwnProperty;(function(){var i,n,o,s,a,u;o=e("../views/view.coffee").View;u=e("../global.coffee").get;a=e("../global.coffee")._ullog;s=e("../utils/jq.coffee")._jq;n="a#userlike-tab #userlike-button-text{\n    font-family: '{{FONT}}', Sans-Serif;\n}";i=function(e){r(Button,e);Button.has_injected_style=false;Button.prototype.callbacks=[];Button.prototype.element_id="userlike-tab";Button.prototype.posMobile={top:0,left:0,right:0,bottom:0,width:"100%",height:"100%"};Button.prototype.display_state=null;function Button(e){if(e==null){e={}}Button.__super__.constructor.call(this,e)}Button.prototype.slideOut=function(){};Button.prototype.changeToOfflineText=function(){};Button.prototype.changeToOnlineText=function(){};Button.prototype.delayProactive=function(){return 0};Button.prototype.render=function(){};Button.prototype.el=function(){return document.getElementById(this.element_id)};Button.prototype.addCallback=function(e){var t;t=window[e]||window.userlike[e];if(typeof t==="function"){return this.callbacks.push(t)}};Button.prototype.replaceCallbacks=function(e){var t;t=window[e]||window.userlike[e];if(typeof t==="function"){return this.callbacks=[t]}};Button.prototype.triggerCallbacks=function(e){var t,i,r,n,o;n=this.callbacks;o=[];for(i=0,r=n.length;i<r;i++){t=n[i];a("Button:triggerCallbacks: "+t.name+" visible="+e);o.push(t(e))}return o};Button.prototype.registerEvents=function(){var e;return(e=this.el())!=null?e.onclick=function(e){return function(){return e.onButtonClick()}}(this):void 0};Button.prototype.onButtonClick=function(){u("fsm").event("chatButton");return false};Button.prototype.restoreDisplayState=function(){a("Button:restoreDisplayState:");return this.display_state()};Button.prototype.hide=function(){this.display_state=this.hide;this.triggerCallbacks(false);if(this.el()!=null){return s(this.el()).hide()}};Button.prototype.show=function(e){this.display_state=this.show;return this.triggerCallbacks(true)};Button.prototype.fadeOutEyecatcher=function(){};Button.prototype.writeCss=function(e){var t;if(Button.has_injected_style){return}t=document.createElement("style");t.type="text/css";if(t.styleSheet){t.styleSheet.cssText=e}else{t.appendChild(document.createTextNode(e))}document.getElementsByTagName("head")[0].appendChild(t);return Button.has_injected_style=true};Button.prototype.update=function(){};Button.prototype.setBadge=function(e){};Button.prototype.clear=function(){clearInterval(this.timer);this.timer=void 0;return a("Button::clear")};Button.prototype.destroy=function(){};return Button}(o);return t.exports={CSS_BUTTON:n,Button:i}})()},{"../global.coffee":13,"../utils/jq.coffee":31,"../views/view.coffee":55}],3:[function(e,t,i){var r=function(e,t){for(var i in t){if(n.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e},n={}.hasOwnProperty;(function(){var i,n,o,s,a,u,l;n=e("./button_preset.coffee").ButtonPreset;s=e("../eyecatcher.coffee").Eyecatcher;o=e("./button_base.coffee").CSS_BUTTON;l=e("../global.coffee").get;u=e("../global.coffee")._ullog;a=e("../utils/jq.coffee")._jq;i=function(e){r(ButtonBig,e);function ButtonBig(){return ButtonBig.__super__.constructor.apply(this,arguments)}ButtonBig.prototype.text_el="#userlike-button-text";ButtonBig.prototype["class"]="userlike-button-big";ButtonBig.prototype.fadeOutEyecatcher=function(){var e;return(e=this.eyecatcher)!=null?e.hide():void 0};ButtonBig.prototype.render=function(){var e;e=o.replace("{{FONT}}",l("font").get());this.eyecatcher=new s({config:this.config});e+=this.eyecatcher.render();this.writeCss(e);this.update();return this};ButtonBig.prototype.show=function(e){var t;if(e==null){e=0}this.display_state=this.show;this.update();if(typeof e==="boolean"&&e===true){e=1500}if(this.config.eyecatcher_enabled&&this.state==="online"){if((t=this.eyecatcher)!=null){t.show()}}else{this.fadeOutEyecatcher()}this.slide(e);return this};ButtonBig.prototype.setBadge=function(e){u("ButtonBig:setBadge count="+e);if(e>0){a("#userlike-message-badge-count").text(e);return a("#userlike-message-badge").addClass("userlike-show")}else{return a("#userlike-message-badge").removeClass("userlike-show")}};ButtonBig.prototype.slideOut=function(){var e;ButtonBig.__super__.slideOut.call(this);return(e=this.eyecatcher)!=null?e.hide():void 0};ButtonBig.prototype.setOffset=function(){var e;ButtonBig.__super__.setOffset.call(this);return(e=this.eyecatcher)!=null?e.setOffset():void 0};ButtonBig.prototype.destroy=function(){var e;ButtonBig.__super__.destroy.call(this);return(e=this.eyecatcher)!=null?e.hide():void 0};return ButtonBig}(n);return t.exports.ButtonBig=i})()},{"../eyecatcher.coffee":9,"../global.coffee":13,"../utils/jq.coffee":31,"./button_base.coffee":2,"./button_preset.coffee":7}],4:[function(e,t,i){var r=function(e,t){return function(){return e.apply(t,arguments)}},n=function(e,t){for(var i in t){if(o.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e},o={}.hasOwnProperty;(function(){var i,o,s,a,u,l,c,p;a=e("../utils/jq.coffee")._jq;l=e("../global.coffee").get;u=e("../global.coffee")._ullog;p=e("../global.coffee").isMobile();s=e("./button_base.coffee").CSS_BUTTON;o=e("./button_preset.coffee").ButtonPreset;c=function(){return l("preview")};i=function(e){var t;n(ButtonBubble,e);function ButtonBubble(){this.onWindowResize=r(this.onWindowResize,this);return ButtonBubble.__super__.constructor.apply(this,arguments)}ButtonBubble.prototype.text_el="#userlike-button-hover-text";ButtonBubble.prototype["class"]="userlike-button-bubble";t=function(){};ButtonBubble.prototype.registerEvents=function(){var e;ButtonBubble.__super__.registerEvents.call(this);e=this;this.fadeIn=function(){return e.fadeInHoverText()};this.fadeOut=function(){return e.fadeOutHoverText()};if(!p){a(this.el()).on("mouseleave",this.fadeOut);return a(this.el()).on("mouseenter",this.fadeIn)}};ButtonBubble.prototype.unregisterEvents=function(){a(this.el()).off("mouseleave",this.fadeOut);return a(this.el()).off("mouseenter",this.fadeIn)};ButtonBubble.prototype.render=function(){var e;e=s.replace("{{FONT}}",l("font").get());this.writeCss(e);this.update();a.windowOff("resize",this.onWindowResize);a.windowOn("resize",this.onWindowResize);return this};ButtonBubble.prototype.onWindowResize=function(){return this.setHoverTextOffset()};ButtonBubble.prototype.slideOut=function(){ButtonBubble.__super__.slideOut.call(this);return this.fadeOutHoverText()};ButtonBubble.prototype.setClasses=function(){ButtonBubble.__super__.setClasses.call(this);return a("#userlike-hover-text-container").removeClass("userlike-left").removeClass("userlike-right").addClass("userlike-"+this.config.theme.button_orientation)};ButtonBubble.prototype.setOffset=function(){ButtonBubble.__super__.setOffset.call(this);return this.setHoverTextOffset()};ButtonBubble.prototype.setHoverTextOffset=function(){var e,t,i,r,n,o,s;e=a(this.el());i=e.offset().left;r=e.width();s=20;t=a("#userlike-hover-text-container");n=Math.max(t.outerWidth(),t.width());if(this.config.theme.button_orientation==="left"){o=i+r+s}else if(this.config.theme.button_orientation==="right"){o=i-n-s}return t.css("left",o)};ButtonBubble.prototype.setText=function(){var e;ButtonBubble.__super__.setText.call(this);if((e=c())!=null?e.isActive():void 0){return this.fadeInHoverText()}};ButtonBubble.prototype.update=function(){ButtonBubble.__super__.update.call(this);return this.setArrowColor()};ButtonBubble.prototype.setArrowColor=function(){var e;if(this.config.theme.button_orientation==="right"){e="transparent transparent transparent "+this.config.theme.button_bg_color}if(this.config.theme.button_orientation==="left"){e="transparent "+this.config.theme.button_bg_color+" transparent transparent"}return a("#userlike-hover-text-arrow").css("border-color",e)};ButtonBubble.prototype.fadeInHoverText=function(){a("#userlike-hover-text-container").css("display","block");a("#userlike-hover-text-container").addClass("fadeIn");return this.setHoverTextOffset()};ButtonBubble.prototype.fadeOutHoverText=function(){return a("#userlike-hover-text-container").removeClass("fadeIn")};ButtonBubble.prototype.fadeOutEyecatcher=function(){};ButtonBubble.prototype.show=function(e){if(e==null){e=0}this.update();this.display_state=this.show;if(typeof e==="boolean"&&e===true){e=1500}this.slide(e);return this};ButtonBubble.prototype.setBadge=function(e){u("ButtonBubble:setBadge count="+e);if(e>0){a("#userlike-message-badge-count").text(e);return a("#userlike-message-badge").addClass("userlike-show")}else{return a("#userlike-message-badge").removeClass("userlike-show")}};ButtonBubble.prototype.destroy=function(){ButtonBubble.__super__.destroy.call(this);this.unregisterEvents();return this.fadeOutHoverText()};return ButtonBubble}(o);return t.exports.ButtonBubble=i})()},{"../global.coffee":13,"../utils/jq.coffee":31,"./button_base.coffee":2,"./button_preset.coffee":7}],5:[function(e,t,i){var r=function(e,t){for(var i in t){if(n.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e},n={}.hasOwnProperty;(function(){var i,o,s,a,u;i=e("./button_base.coffee").Button;u=e("../global.coffee").isMobile();a=e("../global.coffee")._ullog;s=e("../utils/jq.coffee")._jq;o=function(e){r(ButtonCustom,e);ButtonCustom.prototype.element_id="userlikeCustomTab";function ButtonCustom(e){var t,i,r;if(e==null){e={}}this.addCallback("userlikeButtonHandler");t=(i=this.el().attributes.getNamedItem("data-callback"))!=null?i.value:void 0;this.replaceCallbacks(t);this.callback_badge=(r=this.el().attributes.getNamedItem("data-callback-badge"))!=null?r.value:void 0;ButtonCustom.__super__.constructor.call(this,e)}ButtonCustom.prototype.show=function(){this.display_state=this.show;return this.triggerCallbacks(true)};ButtonCustom.prototype.hide=function(){this.display_state=this.hide;return this.triggerCallbacks(false)};ButtonCustom.prototype.setBadge=function(e){var t;a("ButtonCustom:setBadge count="+e+" callback="+this.callback_badge);t=window[this.callback_badge];if(typeof t==="function"){return t(e)}};ButtonCustom.prototype.popupPosition=function(){var e,t,i,r,o,a,l,c,p,f,h,d,m,g,k,_,v;if(u){return this.posMobile}c=15;i=document.getElementById("userlikeCustomTab");e=s(i);r=e.data();d=(r!=null?r.position:void 0)||"window";f="center";if((r!=null?r.orientation:void 0)!=null){f=r!=null?r.orientation:void 0}else if((r!=null?r.left:void 0)||(r!=null?r.right:void 0)||(r!=null?r.bottom:void 0)||(r!=null?r.top:void 0)){f=null}v=e.outerWidth();o=e.outerHeight();p=e.offset();h={top:"auto",right:"auto",bottom:"auto",left:"auto"};if(d==="window"){h.position="fixed";if(f==="bottomLeft"){l=r.left||"0";t=r.bottom||"0";h.left=l+"px";h.bottom=t+"px"}else if(f==="bottomRight"){m=r.right||"0";t=r.bottom||"0";h.right=m+"px";h.bottom=t+"px"}else if(f==="top"){_=r.top||"0";h.top=_+"px";h.left=Math.max(0,(document.documentElement.clientWidth-s("#userlike-popup").width())/2)+"px"}else if(f==="topRight"){m=r.right||"0";_=r.top||"0";h.right=m+"px";h.top=_+"px"}else if(f==="topLeft"){l=r.left||"0";_=r.top||"0";h.left=l+"px";h.top=_+"px"}else if(f==="bottom"){t=r.bottom||"0";h.left=Math.max(0,(document.documentElement.clientWidth-s("#userlike-popup").width())/2)+"px";h.bottom=t+"px"}else if(f==="left"){l=r.left||"0";h.top=Math.max(0,(document.documentElement.clientHeight-s("#userlike-popup").height())/2)+"px";h.left=l+"px"}else if(f==="right"){m=r.right||"0";h.top=Math.max(0,(document.documentElement.clientHeight-s("#userlike-popup").height())/2)+"px";h.right=m+"px"}else if(f==="center"){h.top=Math.max(0,(document.documentElement.clientHeight-s("#userlike-popup").height())/2)+"px";h.left=Math.max(0,(document.documentElement.clientWidth-s("#userlike-popup").width())/2)+"px"}else{for(a in h){if(!n.call(h,a))continue;if(r[a]){h[a]=r[a]+"px"}}}}if(d==="button"){h.position="absolute";if(e.css("position")==="fixed"){k=document.body.scrollTop;g=document.body.scrollLeft}else{k=0;g=0}if(f==="left"){h.top=p.top-k+"px";h.left=p.left+v+c-g+"px"}else if(f==="right"){h.top=p.top-k+"px";h.left=p.left-s("#userlike-popup").width()-c-g+"px"}else if(f==="topLeft"){h.top=p.top+o+c-k+"px";h.left=p.left-g+"px"}else if(f==="topRight"){h.top=p.top+o+c-k+"px";h.left=p.left-s("#userlike-popup").width()-g+"px"}else if(f==="bottomLeft"){h.left=p.left-g+"px";h.bottom=document.documentElement.clientHeight-p.top+c+k+"px"}else if(f==="bottomRight"){h.left=p.left-s("#userlike-popup").width()+"px";h.bottom=document.documentElement.clientHeight-p.top+c+k+"px"}else if(f==="center"){h.top=Math.max(0,(document.documentElement.clientHeight-s("#userlike-popup").height())/2)+"px";h.left=Math.max(0,(document.documentElement.clientWidth-s("#userlike-popup").width())/2)+"px"}else{h.top=p.top-s("#userlike-popup").height()-c;h.left=p.left}}return h};return ButtonCustom}(i);return t.exports.ButtonCustom=o})()},{"../global.coffee":13,"../utils/jq.coffee":31,"./button_base.coffee":2}],6:[function(e,t,i){var r=function(e,t){for(var i in t){if(n.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e},n={}.hasOwnProperty;(function(){var i,n,o,s,a;a=e("../views/view.coffee").View;o=e("./button_custom.coffee").ButtonCustom;n=e("./button_bubble.coffee").ButtonBubble;i=e("./button_big.coffee").ButtonBig;s=function(e){r(ButtonFactory,e);function ButtonFactory(){return ButtonFactory.__super__.constructor.apply(this,arguments)}ButtonFactory.prototype.makeButton=function(){if(document.getElementById("userlikeCustomTab")){return new o({config:this.config})}else if(this.config.theme.button_style==="bubble"){return new n({config:this.config})}else{return new i({config:this.config})}};return ButtonFactory}(a);return t.exports.ButtonFactory=s})()},{"../views/view.coffee":55,"./button_big.coffee":3,"./button_bubble.coffee":4,"./button_custom.coffee":5}],7:[function(e,t,i){var r=function(e,t){for(var i in t){if(n.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e},n={}.hasOwnProperty;(function(){var i,n,o,s,a;i=e("./button_base.coffee").Button;a=e("../global.coffee").isMobile();s=e("../utils/utils.coffee").has_css_animation_support;o=e("../utils/jq.coffee")._jq;n=function(e){r(ButtonPreset,e);ButtonPreset.prototype.text_el=null;ButtonPreset.prototype["class"]="";function ButtonPreset(e){if(e==null){e={}}this.addCallback("userlikeButtonHandler");ButtonPreset.__super__.constructor.call(this,e);if(this.config.state==="offline"){this.changeToOfflineText()}else{this.changeToOnlineText()}}ButtonPreset.prototype.onButtonClick=function(){this.showSpinner();return ButtonPreset.__super__.onButtonClick.call(this)};ButtonPreset.prototype.showSpinner=function(){if(!s){return}o(this.el()).find(".userlike-symbol").css("display","none").importize();return o(this.el()).find(".userlike-button-spinner").css("display","block").importize()};ButtonPreset.prototype.hideSpinner=function(){if(!s){return}o(this.el()).find(".userlike-symbol").css("display","inline-block").importize();return o(this.el()).find(".userlike-button-spinner").css("display","none").importize()};ButtonPreset.prototype.changeToOfflineText=function(){this.state="offline";this.label=this.config.tab_text_offline;this.icon=this.config.theme.button_symbol_offline;this.update();return this.fadeOutEyecatcher()};ButtonPreset.prototype.changeToOnlineText=function(){this.state="online";this.icon=this.config.theme.button_symbol_online;this.label=this.config.tab_text_label;return this.update()};ButtonPreset.prototype.setClasses=function(){return o(this.el()).removeClass("userlike-left").removeClass("userlike-right").addClass("userlike-"+this.config.theme.button_orientation).addClass(this["class"])};ButtonPreset.prototype.setIcon=function(){var e,t;t=function(e){return function(){var t,i,r,n,s;s=[];for(t=i=1;i<=6;t=++i){n="userlike-button-0"+t;r="userlike-button-offline-0"+t;o(e.el()).find("#userlike-button-symbol .userlike-symbol").removeClass(n).removeClass(r);s.push(o(e.el()).removeClass(n).removeClass(r))}return s}}(this);e=function(e){return function(){var t,i;if(e.icon!=null){t=e.icon.replace(/_/g,"-");i="userlike-"+t;o(e.el()).find("#userlike-button-symbol .userlike-symbol").addClass(i);return o(e.el()).addClass(i)}}}(this);t();return e()};ButtonPreset.prototype.setText=function(){this.highlightText(this.text_el,this.label);return o(this.text_el).text(this.label)};ButtonPreset.prototype.update=function(){if(!this.el()){return}this.setClasses();this.setText();this.setIcon();return this.setOffset()};ButtonPreset.prototype.setOffline=function(){this.changeToOfflineText();return this.update()};ButtonPreset.prototype.setOnline=function(){this.changeToOnlineText();return this.update()};ButtonPreset.prototype.setOffset=function(){var e;if(this.config.theme.button_offset_x){e=o(this.el());e.css({left:"auto",right:"auto"});return e.css(this.config.theme.button_orientation,this.config.theme.button_offset_x+"%")}};ButtonPreset.prototype.resetTop=function(){var e;e=o(this.el());return e.css({top:"auto"})};ButtonPreset.prototype.delayProactive=function(){return 3};ButtonPreset.prototype.slide=function(e){if(e==null){e=0}return setTimeout(function(e){return function(){o(e.el()).addClass("userlike-slideup");return e.triggerCallbacks(true)}}(this),e)};ButtonPreset.prototype.slideOut=function(){return o(this.el()).removeClass("userlike-slideup")};ButtonPreset.prototype.popupPosition=function(){var e;if(a){e=this.posMobile}else if(this.config.theme.button_orientation==="left"){e={top:"auto",left:0,right:"auto",bottom:0}}else if(this.config.theme.button_orientation==="right"){e={top:"auto",right:0,left:"auto",bottom:0}}return e};ButtonPreset.prototype.clear=function(){this.hideSpinner();return ButtonPreset.__super__.clear.call(this)};ButtonPreset.prototype.destroy=function(){ButtonPreset.__super__.destroy.call(this);return o(this.el()).removeClass(this["class"])};return ButtonPreset}(i);return t.exports.ButtonPreset=n})()},{"../global.coffee":13,"../utils/jq.coffee":31,"../utils/utils.coffee":36,"./button_base.coffee":2}],8:[function(e,t,i){var r={}.hasOwnProperty;(function(){var i,n,o,s,a,u,l,c;c=e("./utils/utils.coffee").queryString;u=e("./global.coffee");s=u.get;l=u.isDebugEnabled;o=u._ullog;a=u.getGitVersion();n=u.UserlikeLS;i=function(){function Config(e,t,i){var r,n,u;this.app_key=e;this.widget_key=t;o("Config::ctor: version="+a+" config=%o ",i);this.set(i);if(((u=s("userlike"))!=null?u.config:void 0)!=null){this.set(s("userlike").config)}try{if(l()){n=c();o("Config::ctor: qs=%o ",n);this.set(n)}}catch(p){r=p;o("Config::ctor: could not parse qs ",r)}}Config.prototype.set=function(e){var t,i,n;i=[];for(t in e){if(!r.call(e,t))continue;n=e[t];i.push(this[t]=n)}return i};return Config}();return t.exports.Config=i})()},{"./global.coffee":13,"./utils/utils.coffee":36}],9:[function(e,t,i){var r=function(e,t){for(var i in t){if(n.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e},n={}.hasOwnProperty;(function(){var i,n,o,s,a;o=e("./views/view.coffee").View;a=e("./global.coffee").get;s=e("./utils/jq.coffee")._jq;i="#userlike-eyecatcher-message {\n    font-family: '{{FONT}}', Sans-Serif;\n}";n=function(e){r(Eyecatcher,e);function Eyecatcher(){return Eyecatcher.__super__.constructor.apply(this,arguments)}Eyecatcher.prototype.eyecatcherTimer=null;Eyecatcher.prototype.el=function(){return document.getElementById("userlike-eyecatcher")};Eyecatcher.prototype.elClose=function(){return document.getElementById("userlike-eyecatcher-close")};Eyecatcher.prototype.registerEvents=function(){var e,t;if((e=this.elClose())!=null){e.onclick=function(e){return function(t){t.stopPropagation();e.hide();return false}}(this)}return(t=this.el())!=null?t.onclick=function(e){return function(){e.hide();a("fsm").event("chatButton");return false}}(this):void 0};Eyecatcher.prototype.render=function(){var e;this.registerEvents();this.setClasses();this.setText();this.setPicture();e=i;e=e.replace("{{FONT}}",a("font").get());return e};Eyecatcher.prototype.setClasses=function(){var e;return e=s("#userlike-eyecatcher").removeClass("left").removeClass("right").removeClass("eyecatcher-01").removeClass("eyecatcher-02").removeClass("eyecatcher-03").addClass(this.config.theme.button_orientation).addClass(this.config.eyecatcher_type)};Eyecatcher.prototype.setText=function(){this.highlightText("#userlike-eyecatcher-message",this.config.eyecatcher_message);return s("#userlike-eyecatcher-message").css("font-family",a("font").get()+", Sans-Serif;").text(this.config.eyecatcher_message)};Eyecatcher.prototype.setOffset=function(){var e;e=s(this.el());e.css({left:"auto",right:"auto"});return e.css(this.config.theme.button_orientation,this.config.theme.button_offset_x+"%")};Eyecatcher.prototype.setPicture=function(){return s("#userlike-eyecatcher-picture").css("background-image","url(//"+this.config.eyecatcher_picture_url+")")};Eyecatcher.prototype.setWidth=function(){var e;e=s("#userlike-tab").outerWidth();s("#userlike-eyecatcher").width(e);return s("#userlike-eyecatcher-box").width(e)};Eyecatcher.prototype.show=function(e){var t,i;if(e==null){e=3e3}clearTimeout(this.eyecatcherTimer);this.setText();i=100;t=function(r){return function(){var n;n=r.el();if(n){return r.eyecatcherTimer=setTimeout(function(){r.setWidth();s(n).css("display","block");return s(n).addClass("fadeIn")},e)}else if(i--){return r.eyecatcherTimer=setTimeout(t,100)}}}(this);return t()};Eyecatcher.prototype.hide=function(){var e;clearTimeout(this.eyecatcherTimer);e=this.el();s(e).removeClass("fadeIn");return setTimeout(function(){return s(e).css("display","none")},200)};return Eyecatcher}(o);return t.exports={CSS_EYECATCHER:i,Eyecatcher:n}})()},{"./global.coffee":13,"./utils/jq.coffee":31,"./views/view.coffee":55}],10:[function(e,t,i){(function(){var i,r,n,o;o=e("./global.coffee").get;n=e("./global.coffee")._ullog;r=e("./utils/jq.coffee")._jq;i=function(){function FeedbackAndRating(e,t){this.rating_view=e;this.feedback_view=t}FeedbackAndRating.prototype.send=function(e,t){var i,s,a,u,l;i=o("config");a=o("session");u=o("tracking_event");if(this.rating_view.isValid()){u.trigger("rating_submit")}if(this.feedback_view.isValid()){u.trigger("feedback_submit")}l="https://api.userlike.com/api/client/feedback/";n("FeedbackAndRating::send "+l);s={operator_id:a.get("operator_id"),customer_id:i.customer_id,chat_meta_id:a.get("chat_meta_id"),session_id:a.get("id")};if(this.feedback_view.isValid()){s.feedback_message=this.feedback_view.getFeedback()}if(this.rating_view.isValid()){s.rating=this.rating_view.getRating()}return r.ajaxJsonp({url:l,data:s,error:function(e){return n("FeedbackAndRating::sendError "+e)},success:function(e){return n("FeedbackAndRating::sendSuccess "+e)}})};return FeedbackAndRating}();return t.exports.FeedbackAndRating=i})()},{"./global.coffee":13,"./utils/jq.coffee":31}],11:[function(e,t,i){(function(){var i,r,n,o,s,a;a=e("./global.coffee");s=a.get;o=a._ullog;i="https://dq4irj27fs462.cloudfront.net/javascripts/webfontloader-production-1005.min.js";n="https://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js";return t.exports.Font=r=function(){function Font(e){var t,i;e=s("config");if(((t=e.theme.font_custom)!=null?t.length:void 0)>0){this.is_custom=true;this.needs_loading=false;this.font=e.theme.font_custom.split(":")[0]}else{this.is_custom=false;this.needs_loading=true;this.font=e.theme.font.split(":")[0];if((i=this.font)==="sans-serif"||i==="serif"){this.needs_loading=false}}o("Font:ctor font="+this.font+" is_custom="+this.is_custom+" needs_loading="+this.needs_loading)}Font.prototype.load=function(e){var t,r,a,u,l;if(this.needs_loading){u={google:{families:[this.font]}};try{o("Font::load font="+this.font+", loader=DOM");r=s("is_amd_loader")?i:n;window.WebFontConfig=u;l=document.createElement("script");l.src=r;l.type="text/javascript";l.async="true";a=document.getElementsByTagName("script")[0];return a.parentNode.insertBefore(l,a)}catch(c){t=c;return o("Font::load Error loading font="+this.font,t)}}};Font.prototype.get=function(){return this.font};return Font}()})()},{"./global.coffee":13}],12:[function(e,t,i){var r=function(e,t){for(var i in t){if(n.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e},n={}.hasOwnProperty,o=function(e,t){return function(){return e.apply(t,arguments)}},s=[].indexOf||function(e){for(var t=0,i=this.length;t<i;t++){if(t in this&&this[t]===e)return t}return-1};(function(){var i,a,u,l,c,p,f,h,d,m,g,k,_,v,b,y,w,x,C,S,P,B,A,T,O,M,E,j,R,F,I,V,q,D,z,U,L,N,W,H,G,J,Q,K,Y,X,$,Z,ee,te,ie,re,ne,oe,se,ae,ue,le,ce,pe,fe,he,de,me,ge,ke,_e,ve,be,ye,we,xe,Ce,Se,Pe,Be,Ae,Te,Oe,Me,Ee,je,Re,Fe,Ie,Ve,qe,De,ze,Ue,Le,Ne,We,He,Ge,Je,Qe,Ke,Ye,Xe,$e,Ze,et,tt,it,rt,nt,ot,st,at,ut,lt,ct,pt,ft,ht,dt,mt,gt,kt,_t,vt,bt,yt,wt,xt,Ct,St,Pt,Bt,At,Tt,Ot,Mt,Et,jt,Rt,Ft,It,Vt,qt,Dt,zt,Ut,Lt,Nt,Wt,Ht,Gt,Jt,Qt,Kt,Yt,Xt,$t,Zt,ei,ti,ii,ri,ni,oi,si,ai,ui,li,ci,pi,fi,hi,di,mi,gi,ki,_i,vi,bi,yi,wi,xi,Ci,Si,Pi,Bi,Ai,Ti,Oi,Mi,Ei,ji,Ri,Fi,Ii,Vi,qi,Di,zi,Ui,Li,Ni,Wi,Hi,Gi,Ji,Qi,Ki,Yi,Xi,$i;Ui=function(){return e("./global.coffee").get("CONTEXT")};le=e("./config.coffee").Config;Ce=e("./font.coffee").Font;Di=e("./session.coffee").cookieCleanup;Li=e("./session.coffee").getCookieSupport;Hi=e("./session.coffee").getStorageSupport;Wi=e("./session.coffee").getStateData;Ji=e("./utils/utils.coffee").hasIconFontSupport;Xi=e("./utils/utils.coffee").setIconClassByColor;$i=e("./utils/utils.coffee").stripTag;Yi=e("./utils/utils.coffee").mergeObjects;Vi=e("./utils/jq.coffee")._jq;Gi=e("./global.coffee");zi=Gi.get;qi=Gi._ullog;Ki=Gi.isMobile();Qi=Gi.is_amd_loader;Ni=function(){return zi("preview")};Re=e("./utils/loader.coffee").Loader;Fe=e("./utils/message_parser.coffee").MessageParser;Ei=e("./utils/validator.coffee").Validator;ei=e("./session.coffee").SessionFactory;p=e("./buttons/button_factory.coffee").ButtonFactory;ki=e("./utils/sound.coffee").SoundFactory;Si=e("./tracking.coffee").TrackingFactory;Ci=e("./tracking.coffee").TrackingEvent;Ri=e("./goal.coffee").WidgetGoal;Qt=e("./router.coffee").Router;oi=e("./slot.coffee").Slot;rt=e("./popup.coffee").Popup;bi=e("./survey.coffee").Survey;St=e("./push.coffee").Push;ye=e("./feedback_and_rating.coffee").FeedbackAndRating;Ct=e("./views/progress.coffee").ProgressView;Oe=e("./views/idle.coffee").IdleView;Ie=e("./views/message.coffee").MessageView;de=e("./views/disclaimer.coffee").DisclaimerView;Qe=e("./views/offline_message.coffee").OfflineMessageView;Et=e("./views/register.coffee").RegisterView;Ae=e("./views/group_select.coffee").GroupSelectView;G=e("./views/chat.coffee").ChatView;Ai=e("./views/transcript.coffee").TranscriptView;yi=e("./views/survey.coffee").SurveyView;Pt=e("./views/rating.coffee").RatingView;xe=e("./views/feedback.coffee").FeedbackView;we=e("./views/feedback_rating_composite.coffee").FeedbackRatingCompositeView;mi=e("./views/social_composite.coffee").SocialCompositeView;Oi=e("./views/twitter.coffee").TwitterView;be=e("./views/facebook.coffee").FacebookView;Yt=e("./screenshot.coffee").Screenshot;Gi.setJsonpCallback("userlikeCallbackAvailableCheck",function(e){qi("message="+(e!=null?e.message:void 0));zi("slot").setCache(e);if(e.message==="GROUP_ONLINE"){return zi("fsm").event("groupAvailable",e)}else{return zi("fsm").event("groupUnavailable")}});Gi.setJsonpCallback("userlikeCallbackButtonCheck",function(e){qi("message="+(e!=null?e.message:void 0));zi("slot").setCache(e);if(e.message==="GROUP_ONLINE"){return zi("fsm").event("groupAvailable")}else{zi("session").set("in_service_time",e.in_service_time?1:0);if(e.in_service_time&&zi("config").offline_mode==="chatbutler"&&!zi("config").hide_button){return zi("fsm").event("groupAvailable")}else{return zi("fsm").event("groupUnavailable")}}});Gi.setJsonpCallback("userlikeCallbackProactiveSlotCheck",function(e){if(e.operator!=null){return zi("fsm").event("slotAvailable",e)}else{return zi("fsm").event("slotUnavailable",e)}});Gi.setJsonpCallback("userlikeCallbackPassiveConnectSlotCheck",function(e){if(e.operator!=null){return zi("fsm").event("slotAvailable",e)}else{return zi("fsm").event("slotUnavailable",e)}});_e=function(){function FSM(){this.state=new Me;this.freeze=false;this.event_queue=[]}FSM.prototype.start=function(e){return this.next(_i,e)};FSM.prototype.next=function(e,t){this.freeze=true;return this.state.leave(function(i){return function(){i.state.persist();return i.state.transitionOut(function(){qi("FSM::next:  "+i.state.getName()+" -> "+e.getName());delete i.state;i.state=new e;i.state.persist();return i.state.transitionIn(function(){i.freeze=false;return i.state.enter(t)})})}}(this))};FSM.prototype.event=function(e,t){if(this.state[e]!=null&&typeof this.state[e]==="function"){if(this.freeze){if(t){qi("FSM::event: Frozen "+this.state.getName()+":"+e+" data=",JSON.stringify(t))}else{qi("FSM::event: Frozen "+this.state.getName()+":"+e)}return this.queue(e,t)}else{if(e!=="persist"){if(t){qi("FSM::event: Event "+this.state.getName()+":"+e+" data=",JSON.stringify(t))}else{qi("FSM::event: Event "+this.state.getName()+":"+e)}}return this.state[e](t)}}else{return qi("FSM::event: Unhandled "+this.state.getName()+":"+e)}};FSM.prototype.signal=function(e,t){if(this.state[e]!=null&&typeof this.state[e]==="function"){if(!this.freeze){qi("FSM::signal: Signal "+this.state.getName()+":"+e);return this.state[e](t)}else{return setTimeout(function(i){return function(){qi("FSM::signal: Frozen "+i.state.getName()+":"+e);return i.signal(e,t)}}(this),200)}}else{return qi("FSM::event: Unhandled "+this.state.getName()+":"+e)}};FSM.prototype.queue=function(e,t){qi("FSM::queue: Event "+this.state.getName()+":"+e);return this.event_queue.push([e,t])};FSM.prototype.unshift=function(e,t){qi("FSM::unshift: Event "+this.state.getName()+":"+e);return this.event_queue.unshift([e,t])};FSM.prototype.poll=function(){var e,t,i,r;r=[];while(this.event_queue.length){t=this.event_queue.shift();i=t[0];e=t[1];if(this.state[i]!=null&&typeof this.state[i]==="function"){qi("FSM::poll: Event "+this.state.getName()+":"+i);
this.state[i](e)}else{qi("FSM::poll: Unhandled "+this.state.getName()+":"+i);r.push(t)}}return this.event_queue=r};FSM.prototype.reset=function(){qi("FSM::reset: remove "+this.event_queue.length+" events");return this.event_queue=[]};return FSM}();vi=function(){State.timeout=4e3;State.timeout_load_script=2e3;State.timeout_connect=1e4;State.timeout_offsite=1e5;State.timeout_persist=5e3;State.timeout_screenshot=3e4;State.timeout_disconnected=3e4;State.timeout_hibernate=8e4;function State(){}State.prototype.leave=function(e){clearTimeout(this.timer);return e()};State.prototype.enter=function(){};State.prototype.persist=function(){};State.prototype.transitionIn=function(e){return e()};State.prototype.transitionOut=function(e){return e()};State.prototype.getName=function(){var e;e=/function ([^(]+)/.exec(this.constructor.toString());if((e!=null?e.length:void 0)>1){return e[1]}else{return""}};State.getName=function(){var e;e=/function ([^(]+)/.exec(this.toString());if((e!=null?e.length:void 0)>1){return e[1]}else{return""}};return State}();Me=function(e){r(Init,e);function Init(){return Init.__super__.constructor.apply(this,arguments)}return Init}(vi);_i=function(e){r(Start,e);function Start(){return Start.__super__.constructor.apply(this,arguments)}Start.prototype.enter=function(e){return zi("fsm").next(K,e)};return Start}(vi);K=function(e){r(CheckExtenalLibrarys,e);function CheckExtenalLibrarys(){return CheckExtenalLibrarys.__super__.constructor.apply(this,arguments)}CheckExtenalLibrarys.prototype.enter=function(e){var t,i,r,n,o,s,a;a=typeof Turbolinks!=="undefined"&&Turbolinks!==null?Turbolinks.supported:void 0;if(a){qi("####################################################################");qi("# INFO: found Turbolinks ");qi("####################################################################");s="turbolinks:load";n=function(t){return zi("fsm").next(oe,e)};o=function(){return document.removeEventListener(s,n)};t=function(){return document.addEventListener(s,n)};o();t()}r=new RegExp(/iPhone|iPad/).test(navigator.userAgent);if(r){i=function(){var t;t=!document.hidden;if(t){qi("Restoring state after document gets visible for iOS devices ");return zi("fsm").next(Gt,e)}else{qi("Disconnecting on iOS devices because tab is invisible");return zi("slot").disconnect()}};qi("Registering visibilitychange handler on iOS devices");document.addEventListener("visibilitychange",i,false)}return zi("fsm").next(oe,e)};return CheckExtenalLibrarys}(vi);oe=function(e){r(CheckScriptPosition,e);function CheckScriptPosition(){return CheckScriptPosition.__super__.constructor.apply(this,arguments)}CheckScriptPosition.prototype.enter=function(e){var t,i,r,o,s,a;a=document.getElementsByTagName("script");try{for(i in a){if(!n.call(a,i))continue;s=a[i];if(!Qi){if((typeof s.getAttribute==="function"?(r=s.getAttribute("src"))!=null?r.indexOf("userlike-cdn-widgets"):void 0:void 0)>-1){if(((o=s.parentElement)!=null?o.nodeName:void 0)==="HEAD"){qi("####################################################################");qi("# WARNING: The Userlike script should not be included in the header");qi("####################################################################")}}}}}catch(u){t=u;qi("Error checking script postion")}return zi("fsm").next(Kt,e)};return CheckScriptPosition}(vi);Kt=function(e){r(RouterConfigSetup,e);function RouterConfigSetup(){return RouterConfigSetup.__super__.constructor.apply(this,arguments)}RouterConfigSetup.prototype.enter=function(e){var t,i;if((t=e.config)!=null?t.is_router:void 0){qi("Routing mode enabled");i=new Qt(e.config);return i.resolve()}else{if(e.router!=null){qi("Merging router config");Yi(e.config,e.router)}return zi("fsm").next(ce,e)}};return RouterConfigSetup}(vi);ce=function(e){r(ConfigSetup,e);function ConfigSetup(){return ConfigSetup.__super__.constructor.apply(this,arguments)}ConfigSetup.prototype.enter=function(e){var t;t=new le(e.app_key,e.widget_key,e.config);Gi.set("config",t);if(t.locale!=null){Fe.setLocale(t.locale)}Di();return zi("fsm").next(Se)};return ConfigSetup}(vi);Se=function(e){r(FontLoader,e);function FontLoader(){return FontLoader.__super__.constructor.apply(this,arguments)}FontLoader.prototype.enter=function(){var e;e=new Ce(zi("config"));Gi.set("font",e);e.load();return zi("fsm").next(ti)};return FontLoader}(vi);ti=function(e){r(SessionSetup,e);function SessionSetup(){return SessionSetup.__super__.constructor.apply(this,arguments)}SessionSetup.prototype.enter=function(){var e;Gi.set("slot",new oi);e=(new ei).get();Gi.set("session",e);return zi("fsm").next(Ee)};return SessionSetup}(vi);Ee=function(e){r(InjectDebugConfig,e);function InjectDebugConfig(){return InjectDebugConfig.__super__.constructor.apply(this,arguments)}InjectDebugConfig.prototype.enter=function(){var e;e=zi("session").get("inject");if(e){return zi("fsm").event("inject",JSON.parse(e))}else{return zi("fsm").next(De)}};InjectDebugConfig.prototype.inject=function(e){var t;t=new le(e.app_key,e.widget_key,e);return zi("fsm").next(De)};return InjectDebugConfig}(vi);De=function(e){r(NoStateCheck,e);function NoStateCheck(){return NoStateCheck.__super__.constructor.apply(this,arguments)}NoStateCheck.prototype.enter=function(){var e;e=zi("userlike");if((e!=null?e.nostate:void 0)!=null&&e.nostate){qi("###################################################################");qi("WARNING: Widget in nostate mode. Sessions don't persist on page change");qi("###################################################################");return zi("fsm").next(Ft)}else{return zi("fsm").next(Ii)}};return NoStateCheck}(vi);Ft=function(e){r(ResetState,e);function ResetState(){return ResetState.__super__.constructor.apply(this,arguments)}ResetState.prototype.enter=function(){zi("session").reset();return zi("fsm").next(Ii)};return ResetState}(vi);Ii=function(e){r(WidgetVerify,e);function WidgetVerify(){return WidgetVerify.__super__.constructor.apply(this,arguments)}WidgetVerify.prototype.enter=function(){var e,t,i,r;r=zi("session");e=zi("config");if(r.isActive()){t=r.getConfig();qi("WidgetVerify current="+e.widget_key+" stored="+(t!=null?t.widget_key:void 0));if(t&&t.widget_key!==e.widget_key&&t.config&&t.app_key){try{qi("###################################################################");qi("INFO: Using presisted config");qi("###################################################################");zi("fsm").next(ce,t);return}catch(n){i=n;qi("Error getting original config")}}}return zi("fsm").next(ii)};return WidgetVerify}(vi);ii=function(e){r(Setup,e);function Setup(){return Setup.__super__.constructor.apply(this,arguments)}Setup.prototype.enter=function(){Gi.set("button",(new p).makeButton());Gi.set("goal",new Ri);Gi.set("popup",new rt);Gi.set("progress_view",new Ct);Gi.set("idle_view",new Oe);Gi.set("message_view",new Ie);Gi.set("disclaimer_view",new de);Gi.set("offline_message_view",new Qe);Gi.set("register_view",new Et);Gi.set("group_select_view",new Ae);Gi.set("chat_view",new G);Gi.set("transcript_view",new Ai);Gi.set("survey_view",new yi);Gi.set("rating_view",new Pt);Gi.set("feedback_view",new xe);Gi.set("feedback_rating_composite_view",new we);Gi.set("social_composite_view",new mi);Gi.set("twitter_view",new Oi);Gi.set("facebook_view",new be);Gi.set("tracking",(new Si).get());Gi.set("tracking_event",new Ci);Gi.set("sound",(new ki).get());return zi("fsm").next(pe)};return Setup}(vi);pe=function(e){r(CustomCSS,e);function CustomCSS(){return CustomCSS.__super__.constructor.apply(this,arguments)}CustomCSS.prototype.enter=function(){var e,t;e=zi("config");if(e.custom_css!=null&&e.custom_css.length>0){t=document.createElement("style");t.type="text/css";if(t.styleSheet){t.styleSheet.cssText=e.custom_css}else{t.appendChild(document.createTextNode(e.custom_css))}document.getElementsByTagName("head")[0].appendChild(t)}return zi("fsm").next(a)};return CustomCSS}(vi);a=function(e){r(BlockedCheck,e);function BlockedCheck(){return BlockedCheck.__super__.constructor.apply(this,arguments)}BlockedCheck.prototype.enter=function(){if(zi("session").get("blocked")){return zi("fsm").next(i)}else{return zi("fsm").next(Y)}};return BlockedCheck}(vi);Y=function(e){r(CheckMobileDevice,e);function CheckMobileDevice(){return CheckMobileDevice.__super__.constructor.apply(this,arguments)}CheckMobileDevice.prototype.enter=function(){if(Ki&&zi("config").mobile_mode==="disabled"){zi("button").hide();return qi("Disabled on mobile devices")}else{return zi("fsm").next(je)}};return CheckMobileDevice}(vi);je=function(e){r(LoadLib,e);function LoadLib(){return LoadLib.__super__.constructor.apply(this,arguments)}LoadLib.prototype.enter=function(){return Re.loadLib(function(){return zi("fsm").next(Rt)})};return LoadLib}(vi);Rt=function(e){r(RemoteControlCheck,e);function RemoteControlCheck(){return RemoteControlCheck.__super__.constructor.apply(this,arguments)}RemoteControlCheck.prototype.enter=function(){var e;e=zi("session").getState();if(e==="Chat"||e==="ChatMinimized"||(e!=null?e.match(/^ChatButler/):void 0)){return zi("fsm").next(Fi)}else if(zi("config").mode_remote){return zi("fsm").next(jt)}else{return zi("fsm").next(l)}};return RemoteControlCheck}(vi);jt=function(e){r(RemoteApiMode,e);function RemoteApiMode(){return RemoteApiMode.__super__.constructor.apply(this,arguments)}RemoteApiMode.prototype.enter=function(){var e;e=zi("userlikeRemoteReady");if(typeof e==="function"){return e()}};RemoteApiMode.prototype.reset=function(){return zi("session").reset()};RemoteApiMode.prototype.normal=function(){return zi("fsm").next(l)};RemoteApiMode.prototype.register=function(){var e;e=zi("config");e.mode_registration=true;e.mode_proactive=false;e.mode_proactive_registration=false;return zi("fsm").next(l)};RemoteApiMode.prototype.proactive_passive=function(e){var t;t=zi("config");t.mode_proactive_registration=false;t.mode_registration=false;t.mode_proactive=true;t.proactive_passive_connect=true;if(e.message){t.proactive_message=e.message}if(e.timeout){t.proactive_timeout=e.timeout}return zi("fsm").next(l)};RemoteApiMode.prototype.proactive_passive_register=function(e){var t;t=zi("config");t.mode_proactive=false;t.mode_registration=false;t.mode_proactive_registration=true;t.proactive_passive_connect=true;if(e.message){t.proactive_message=e.message}if(e.timeout){t.proactive_timeout=e.timeout}return zi("fsm").next(l)};return RemoteApiMode}(vi);i=function(e){r(Blocked,e);function Blocked(){return Blocked.__super__.constructor.apply(this,arguments)}return Blocked}(vi);l=function(e){r(ButtonCheck,e);function ButtonCheck(){return ButtonCheck.__super__.constructor.apply(this,arguments)}ButtonCheck.prototype.enter=function(){return zi("slot").checkButton("userlikeCallbackButtonCheck")};ButtonCheck.prototype.groupAvailable=function(){return zi("fsm").next(m)};ButtonCheck.prototype.groupUnavailable=function(){if(zi("config").hide_button||zi("config").hide_button_offhours&&!zi("session").isInServiceTime()){return zi("fsm").next(f)}else{return zi("fsm").next(u)}};return ButtonCheck}(vi);u=function(e){r(ButtonChange,e);function ButtonChange(){return ButtonChange.__super__.constructor.apply(this,arguments)}ButtonChange.prototype.enter=function(){zi("button").changeToOfflineText();return zi("fsm").next(Fi)};return ButtonChange}(vi);m=function(e){r(ButtonShow,e);function ButtonShow(){return ButtonShow.__super__.constructor.apply(this,arguments)}ButtonShow.prototype.enter=function(){return zi("fsm").next(Fi)};return ButtonShow}(vi);f=function(e){r(ButtonHidden,e);function ButtonHidden(){return ButtonHidden.__super__.constructor.apply(this,arguments)}ButtonHidden.prototype.enter=function(){zi("tracking_event").trigger("button_hidden");zi("button").hide();return zi("fsm").next(h)};return ButtonHidden}(vi);Fi=function(e){r(WidgetInsert,e);function WidgetInsert(){return WidgetInsert.__super__.constructor.apply(this,arguments)}WidgetInsert.prototype.enter=function(){this.timer=setTimeout(function(){return zi("fsm").event("timerFired")},vi.timeout);return Re.injectMarkup(function(e){if(e){return zi("fsm").event("injectFailed")}else{return zi("fsm").event("injectDone")}})};WidgetInsert.prototype.injectFailed=function(){return zi("fsm").next(ri)};WidgetInsert.prototype.injectDone=function(){return zi("fsm").next(ni)};WidgetInsert.prototype.timerFired=function(){return zi("fsm").next(ri)};WidgetInsert.prototype.leave=function(e){clearTimeout(this.timer);return e()};return WidgetInsert}(vi);h=function(e){r(ButtonHiddenWidgetInsert,e);function ButtonHiddenWidgetInsert(){return ButtonHiddenWidgetInsert.__super__.constructor.apply(this,arguments)}ButtonHiddenWidgetInsert.prototype.injectDone=function(){return zi("fsm").next(c)};return ButtonHiddenWidgetInsert}(Fi);ni=function(e){r(SetupTheme,e);function SetupTheme(){return SetupTheme.__super__.constructor.apply(this,arguments)}SetupTheme.prototype.enter=function(){zi("popup").setupTheme();return zi("fsm").next(d)};return SetupTheme}(vi);d=function(e){r(ButtonInsert,e);function ButtonInsert(){return ButtonInsert.__super__.constructor.apply(this,arguments)}ButtonInsert.prototype.enter=function(){var e,t,i,r;zi("button").render();e=!zi("session").isActive();zi("button").show(e);zi("tracking_event").trigger("button_displayed");r=Vi("#userlike");if(Ki){r.addClass("userlike-mobile")}if(!Ji()){r.addClass("userlike-symbol-fallback");Xi(r,(t=Vi("#userlike-tab"))!=null?t.css("background-color"):void 0);Xi(Vi("#userlike-view-container"),(i=Vi("#userlike-popup"))!=null?i.css("background-color"):void 0)}if(window.Shopify!=null&&typeof window.doShift==="function"){Gi.set("shopifyDoShift",window.doShift);window.doShift=function(){zi("shopifyDoShift")();return zi("button").resetTop()}}return zi("fsm").next(c)};return ButtonInsert}(vi);c=function(e){r(ButtonEventSetup,e);function ButtonEventSetup(){return ButtonEventSetup.__super__.constructor.apply(this,arguments)}ButtonEventSetup.prototype.enter=function(){zi("button").registerEvents();return zi("fsm").next(Mi)};return ButtonEventSetup}(vi);ri=function(e){r(SetupError,e);function SetupError(){return SetupError.__super__.constructor.apply(this,arguments)}return SetupError}(vi);Mi=function(e){r(UserlikeReady,e);function UserlikeReady(){return UserlikeReady.__super__.constructor.apply(this,arguments)}UserlikeReady.prototype.enter=function(){var e,t,i,r;i=typeof document.createEvent==="function"?document.createEvent("Event"):void 0;if(i!=null){i.initEvent("userlike-ready",true,true)}if(typeof document.dispatchEvent==="function"){document.dispatchEvent(i)}t=zi("userlikeReady");if(typeof t==="function"){t()}e=zi("config");r=e.transfer_tld_enabled;if(r){return zi("fsm").next(Jt)}else{return zi("fsm").next(Gt)}};return UserlikeReady}(vi);Jt=function(e){r(RestoreStateCrossDomain,e);function RestoreStateCrossDomain(){this.getSession=o(this.getSession,this);return RestoreStateCrossDomain.__super__.constructor.apply(this,arguments)}RestoreStateCrossDomain.prototype.enter=function(){this.timer=setTimeout(function(){return zi("fsm").event("timerFired")},vi.timeout_connect);return Re.loadPostRobot(function(){var e;e=window.self!==window.top;if(e){return zi("fsm").event("sendSession")}else{return zi("fsm").event("getSession")}})};RestoreStateCrossDomain.prototype.chatButton=function(){zi("fsm").next(Te);return zi("fsm").event("chatButton")};RestoreStateCrossDomain.prototype.sendSession=function(){qi("Sending session data to parentFrame");postRobot.sendToParent("getSession",{session:zi("session").getCrossDomainSessionState()});return zi("fsm").next(Te)};RestoreStateCrossDomain.prototype.getSession=function(){var e,t,i,r,n,o,a,u,l;e=zi("config");l=e.transfer_tld_domains.split("\n");l=l.filter(function(e){return e!==window.location.href});t=(o=window.location.href,s.call(l,o)>=0);if(t){zi("fsm").next(Te);return}postRobot.on("getSession",function(e){var t,i,r,n;qi("Recieved data from iFrame from: "+e.sourceDomain+" to: "+e.data);n=Wi(e!=null?(t=e.data)!=null?(i=t.session)!=null?i.app_state:void 0:void 0:void 0);if((r=n.state)==="Chat"||r==="ChatMinimized"){clearTimeout(this.timer);zi("session").setCrossDomainSessionState(e.data);return zi("fsm").next(Gt)}});n=function(e){var t;t=document.createElement("iframe");t.setAttribute("src",e);t.style.width="0";t.style.height="0";return document.body.appendChild(t)};a=[];for(i=0,r=l.length;i<r;i++){u=l[i];a.push(n(u))}return a};RestoreStateCrossDomain.prototype.timerFired=function(){qi("Timeout in RestoreStateCrossDomain");return zi("fsm").next(Gt)};return RestoreStateCrossDomain}(vi);Gt=function(e){r(RestoreState,e);function RestoreState(){return RestoreState.__super__.constructor.apply(this,arguments)}RestoreState.prototype.enter=function(){var e,t;e=zi("config");t=zi("session");if(t.get("uuid")&&t.get("chat_meta_id")){zi("goal").check()}if(!Li()||!Hi()){return zi("fsm").next(Ve)}else if(t.isChatbutlerActive()){return zi("fsm").next(x)}else if(t.isActive()){return zi("fsm").next(Dt)}else if(t.isRject()){return zi("fsm").next(bt)}else if(t.isOffline()){return zi("fsm").next(ze)}else if(e.mode_proactive||e.mode_proactive_registration){if(Ki&&e.mobile_mode==="noproactive"){qi("Proactive is disabled on mobile devices");return zi("fsm").next(Te)}else{return zi("fsm").next(xt)}}else{return zi("fsm").next(Te)}};return RestoreState}(vi);Te=function(e){r(Idle,e);function Idle(){return Idle.__super__.constructor.apply(this,arguments)}Idle.prototype.enter=function(){var e;e=zi("session");e.reset();e.setState("Idle");return zi("fsm").reset()};Idle.prototype.chatButton=function(){zi("button").fadeOutEyecatcher();zi("tracking_event").trigger("chat_requested");zi("fsm").queue("slotRequest");return zi("fsm").next(ue)};Idle.prototype.directRequest=function(e){zi("tracking_event").trigger("chat_requested");zi("fsm").queue("directRequest",{operator_id:e});return zi("fsm").next(ue)};Idle.prototype.updateAPI=function(){return zi("session").updateUserData()};return Idle}(vi);ue=function(e){r(CheckUserlikeObject,e);function CheckUserlikeObject(){return CheckUserlikeObject.__super__.constructor.apply(this,arguments)}CheckUserlikeObject.prototype.enter=function(){if(typeof window.userlike!=="object"){window.userlike={}}if(!window.userlike.moment||!window.userlike.userlikeIO){return Re.loadLib(function(){return zi("fsm").event("done")})}else{return zi("fsm").event("done")}};CheckUserlikeObject.prototype.done=function(){return zi("fsm").next(ve)};return CheckUserlikeObject}(vi);Ve=function(e){r(NoCookies,e);function NoCookies(){return NoCookies.__super__.constructor.apply(this,arguments)}NoCookies.prototype.chatButton=function(){zi("button").fadeOutEyecatcher();return zi("fsm").next(qe)};NoCookies.prototype.directRequest=function(){return zi("fsm").next(qe)};return NoCookies}(Te);Ke=function(e){r(PageUnloading,e);function PageUnloading(){return PageUnloading.__super__.constructor.apply(this,arguments)}return PageUnloading}(vi);ze=function(e){r(Offline,e);function Offline(){return Offline.__super__.constructor.apply(this,arguments)}Offline.prototype.persist=function(){var e;e=zi("session");e.reset();return e.setState("Offline")};return Offline}(Te);xt=function(e){r(ProactiveTimer,e);function ProactiveTimer(){return ProactiveTimer.__super__.constructor.apply(this,arguments)}ProactiveTimer.prototype.chatButton=function(){zi("button").fadeOutEyecatcher();zi("fsm").queue("slotRequest");return zi("fsm").next(ue)};ProactiveTimer.prototype.directRequest=function(e){zi("fsm").queue("directRequest",{operator_id:e});return zi("fsm").next(ue)};ProactiveTimer.prototype.timerFired=function(){return zi("fsm").next(mt)};ProactiveTimer.prototype.enter=function(){var e;e=parseInt(zi("config").proactive_timeout)+parseInt(zi("button").delayProactive());qi("ProactiveTimer::enter delay="+e);return this.timer=setTimeout(function(){return zi("fsm").event("timerFired")},e*1e3)};ProactiveTimer.prototype.leave=function(e){clearTimeout(this.timer);return e()};ProactiveTimer.prototype.updateAPI=function(){return zi("session").updateUserData()};return ProactiveTimer}(vi);mt=function(e){r(ProactiveSlotCheck,e);function ProactiveSlotCheck(){return ProactiveSlotCheck.__super__.constructor.apply(this,arguments)}ProactiveSlotCheck.prototype.enter=function(){zi("tracking_event").trigger("proactive_timer");this.timer=setTimeout(function(){return zi("fsm").event("timerFired")},vi.timeout);return zi("slot").checkProactive("userlikeCallbackProactiveSlotCheck")};ProactiveSlotCheck.prototype.slotAvailable=function(e){return zi("fsm").next(dt,e)};ProactiveSlotCheck.prototype.slotUnavailable=function(e){return zi("fsm").next(wt)};ProactiveSlotCheck.prototype.timerFired=function(){return zi("fsm").next(Te)};ProactiveSlotCheck.prototype.leave=function(e){clearTimeout(this.timer);return e()};return ProactiveSlotCheck}(vi);wt=function(e){r(ProactiveSlotUnavailable,e);function ProactiveSlotUnavailable(){return ProactiveSlotUnavailable.__super__.constructor.apply(this,arguments)}ProactiveSlotUnavailable.prototype.enter=function(){zi("tracking_event").trigger("proactive_unavailable");return zi("fsm").next(Te)};return ProactiveSlotUnavailable}(vi);dt=function(e){r(ProactiveSlotAvailable,e);function ProactiveSlotAvailable(){return ProactiveSlotAvailable.__super__.constructor.apply(this,arguments)}ProactiveSlotAvailable.prototype.enter=function(e){return zi("fsm").next(ut,e)};return ProactiveSlotAvailable}(vi);ut=function(e){r(ProactiveEventSetup,e);function ProactiveEventSetup(){return ProactiveEventSetup.__super__.constructor.apply(this,arguments)}ProactiveEventSetup.prototype.enter=function(e){Vi.windowOn("hashchange",function(){return zi("fsm").event("hashchange",window.location.hash)});Vi.windowOn("unload",function(){return zi("fsm").next(Ke)});(function(e){var t;t=e.pushState;e.pushState=function(i){var r;t.apply(e,arguments);try{qi("Events::pushstate: href="+window.location.href+" url="+arguments[2]);return zi("fsm").event("pushstate")}catch(n){r=n;return qi("Events::pushstate: exception=",r)}}})(window.history);zi("fsm").event("done",e);return zi("sound").load()};ProactiveEventSetup.prototype.done=function(e){return zi("fsm").next(lt,e)};return ProactiveEventSetup}(vi);lt=function(e){r(ProactiveOffer,e);function ProactiveOffer(){return ProactiveOffer.__super__.constructor.apply(this,arguments)}ProactiveOffer.prototype.enter=function(e){var t;t=zi("config");if(Ki&&t.mobile_mode==="proactive_bubble"){return zi("fsm").next(gt,e)}else{return zi("fsm").next(vt,e)}};return ProactiveOffer}(vi);gt=function(e){r(ProactiveSlotOfferBubbleStart,e);function ProactiveSlotOfferBubbleStart(){return ProactiveSlotOfferBubbleStart.__super__.constructor.apply(this,arguments)}ProactiveSlotOfferBubbleStart.prototype.enter=function(e){var t;this.data=e;t=zi("config");zi("session").setOperator(e.operator);zi("tracking").offerProactiveChat();zi("tracking_event").trigger("proactive_offer");if(!(zi("popup").isActive()&&zi("config").audio_only_inactive)){zi("sound").play("message_sent")}return zi("button").setBadge(1)};ProactiveSlotOfferBubbleStart.prototype.chatButton=function(){return zi("fsm").next(_t,this.data)};return ProactiveSlotOfferBubbleStart}(vi);vt=function(e){r(ProactiveSlotOfferPassiveStart,e);function ProactiveSlotOfferPassiveStart(){return ProactiveSlotOfferPassiveStart.__super__.constructor.apply(this,arguments)}ProactiveSlotOfferPassiveStart.prototype.enter=function(e){var t;t=zi("config");zi("session").setOperator(e.operator);zi("tracking").offerProactiveChat();zi("tracking_event").trigger("proactive_offer");return zi("fsm").next(_t,e)};return ProactiveSlotOfferPassiveStart}(vi);_t=function(e){r(ProactiveSlotOfferPassiveDisplay,e);function ProactiveSlotOfferPassiveDisplay(){return ProactiveSlotOfferPassiveDisplay.__super__.constructor.apply(this,arguments)}ProactiveSlotOfferPassiveDisplay.prototype.enter=function(e){var t;t=zi("config");zi("button").setBadge(0);zi("chat_view").setProactiveMessage(t.proactive_message);return zi("chat_view").displaySlot(e.operator.display_name,e.operator.url_image,t.status_message,function(){zi("chat_view").sendProactiveMessage();return zi("fsm").next(kt)})};return ProactiveSlotOfferPassiveDisplay}(vi);kt=function(e){r(ProactiveSlotOfferPassive,e);function ProactiveSlotOfferPassive(){return ProactiveSlotOfferPassive.__super__.constructor.apply(this,arguments)}ProactiveSlotOfferPassive.prototype.transitionIn=function(e){zi("button").fadeOutEyecatcher();return zi("chat_view").show(e)};ProactiveSlotOfferPassive.prototype.inputEnter=function(e){var t;t=zi("chat_view").sendMessage();zi("fsm").queue("sendMessage",t);return zi("fsm").next(ht)};ProactiveSlotOfferPassive.prototype.closeButton=function(){return zi("fsm").next(yt)};ProactiveSlotOfferPassive.prototype.minimizeButton=function(){return zi("fsm").next(yt)};ProactiveSlotOfferPassive.prototype.chatButton=function(){return zi("fsm").next(yt)};return ProactiveSlotOfferPassive}(vi);yt=function(e){r(ProactiveSlotRejected,e);function ProactiveSlotRejected(){return ProactiveSlotRejected.__super__.constructor.apply(this,arguments)}ProactiveSlotRejected.prototype.transitionIn=function(e){return zi("popup").close(e)};ProactiveSlotRejected.prototype.enter=function(){zi("tracking_event").trigger("proactive_reject");return zi("fsm").next(bt)};return ProactiveSlotRejected}(vi);bt=function(e){r(ProactiveSlotReject,e);function ProactiveSlotReject(){return ProactiveSlotReject.__super__.constructor.apply(this,arguments)}ProactiveSlotReject.prototype.persist=function(){return zi("session").setState("ProactiveSlotReject")};ProactiveSlotReject.prototype.chatButton=function(){zi("fsm").queue("slotRequest");return zi("fsm").next(ue)};ProactiveSlotReject.prototype.directRequest=function(e){zi("fsm").queue("directRequest",{operator_id:e});return zi("fsm").next(ue)};return ProactiveSlotReject}(vi);ht=function(e){r(ProactivePassiveSocketConnect,e);function ProactivePassiveSocketConnect(){return ProactivePassiveSocketConnect.__super__.constructor.apply(this,arguments)}ProactivePassiveSocketConnect.prototype.inputEnter=function(e){var t;t=zi("chat_view").sendMessage();return zi("fsm").queue("sendMessage",t)};ProactivePassiveSocketConnect.prototype.connect=function(){return zi("fsm").next(ct)};ProactivePassiveSocketConnect.prototype.error=function(){return zi("fsm").next(Ue)};ProactivePassiveSocketConnect.prototype.connectFailed=function(){return zi("fsm").next(Ue)};ProactivePassiveSocketConnect.prototype.enter=function(){this.timer=setTimeout(function(){return zi("fsm").event("timerFired")},vi.timeout_connect);return zi("slot").connect()};ProactivePassiveSocketConnect.prototype.timerFired=function(){return zi("fsm").next(Ue)};ProactivePassiveSocketConnect.prototype.leave=function(e){clearTimeout(this.timer);return e()};return ProactivePassiveSocketConnect}(vi);ct=function(e){r(ProactivePassiveSlotCreate,e);function ProactivePassiveSlotCreate(){return ProactivePassiveSlotCreate.__super__.constructor.apply(this,arguments)}ProactivePassiveSlotCreate.prototype.inputEnter=function(e){var t;t=zi("chat_view").sendMessage();return zi("fsm").queue("sendMessage",t)};ProactivePassiveSlotCreate.prototype.slotCreated=function(e){return zi("fsm").next(ft,e)};ProactivePassiveSlotCreate.prototype.enter=function(){this.timer=setTimeout(function(){return zi("fsm").event("timerFired")},vi.timeout_connect);return zi("slot").create({proactive:true})};ProactivePassiveSlotCreate.prototype.timerFired=function(){zi("slot").disconnect();return zi("fsm").next(Ue)};ProactivePassiveSlotCreate.prototype.leave=function(e){clearTimeout(this.timer);return e()};return ProactivePassiveSlotCreate}(vi);ft=function(e){r(ProactivePassiveSlotVerify,e);function ProactivePassiveSlotVerify(){return ProactivePassiveSlotVerify.__super__.constructor.apply(this,arguments)}ProactivePassiveSlotVerify.prototype.enter=function(e){if(e.operator){return zi("fsm").next(pt,e)}else{return zi("fsm").next(Ue)}};return ProactivePassiveSlotVerify}(vi);pt=function(e){r(ProactivePassiveSlotStart,e);function ProactivePassiveSlotStart(){return ProactivePassiveSlotStart.__super__.constructor.apply(this,arguments)}ProactivePassiveSlotStart.prototype.enter=function(e){var t,i,r,n,o;i=zi("config");r=zi("session");n=zi("tracking");o=zi("tracking_event");t=zi("chat_view");r.set("id",e.id);r.set("chat_meta_id",e.chat_meta_id);r.set("was_proactive",true);r.resetStats();if(r.get("operator_id")===e.operator.id){r.setOperator(e.operator);n.startProactiveSlot();o.trigger("chat_connected");o.trigger("chat_connected_proactive");return zi("fsm").next(g)}else{r.setOperator(e.operator);n.startProactiveSlot();t.setProactiveMessage(i.proactive_message);return t.displaySlot(e.operator.display_name,e.operator.url_image,i.status_message,function(){o.trigger("chat_connected");o.trigger("chat_connected_proactive");return zi("fsm").next(g)})}};return ProactivePassiveSlotStart}(vi);ve=function(e){r(FacebookLoader,e);function FacebookLoader(){return FacebookLoader.__super__.constructor.apply(this,arguments)}FacebookLoader.prototype.enter=function(){var e;e=zi("config");if(!zi("facebook")&&e.facebook_integration==="load"){if(e.facebook_connect==="register"){return zi("fsm").event("loadSync")}else{return zi("fsm").event("loadAsync")}}else{return zi("fsm").event("done")}};FacebookLoader.prototype.timerFired=function(){return zi("fsm").event("done")};FacebookLoader.prototype.leave=function(e){clearTimeout(this.timer);return e()};FacebookLoader.prototype.loadAsync=function(){var e,t;e=zi("config");window.fbAsyncInit=function(){var t;FB.init({appId:e.facebook_app_id,status:true,cookies:true,xfbml:true});t=true;Gi.set("facebook",t);qi("FacebookLoader loaded integration="+e.facebook_integration+" facebook_ready="+t)};if(window.FB!==void 0){try{window.FB=null;delete window.FB}catch(i){t=i;qi("FacebookLoader cannot delete existing sdk")}}Re.loadScript("connect.facebook.net/"+e.locale+"/all.js",function(){});return zi("fsm").event("done")};FacebookLoader.prototype.loadSync=function(){var e,t;e=zi("config");window.fbAsyncInit=function(t){return function(){clearTimeout(t.timer);FB.init({appId:e.facebook_app_id,status:true,cookies:true,xfbml:true});return zi("fsm").event("done")}}(this);if(window.FB!==void 0){try{window.FB=null;delete window.FB}catch(i){t=i;qi("FacebookLoader cannot delete existing sdk")}}this.timer=setTimeout(function(){return zi("fsm").event("timerFired")},vi.timeout_load_script);return Re.loadScript("connect.facebook.net/"+e.locale+"/all.js",function(){})};FacebookLoader.prototype.done=function(){var e,t;e=zi("config");t=window.FB!==void 0;Gi.set("facebook",t);qi("FacebookLoader integration="+e.facebook_integration+" facebook_ready="+t);return zi("fsm").next(Ti)};return FacebookLoader}(vi);Ti=function(e){r(TwitterLoader,e);function TwitterLoader(){return TwitterLoader.__super__.constructor.apply(this,arguments)}TwitterLoader.prototype.timerFired=function(){return zi("fsm").event("done")};TwitterLoader.prototype.leave=function(e){clearTimeout(this.timer);return e()};TwitterLoader.prototype.enter=function(){var e,t;e=zi("config");if(e.twitter_integration==="disabled"){return zi("fsm").event("done")}else if(e.twitter_integration==="load"){this.timer=setTimeout(function(){return zi("fsm").event("timerFired")},vi.timeout_load_script);Re.loadScript("platform.twitter.com/widgets.js",function(){var t;t=true;Gi.set("twitter",t);return qi("TwitterLoader integration="+e.twitter_integration+" twitter="+t)});return zi("fsm").event("done")}else if(e.twitter_integration==="extern"){t=window.twttr!==void 0;Gi.set("twitter",t);return zi("fsm").event("done")}};TwitterLoader.prototype.done=function(){var e,t;e=zi("config");t=zi("twitter");qi("TwitterLoader integration="+e.twitter_integration+" twitter="+t);return zi("fsm").next(ge)};return TwitterLoader}(vi);ge=function(e){r(EventSetup,e);function EventSetup(){return EventSetup.__super__.constructor.apply(this,arguments)}EventSetup.prototype.done=function(e){return zi("fsm").next(Q,e)};return EventSetup}(ut);Q=function(e){r(CheckDisclaimer,e);function CheckDisclaimer(){return CheckDisclaimer.__super__.constructor.apply(this,arguments);
}CheckDisclaimer.prototype.enter=function(){if(zi("config").disclaimer_show){return zi("fsm").next(he)}else{return zi("fsm").next(te)}};return CheckDisclaimer}(vi);te=function(e){r(CheckPreChatFirst,e);function CheckPreChatFirst(){return CheckPreChatFirst.__super__.constructor.apply(this,arguments)}CheckPreChatFirst.prototype.enter=function(){var e;e=zi("config");if(e.mode_registration||e.mode_proactive_registration){return zi("fsm").next(Bt)}else{return zi("fsm").next(re)}};return CheckPreChatFirst}(vi);re=function(e){r(CheckPreChatSecond,e);function CheckPreChatSecond(){return CheckPreChatSecond.__super__.constructor.apply(this,arguments)}CheckPreChatSecond.prototype.enter=function(){if(zi("config").group_select_enabled){return zi("fsm").next(Be)}else{return zi("fsm").next(ne)}};return CheckPreChatSecond}(vi);ne=function(e){r(CheckPreChatThird,e);function CheckPreChatThird(){return CheckPreChatThird.__super__.constructor.apply(this,arguments)}CheckPreChatThird.prototype.enter=function(){if(zi("config").pre_survey_enabled){return zi("fsm").next(ot)}else{return zi("fsm").next(se)}};return CheckPreChatThird}(vi);se=function(e){r(CheckSlotAvailable,e);function CheckSlotAvailable(){return CheckSlotAvailable.__super__.constructor.apply(this,arguments)}CheckSlotAvailable.prototype.enter=function(){this.timer=setTimeout(function(){return zi("fsm").event("timerFired")},vi.timeout);zi("tracking_event").trigger("slot_check");return zi("slot").checkAvailable("userlikeCallbackAvailableCheck")};CheckSlotAvailable.prototype.groupAvailable=function(){zi("button").changeToOnlineText();zi("tracking_event").trigger("slot_available");return zi("fsm").next(ie)};CheckSlotAvailable.prototype.groupUnavailable=function(){zi("tracking_event").trigger("slot_unavailable");return zi("fsm").next(Ue)};CheckSlotAvailable.prototype.timerFired=function(){return zi("fsm").next(Ue)};CheckSlotAvailable.prototype.leave=function(e){clearTimeout(this.timer);return e()};return CheckSlotAvailable}(vi);ie=function(e){r(CheckPreChatLast,e);function CheckPreChatLast(){return CheckPreChatLast.__super__.constructor.apply(this,arguments)}CheckPreChatLast.prototype.transitionIn=function(e){zi("button").fadeOutEyecatcher();return zi("chat_view").showConnectView(e)};CheckPreChatLast.prototype.enter=function(){if(zi("config").passive_connect){return zi("fsm").next(Ye)}else{return zi("fsm").next(gi)}};return CheckPreChatLast}(vi);Ye=function(e){r(PassiveConnectAvailableCheck,e);function PassiveConnectAvailableCheck(){return PassiveConnectAvailableCheck.__super__.constructor.apply(this,arguments)}PassiveConnectAvailableCheck.prototype.enter=function(){this.timer=setTimeout(function(){return zi("fsm").event("timerFired")},vi.timeout);return zi("slot").checkPassiveConnect("userlikeCallbackPassiveConnectSlotCheck")};PassiveConnectAvailableCheck.prototype.inputEnter=function(e){var t;t=zi("chat_view").sendMessage();if((t!=null?t.length:void 0)>0){return zi("fsm").queue("sendMessage",t)}};PassiveConnectAvailableCheck.prototype.slotAvailable=function(e){return zi("fsm").next(it,e)};PassiveConnectAvailableCheck.prototype.slotUnavailable=function(e){return zi("fsm").next(Ue)};PassiveConnectAvailableCheck.prototype.timerFired=function(){return zi("fsm").next(Ue)};PassiveConnectAvailableCheck.prototype.leave=function(e){clearTimeout(this.timer);return e()};return PassiveConnectAvailableCheck}(vi);he=function(e){r(DisclaimerAvailableCheck,e);function DisclaimerAvailableCheck(){return DisclaimerAvailableCheck.__super__.constructor.apply(this,arguments)}DisclaimerAvailableCheck.prototype.enter=function(){this.timer=setTimeout(function(){return zi("fsm").event("timerFired")},vi.timeout);zi("tracking_event").trigger("slot_check");return zi("slot").checkAvailable("userlikeCallbackAvailableCheck")};DisclaimerAvailableCheck.prototype.groupAvailable=function(){zi("button").changeToOnlineText();zi("tracking_event").trigger("slot_available");return zi("fsm").next(fe)};DisclaimerAvailableCheck.prototype.groupUnavailable=function(){zi("tracking_event").trigger("slot_unavailable");return zi("fsm").next(Ue)};DisclaimerAvailableCheck.prototype.timerFired=function(){return zi("fsm").next(Ue)};DisclaimerAvailableCheck.prototype.leave=function(e){clearTimeout(this.timer);return e()};return DisclaimerAvailableCheck}(vi);fe=function(e){r(Disclaimer,e);function Disclaimer(){return Disclaimer.__super__.constructor.apply(this,arguments)}Disclaimer.prototype.enter=function(){zi("button").fadeOutEyecatcher();return zi("disclaimer_view").show(function(){})};Disclaimer.prototype.chatButton=function(){zi("tracking_event").trigger("disclaimer_cancel");return zi("popup").close(function(){return zi("fsm").next(Te)})};Disclaimer.prototype.closeButton=function(){zi("tracking_event").trigger("disclaimer_cancel");return zi("popup").close(function(){return zi("fsm").next(Te)})};Disclaimer.prototype.submitButton=function(){zi("tracking_event").trigger("disclaimer_ok");return zi("fsm").next(te)};return Disclaimer}(vi);Bt=function(e){r(RegisterAvailableCheck,e);function RegisterAvailableCheck(){return RegisterAvailableCheck.__super__.constructor.apply(this,arguments)}RegisterAvailableCheck.prototype.enter=function(){this.timer=setTimeout(function(){return zi("fsm").event("timerFired")},vi.timeout);zi("tracking_event").trigger("slot_check");return zi("slot").checkAvailable("userlikeCallbackAvailableCheck")};RegisterAvailableCheck.prototype.groupAvailable=function(){zi("button").changeToOnlineText();zi("tracking_event").trigger("slot_available");return zi("fsm").next(Mt)};RegisterAvailableCheck.prototype.groupUnavailable=function(){zi("tracking_event").trigger("slot_unavailable");return zi("fsm").next(Ue)};RegisterAvailableCheck.prototype.timerFired=function(){return zi("fsm").next(Ue)};RegisterAvailableCheck.prototype.leave=function(e){clearTimeout(this.timer);return e()};return RegisterAvailableCheck}(vi);ot=function(e){r(PreSurveyAvailableCheck,e);function PreSurveyAvailableCheck(){return PreSurveyAvailableCheck.__super__.constructor.apply(this,arguments)}PreSurveyAvailableCheck.prototype.enter=function(){this.timer=setTimeout(function(){return zi("fsm").event("timerFired")},vi.timeout);zi("tracking_event").trigger("slot_check");return zi("slot").checkAvailable("userlikeCallbackAvailableCheck")};PreSurveyAvailableCheck.prototype.groupAvailable=function(){zi("button").changeToOnlineText();zi("tracking_event").trigger("slot_available");return zi("fsm").next(st)};PreSurveyAvailableCheck.prototype.groupUnavailable=function(){zi("tracking_event").trigger("slot_unavailable");return zi("fsm").next(Ue)};PreSurveyAvailableCheck.prototype.timerFired=function(){return zi("fsm").next(Ue)};PreSurveyAvailableCheck.prototype.leave=function(e){clearTimeout(this.timer);return e()};return PreSurveyAvailableCheck}(vi);Be=function(e){r(GroupSelectAvailableCheck,e);function GroupSelectAvailableCheck(){return GroupSelectAvailableCheck.__super__.constructor.apply(this,arguments)}GroupSelectAvailableCheck.prototype.enter=function(){this.timer=setTimeout(function(){return zi("fsm").event("timerFired")},vi.timeout);zi("tracking_event").trigger("slot_check");return zi("slot").checkAvailable("userlikeCallbackAvailableCheck")};GroupSelectAvailableCheck.prototype.groupAvailable=function(e){zi("button").changeToOnlineText();zi("tracking_event").trigger("slot_available");return zi("fsm").next(Pe,e)};GroupSelectAvailableCheck.prototype.groupUnavailable=function(){zi("tracking_event").trigger("slot_unavailable");return zi("fsm").next(Ue)};GroupSelectAvailableCheck.prototype.timerFired=function(){return zi("fsm").next(Ue)};GroupSelectAvailableCheck.prototype.leave=function(e){clearTimeout(this.timer);return e()};return GroupSelectAvailableCheck}(vi);ji=function(e){r(Warning,e);function Warning(){return Warning.__super__.constructor.apply(this,arguments)}Warning.prototype.transitionOut=function(e){return zi("popup").close(e)};Warning.prototype.chatButton=function(){return zi("fsm").next(Te)};Warning.prototype.closeButton=function(){return zi("fsm").next(Te)};Warning.prototype.enter=function(){return this.timer=setTimeout(function(){return zi("fsm").event("timerFired")},vi.timeout)};Warning.prototype.timerFired=function(){return zi("fsm").next(Te)};Warning.prototype.leave=function(e){clearTimeout(this.timer);return e()};return Warning}(vi);qe=function(e){r(NoCookiesMessage,e);function NoCookiesMessage(){return NoCookiesMessage.__super__.constructor.apply(this,arguments)}NoCookiesMessage.prototype.transitionIn=function(e){zi("button").fadeOutEyecatcher();return zi("message_view").showNoCookiesMessage(e)};NoCookiesMessage.prototype.chatButton=function(){return zi("fsm").next(Ve)};NoCookiesMessage.prototype.closeButton=function(){return zi("fsm").next(Ve)};NoCookiesMessage.prototype.enter=function(){return this.timer=setTimeout(function(){return zi("fsm").event("timerFired")},vi.timeout)};NoCookiesMessage.prototype.timerFired=function(){return zi("fsm").next(Ve)};return NoCookiesMessage}(ji);me=function(e){r(ErrorMessage,e);function ErrorMessage(){return ErrorMessage.__super__.constructor.apply(this,arguments)}ErrorMessage.prototype.enter=function(){return zi("tracking_event").trigger("error_message")};ErrorMessage.prototype.transitionIn=function(e){zi("button").fadeOutEyecatcher();return zi("message_view").showErrorMessage(e)};return ErrorMessage}(ji);ke=function(e){r(ExpiredWarning,e);function ExpiredWarning(){return ExpiredWarning.__super__.constructor.apply(this,arguments)}ExpiredWarning.prototype.enter=function(){zi("button").fadeOutEyecatcher();return zi("message_view").showExpiredWarning(function(){})};return ExpiredWarning}(ji);Ue=function(e){r(OfflineMessage,e);function OfflineMessage(){return OfflineMessage.__super__.constructor.apply(this,arguments)}OfflineMessage.prototype.persist=function(){zi("session").setState("Offline");return zi("session").resetChatDuration()};OfflineMessage.prototype.enter=function(){zi("tracking_event").trigger("offline_mode");if(zi("config").offline_mode==="message"){return zi("fsm").next(We)}else if(zi("config").offline_mode==="chatbutler"){if(zi("session").isInServiceTime()){return zi("fsm").next(T)}else{return zi("fsm").next(We)}}else{return zi("fsm").next(Ne)}};return OfflineMessage}(vi);We=function(e){r(OfflineMessageForm,e);function OfflineMessageForm(){return OfflineMessageForm.__super__.constructor.apply(this,arguments)}OfflineMessageForm.prototype.enter=function(){if(zi("config").geo_type==="browser"){zi("session").getLocation()}zi("tracking_event").trigger("offline_form_show");zi("fsm").poll();return zi("fsm").reset()};OfflineMessageForm.prototype.sendMessage=function(e){zi("offline_message_view").showOfflineMessageForm();return zi("offline_message_view").setTextareaVal(e)};OfflineMessageForm.prototype.transitionIn=function(e){zi("button").fadeOutEyecatcher();return zi("offline_message_view").showOfflineMessageForm(e)};OfflineMessageForm.prototype.chatButton=function(){return zi("popup").close(function(){return zi("fsm").next(Te)})};OfflineMessageForm.prototype.closeButton=function(){return zi("popup").close(function(){return zi("fsm").next(Te)})};OfflineMessageForm.prototype.submitButton=function(){if(zi("offline_message_view").validateOfflineMessage()){return zi("fsm").next(Ge)}};OfflineMessageForm.prototype.slotRequest=function(){};OfflineMessageForm.prototype.locationchange=function(){};return OfflineMessageForm}(vi);Ne=function(e){r(OfflineMessageFeedback,e);function OfflineMessageFeedback(){return OfflineMessageFeedback.__super__.constructor.apply(this,arguments)}OfflineMessageFeedback.prototype.enter=function(){zi("tracking_event").trigger("offline_view_show");zi("fsm").poll();return zi("fsm").reset()};OfflineMessageFeedback.prototype.transitionIn=function(e){zi("button").fadeOutEyecatcher();return zi("message_view").showOfflineMessageFeedback(e)};return OfflineMessageFeedback}(We);Ge=function(e){r(OfflineMessageSend,e);function OfflineMessageSend(){return OfflineMessageSend.__super__.constructor.apply(this,arguments)}OfflineMessageSend.prototype.transitionIn=function(e){return zi("progress_view").show(e)};OfflineMessageSend.prototype.success=function(e){return zi("fsm").next(Le,e)};OfflineMessageSend.prototype.error=function(){return zi("fsm").next(me)};OfflineMessageSend.prototype.enter=function(){this.timer=setTimeout(function(){return zi("fsm").event("timerFired")},vi.timeout_connect);zi("tracking_event").trigger("offline_form_submit");return zi("offline_message_view").sendOfflineMessage()};OfflineMessageSend.prototype.timerFired=function(){return zi("fsm").next(me)};OfflineMessageSend.prototype.leave=function(e){clearTimeout(this.timer);return e()};return OfflineMessageSend}(vi);Le=function(e){r(OfflineMessageDone,e);function OfflineMessageDone(){return OfflineMessageDone.__super__.constructor.apply(this,arguments)}OfflineMessageDone.prototype.enter=function(e){if(zi("offline_message_view").requestedScreenshot()){return zi("fsm").next(He,e)}else{return zi("fsm").next(Je)}};return OfflineMessageDone}(vi);He=function(e){r(OfflineMessageScreenshot,e);function OfflineMessageScreenshot(){return OfflineMessageScreenshot.__super__.constructor.apply(this,arguments)}OfflineMessageScreenshot.prototype.transitionIn=function(e){return zi("progress_view").show(e)};OfflineMessageScreenshot.prototype.enter=function(e){var t,i,r,n;this.timer=setTimeout(function(){return zi("fsm").event("timerFired")},vi.timeout_screenshot);i=e.id;t=zi("config").customer_id;n=zi("session").get("id");r=new Yt;if(r.unsupported()){return zi("fsm").next(Je)}return r.load(function(){var e;e=r.take();return e.then(function(e){return function(e){qi("OfflineMessageScreenshot::take ok");return r.crossDomainPost("https://api.userlike.com/api/client/message/offline_message/screenshot/",{id:i,customer_id:t,screenshot:e.toDataURL("image/png"),session_id:n},function(e,t){qi("OfflineMessageScreenshot::sent err="+e);return zi("fsm").next(Je)})}}(this),function(e){return function(){qi("OfflineMessageScreenshot::take failed");return zi("fsm").next(Je)}}(this))["catch"](function(e){qi("OfflineMessageScreenshot::take failed");return zi("fsm").next(Je)})})};OfflineMessageScreenshot.prototype.timerFired=function(){return zi("fsm").next(Je)};OfflineMessageScreenshot.prototype.leave=function(e){clearTimeout(this.timer);return e()};return OfflineMessageScreenshot}(vi);Je=function(e){r(OfflineMessageSent,e);function OfflineMessageSent(){return OfflineMessageSent.__super__.constructor.apply(this,arguments)}OfflineMessageSent.prototype.transitionIn=function(e){return zi("offline_message_view").showOfflineMessageSent(e)};OfflineMessageSent.prototype.transitionOut=function(e){return zi("popup").close(e)};OfflineMessageSent.prototype.chatButton=function(){return zi("popup").close(function(){return zi("fsm").next(Te)})};OfflineMessageSent.prototype.closeButton=function(){return zi("popup").close(function(){return zi("fsm").next(Te)})};OfflineMessageSent.prototype.directRequest=function(){return zi("popup").close(function(){return zi("fsm").next(Te)})};OfflineMessageSent.prototype.enter=function(){this.timer=setTimeout(function(){return zi("fsm").event("timerFired")},vi.timeout);return zi("tracking").sendOfflineMessage()};OfflineMessageSent.prototype.timerFired=function(){return zi("fsm").next(Te)};OfflineMessageSent.prototype.leave=function(e){clearTimeout(this.timer);return e()};return OfflineMessageSent}(vi);S=function(e){r(ChatButlerState,e);function ChatButlerState(){return ChatButlerState.__super__.constructor.apply(this,arguments)}ChatButlerState.prototype.inputEnter=function(){var e;e=zi("chat_view").sendMessage();zi("session").addMessageToChatbutler(e);return zi("fsm").queue("sendMessage",e)};ChatButlerState.prototype.livePreview=function(){};ChatButlerState.prototype.minimizeButton=function(){if(zi("popup").isVisible()){zi("tracking_event").trigger("chat_window_minimzed");zi("session").set("chatbutler_minimized","1");zi("chat_view").resetIncomingMessages();return zi("popup").hide()}else{zi("tracking_event").trigger("chat_window_maximized");zi("session")["delete"]("chatbutler_minimized");return zi("popup").show(function(){})}};ChatButlerState.prototype.chatButton=function(){return this.minimizeButton()};ChatButlerState.prototype.directRequest=function(){return this.minimizeButton()};ChatButlerState.prototype.closeButton=function(){return zi("fsm").next(_)};return ChatButlerState}(vi);T=function(e){r(ChatButlerWelcome,e);function ChatButlerWelcome(){return ChatButlerWelcome.__super__.constructor.apply(this,arguments)}ChatButlerWelcome.prototype.transitionIn=function(e){zi("button").fadeOutEyecatcher();return zi("chat_view").showConnectView(e)};ChatButlerWelcome.prototype.enter=function(){zi("fsm").reset();zi("tracking_event").trigger("chat_butler");zi("session").resetSession();return this.timer=setTimeout(function(){return zi("chat_view").displaySlot(zi("config").chatbutler_name,"//"+zi("config").chatbutler_picture_url,zi("config").status_message,function(){zi("chat_view").sendChatbutlerMessage("welcome");if(zi("session").get("client_name")){return this.timer=zi("chat_view").sendChatbutlerMessageDelayed("ask_topic",2e3,function(){return zi("fsm").next(A)})}else{return this.timer=zi("chat_view").sendChatbutlerMessageDelayed("ask_name",2e3,function(){return zi("fsm").next(B)})}})},500)};return ChatButlerWelcome}(S);x=function(e){r(ChatButlerRestore,e);function ChatButlerRestore(){return ChatButlerRestore.__super__.constructor.apply(this,arguments)}ChatButlerRestore.prototype.transitionIn=function(e){var t;zi("button").fadeOutEyecatcher();t=function(){return zi("chat_view").displaySlot(zi("config").chatbutler_name,"//"+zi("config").chatbutler_picture_url,zi("config").status_message,function(){return e()})};if(zi("session").get("chatbutler_minimized")){return t()}else{return zi("chat_view").show(t)}};ChatButlerRestore.prototype.enter=function(){var e,t,i,r;r=JSON.parse(zi("session").get("chatbutler_dialog"));for(e=0,t=r.length;e<t;e++){i=r[e];zi("chat_view").addMessage.apply(zi("chat_view"),i)}switch(zi("session").getState()){case"ChatButlerWaitName":return zi("fsm").next(B);case"ChatButlerWaitTopic":return zi("fsm").next(A);case"ChatButlerWaitEmail":return zi("fsm").next(P);case"ChatButlerPollSlot":return zi("fsm").next(y);case"ChatButlerOfflineWaitExtraInfo":return zi("fsm").next(b);default:qi("Invalid Chat Butler restore target state '"+zi("session").getState()+"'");return zi("fsm").next(We)}};return ChatButlerRestore}(vi);B=function(e){r(ChatButlerWaitName,e);function ChatButlerWaitName(){return ChatButlerWaitName.__super__.constructor.apply(this,arguments)}ChatButlerWaitName.prototype.enter=function(){zi("fsm").poll();return zi("fsm").reset()};ChatButlerWaitName.prototype.persist=function(){return zi("session").setState("ChatButlerWaitName",vi.timeout_offsite)};ChatButlerWaitName.prototype.inputEnter=function(){var e;e=zi("chat_view").sendMessage();zi("session").addMessageToChatbutler(e);return zi("fsm").event("sendMessage",e)};ChatButlerWaitName.prototype.sendMessage=function(e){if(!Ei.validateName(e)){this.timer=zi("chat_view").sendChatbutlerMessageDelayed("not_understood",500,function(){});return}zi("session").set("client_name",e);return this.timer=zi("chat_view").sendChatbutlerMessageDelayed("ask_topic",1500,function(){return zi("fsm").next(A)})};return ChatButlerWaitName}(S);A=function(e){r(ChatButlerWaitTopic,e);function ChatButlerWaitTopic(){return ChatButlerWaitTopic.__super__.constructor.apply(this,arguments)}ChatButlerWaitTopic.prototype.enter=function(){zi("fsm").poll();return zi("fsm").reset()};ChatButlerWaitTopic.prototype.persist=function(){return zi("session").setState("ChatButlerWaitTopic",vi.timeout_offsite)};ChatButlerWaitTopic.prototype.inputEnter=function(){var e;e=zi("chat_view").sendMessage();zi("session").addMessageToChatbutler(e);return zi("fsm").event("sendMessage",e)};ChatButlerWaitTopic.prototype.sendMessage=function(e){if(e.match(/^\s*$/)){this.timer=zi("chat_view").sendChatbutlerMessageDelayed("not_understood",500,function(){});return}zi("session").set("chatbutler_topic",e);return this.timer=zi("chat_view").sendChatbutlerMessageDelayed("wait1",1500,function(){return zi("fsm").next(y)})};return ChatButlerWaitTopic}(S);y=function(e){r(ChatButlerPollSlot,e);function ChatButlerPollSlot(){return ChatButlerPollSlot.__super__.constructor.apply(this,arguments)}ChatButlerPollSlot.prototype.persist=function(){return zi("session").setState("ChatButlerPollSlot",vi.timeout_offsite)};ChatButlerPollSlot.prototype.enter=function(e){var t,i;this.start_time=zi("session").get("chatbutler_start_time")||+new Date;zi("session").set("chatbutler_start_time",this.start_time);t=Math.max(0,zi("config").chatbutler_timeout*1e3-(+new Date-this.start_time));i=Math.max(0,zi("config").chatbutler_timeout*500-(+new Date-this.start_time));if(i>=15e3){this.middle_timeout=setTimeout(function(){return zi("chat_view").sendChatbutlerMessage("wait2")},i)}this.try_timeout=setTimeout(function(){zi("chat_view").sendChatbutlerMessage("timeout_message");return zi("fsm").next(b)},t);if(t>5e3){return zi("fsm").event("pollSlot",true)}};ChatButlerPollSlot.prototype.pollSlot=function(e){zi("slot").resetCache();return zi("slot").checkAvailableChatbutler(e,"userlikeCallbackAvailableCheck")};ChatButlerPollSlot.prototype.groupAvailable=function(){zi("tracking_event").trigger("chat_butler_connect");zi("fsm").queue("slotRequest");return zi("fsm").next(v)};ChatButlerPollSlot.prototype.groupUnavailable=function(){return this.next_timer=setTimeout(function(){return zi("fsm").event("pollSlot",false)},5e3)};ChatButlerPollSlot.prototype.inputEnter=function(){var e;e=zi("chat_view").sendMessage();zi("session").addMessageToChatbutler(e);return zi("fsm").event("sendMessage",e)};ChatButlerPollSlot.prototype.sendMessage=function(e){clearTimeout(this.timer);return this.timer=zi("chat_view").sendChatbutlerMessageDelayed("wait2",1500,function(){})};ChatButlerPollSlot.prototype.leave=function(e){clearTimeout(this.middle_timeout);clearTimeout(this.try_timeout);clearTimeout(this.next_timer);return ChatButlerPollSlot.__super__.leave.call(this,e)};return ChatButlerPollSlot}(S);b=function(e){r(ChatButlerOfflineWaitExtraInfo,e);function ChatButlerOfflineWaitExtraInfo(){return ChatButlerOfflineWaitExtraInfo.__super__.constructor.apply(this,arguments)}ChatButlerOfflineWaitExtraInfo.prototype.enter=function(){this.entered_minimized=!zi("popup").isVisible();zi("fsm").poll();return zi("fsm").reset()};ChatButlerOfflineWaitExtraInfo.prototype.persist=function(){return zi("session").setState("ChatButlerOfflineWaitExtraInfo",vi.timeout_offsite)};ChatButlerOfflineWaitExtraInfo.prototype.inputEnter=function(){var e;e=zi("chat_view").sendMessage();zi("session").addMessageToChatbutler(e);return zi("fsm").event("sendMessage",e)};ChatButlerOfflineWaitExtraInfo.prototype.sendMessage=function(e){if(Fe.checkNo(e)){return zi("fsm").event("infoDone","")}else if(Fe.checkYes(e)){zi("chat_view").sendChatbutlerMessageDelayed("reask_extra_info",500,function(){})}else{return zi("fsm").event("infoDone",e)}};ChatButlerOfflineWaitExtraInfo.prototype.infoDone=function(e){zi("session").set("chatbutler_extra_info",e);if(zi("session").get("client_email")){return zi("fsm").next(C)}else{return zi("chat_view").sendChatbutlerMessageDelayed("ask_email",1e3,function(){return zi("fsm").next(P)})}};return ChatButlerOfflineWaitExtraInfo}(S);P=function(e){r(ChatButlerWaitEmail,e);function ChatButlerWaitEmail(){return ChatButlerWaitEmail.__super__.constructor.apply(this,arguments)}ChatButlerWaitEmail.prototype.enter=function(){zi("fsm").poll();return zi("fsm").reset()};ChatButlerWaitEmail.prototype.persist=function(){return zi("session").setState("ChatButlerWaitEmail",vi.timeout_offsite)};ChatButlerWaitEmail.prototype.inputEnter=function(){var e;e=zi("chat_view").sendMessage();zi("session").addMessageToChatbutler(e);return zi("fsm").event("sendMessage",e)};ChatButlerWaitEmail.prototype.closeButton=function(){return zi("fsm").next(_)};ChatButlerWaitEmail.prototype.sendMessage=function(e){if(!Ei.validateEmail(e)){zi("chat_view").sendChatbutlerMessageDelayed("not_understood",500,function(){});return}zi("session").set("client_email",e);return zi("fsm").next(C)};return ChatButlerWaitEmail}(S);C=function(e){r(ChatButlerSendOfflineMessage,e);function ChatButlerSendOfflineMessage(){return ChatButlerSendOfflineMessage.__super__.constructor.apply(this,arguments)}ChatButlerSendOfflineMessage.prototype.enter=function(){var e,t,i,r,n,o;this.timer=setTimeout(function(){return zi("fsm").event("error")},vi.timeout_connect);t=zi("session").getChatbutlerDialog();n=[];e=zi("session").get("client_name");for(i=0,r=t.length;i<r;i++){o=t[i];if(o.type==="co"){n.push(e+": "+o.body)}else{n.push(zi("config").chatbutler_name+": "+o.body)}}return zi("offline_message_view").sendOfflineMessage(n.join("\n\n"))};ChatButlerSendOfflineMessage.prototype.error=function(){zi("session").setState("Offline");return zi("fsm").next(me)};ChatButlerSendOfflineMessage.prototype.success=function(){clearTimeout(this.timer);zi("chat_view").sendChatbutlerMessage("ticket_created");return zi("fsm").next(w)};return ChatButlerSendOfflineMessage}(S);_=function(e){r(ChatButlerCancel,e);function ChatButlerCancel(){return ChatButlerCancel.__super__.constructor.apply(this,arguments)}ChatButlerCancel.prototype.enter=function(){zi("tracking_event").trigger("chat_butler_cancel");zi("slot").disconnect();return zi("popup").close(function(){return zi("fsm").next(Te)})};return ChatButlerCancel}(vi);w=function(e){r(ChatButlerQuitWait,e);function ChatButlerQuitWait(){return ChatButlerQuitWait.__super__.constructor.apply(this,arguments)}ChatButlerQuitWait.prototype.transitionIn=function(e){return zi("popup").show(e)};ChatButlerQuitWait.prototype.enter=function(){var e;setTimeout(function(){return zi("chat_view").setOperatorInfo(zi("config").chatbutler_name,true,zi("config").quit_message)},2e3);e=zi("session");zi("fsm").reset();e.setState("Offline");e.deleteConfig();zi("tracking_event").trigger("chat_quit");e.resetChatDuration();return this.timer=setTimeout(function(){return zi("fsm").event("done")},30*1e3)};ChatButlerQuitWait.prototype.inputEnter=function(e){var t;return t=zi("chat_view").sendMessage()};ChatButlerQuitWait.prototype.closeButton=function(){return zi("fsm").next(Te)};ChatButlerQuitWait.prototype.done=function(){return zi("fsm").next(Te)};ChatButlerQuitWait.prototype.transitionOut=function(e){return zi("popup").close(e)};return ChatButlerQuitWait}(S);Mt=function(e){r(RegisterOptions,e);function RegisterOptions(){return RegisterOptions.__super__.constructor.apply(this,arguments)}RegisterOptions.prototype.enter=function(){var e,t,i,r;r=zi("session");if(((t=r.get("client_name"))!=null?t.length:void 0)&&((i=r.get("client_email"))!=null?i.length:void 0)){return zi("fsm").next(re)}else if(zi("config").facebook_connect!=="register"){return zi("fsm").next(Ot)}else if(!zi("facebook")){return zi("fsm").next(Ot)}else{this.timer=setTimeout(function(){return zi("fsm").event("timerFired")},vi.timeout/2);try{return FB.getLoginStatus(function(e){qi("getLoginStatus response=",e);if(e.status!=="connected"){r.set("facebook_connected",true);return zi("fsm").next(Tt)}else{return zi("fsm").next(At)}})}catch(n){e=n;qi("Error getting FB status");return zi("fsm").next(Ot)}}};RegisterOptions.prototype.timerFired=function(){return zi("fsm").next(Ot)};RegisterOptions.prototype.leave=function(e){clearTimeout(this.timer);return e()};return RegisterOptions}(vi);Pe=function(e){r(GroupSelect,e);function GroupSelect(){return GroupSelect.__super__.constructor.apply(this,arguments)}GroupSelect.prototype.enter=function(e){this.data=e;if(this.data.available.length===1){return zi("fsm").event("select",1)}else{zi("button").fadeOutEyecatcher();zi("group_select_view").show(this.data,function(){});return zi("tracking_event").trigger("group_select_show")}};GroupSelect.prototype.chatButton=function(){zi("tracking_event").trigger("group_select_cancel");return zi("popup").close(function(){return zi("fsm").next(Te)})};GroupSelect.prototype.closeButton=function(){zi("tracking_event").trigger("group_select_cancel");return zi("popup").close(function(){return zi("fsm").next(Te)})};GroupSelect.prototype.select=function(e){if(!e){return}zi("tracking_event").trigger("group_select_submit");zi("session").set("group_select_id",this.data.available[e-1].id);return zi("fsm").next(ne)};return GroupSelect}(vi);Ot=function(e){r(RegisterForm,e);function RegisterForm(){return RegisterForm.__super__.constructor.apply(this,arguments)}RegisterForm.prototype.transitionIn=function(e){zi("button").fadeOutEyecatcher();return zi("register_view").showRegisterForm(e)};RegisterForm.prototype.enter=function(){return zi("tracking_event").trigger("register_show")};RegisterForm.prototype.chatButton=function(){zi("tracking_event").trigger("register_cancel");return zi("popup").close(function(){return zi("fsm").next(Te)})};RegisterForm.prototype.directRequest=function(){zi("tracking_event").trigger("register_cancel");return zi("popup").close(function(){return zi("fsm").next(Te)})};RegisterForm.prototype.closeButton=function(){zi("tracking_event").trigger("register_cancel");return zi("popup").close(function(){return zi("fsm").next(Te)})};RegisterForm.prototype.submitButton=function(){zi("tracking_event").trigger("register_submit");if(zi("register_view").validateRegisterForm()){return zi("fsm").next(re)}};return RegisterForm}(vi);Tt=function(e){r(RegisterFacebookLogin,e);function RegisterFacebookLogin(){return RegisterFacebookLogin.__super__.constructor.apply(this,arguments)}RegisterFacebookLogin.prototype.transitionIn=function(e){zi("button").fadeOutEyecatcher();return zi("register_view").showRegisterFormFacebook(e)};RegisterFacebookLogin.prototype.facebookLoginResponse=function(e){if(e.authResponse){zi("tracking_event").trigger("facebook_login_success");return zi("fsm").event("facebookApiMeRequest")}else{zi("tracking_event").trigger("facebook_login_failure");qi("User cancelled login or did not fully authorize.");return zi("fsm").next(Ot)}};RegisterFacebookLogin.prototype.facebookApiMeRequest=function(){this.timer=setTimeout(function(){return zi("fsm").event("timerFired")},vi.timeout/2);return FB.api("/me",function(e){return zi("fsm").event("facebookApiMeResponse",e)})};RegisterFacebookLogin.prototype.facebookApiMeResponse=function(e){var t;t=zi("session");if(e.email&&e.name){zi("tracking_event").trigger("facebook_me_response");t.set("client_email",e.email);t.set("client_name",e.name);return zi("fsm").next(re)}else{qi("Incomplete Facebook ME Response.",e);return zi("fsm").next(Ot)}};RegisterFacebookLogin.prototype.timerFired=function(){return zi("fsm").next(Ot)};RegisterFacebookLogin.prototype.leave=function(e){clearTimeout(this.timer);return e()};return RegisterFacebookLogin}(Ot);At=function(e){r(RegisterFacebookApiMe,e);function RegisterFacebookApiMe(){return RegisterFacebookApiMe.__super__.constructor.apply(this,arguments)}RegisterFacebookApiMe.prototype.enter=function(){this.timer=setTimeout(function(){return zi("fsm").event("timerFired")},vi.timeout/2);return FB.api("/me",function(e){return zi("fsm").event("facebookApiMeResponse",e)})};RegisterFacebookApiMe.prototype.facebookApiMeResponse=function(e){var t;t=zi("session");if(e.email&&e.name){zi("tracking_event").trigger("facebook_me_response");t.set("client_email",e.email);t.set("client_name",e.name);return zi("fsm").next(re)}else{qi("Incomplete Facebook ME Response.",e);return zi("fsm").next(Ot)}};RegisterFacebookApiMe.prototype.timerFired=function(){return zi("fsm").next(Ot)};RegisterFacebookApiMe.prototype.leave=function(e){clearTimeout(this.timer);return e()};return RegisterFacebookApiMe}(vi);st=function(e){r(PreSurveyForm,e);function PreSurveyForm(){return PreSurveyForm.__super__.constructor.apply(this,arguments)}PreSurveyForm.prototype.transitionIn=function(e){zi("button").fadeOutEyecatcher();
return zi("survey_view").showPreSurvey(e)};PreSurveyForm.prototype.enter=function(){return zi("tracking_event").trigger("pre_survey_show")};PreSurveyForm.prototype.chatButton=function(){zi("tracking_event").trigger("pre_survey_cancel");return zi("popup").close(function(){return zi("fsm").next(Te)})};PreSurveyForm.prototype.closeButton=function(){zi("tracking_event").trigger("pre_survey_cancel");return zi("popup").close(function(){return zi("fsm").next(Te)})};PreSurveyForm.prototype.directRequest=function(){zi("tracking_event").trigger("pre_survey_cancel");return zi("popup").close(function(){return zi("fsm").next(Te)})};PreSurveyForm.prototype.select=function(e){zi("tracking_event").trigger("pre_survey_submit");zi("session").set("pre_survey_option",zi("config")["pre_survey_option0"+e]);return zi("fsm").next(se)};return PreSurveyForm}(vi);it=function(e){r(PassiveConnectStart,e);function PassiveConnectStart(){return PassiveConnectStart.__super__.constructor.apply(this,arguments)}PassiveConnectStart.prototype.enter=function(e){zi("session").setOperator(e.operator);zi("tracking_event").trigger("chat_passive_connect");return zi("chat_view").displaySlot(e.operator.display_name,e.operator.url_image,zi("config").status_message,function(){return zi("fsm").next(Xe)})};return PassiveConnectStart}(vi);Xe=function(e){r(PassiveConnectOffer,e);function PassiveConnectOffer(){return PassiveConnectOffer.__super__.constructor.apply(this,arguments)}PassiveConnectOffer.prototype.enter=function(){return zi("fsm").poll()};PassiveConnectOffer.prototype.transitionIn=function(e){zi("button").fadeOutEyecatcher();return zi("chat_view").show(e)};PassiveConnectOffer.prototype.inputEnter=function(e){var t;t=zi("chat_view").sendMessage();if((t!=null?t.length:void 0)>0){zi("fsm").queue("sendMessage",t);return zi("fsm").next(tt)}};PassiveConnectOffer.prototype.sendMessage=function(e){if((e!=null?e.length:void 0)>0){zi("fsm").unshift("sendMessage",e);return zi("fsm").next(tt)}};PassiveConnectOffer.prototype.closeButton=function(){return zi("popup").close(function(){return zi("fsm").next(Te)})};PassiveConnectOffer.prototype.minimizeButton=function(){return zi("popup").close(function(){return zi("fsm").next(Te)})};PassiveConnectOffer.prototype.chatButton=function(){return zi("popup").close(function(){return zi("fsm").next(Te)})};return PassiveConnectOffer}(vi);tt=function(e){r(PassiveConnectSocketConnect,e);function PassiveConnectSocketConnect(){return PassiveConnectSocketConnect.__super__.constructor.apply(this,arguments)}PassiveConnectSocketConnect.prototype.connect=function(){return zi("fsm").next($e)};PassiveConnectSocketConnect.prototype.error=function(){return zi("fsm").next(Ue)};PassiveConnectSocketConnect.prototype.connectFailed=function(){return zi("fsm").next(Ue)};PassiveConnectSocketConnect.prototype.enter=function(){this.timer=setTimeout(function(){return zi("fsm").event("timerFired")},vi.timeout_connect);return zi("slot").connect()};PassiveConnectSocketConnect.prototype.timerFired=function(){return zi("fsm").next(Ue)};PassiveConnectSocketConnect.prototype.leave=function(e){clearTimeout(this.timer);return e()};PassiveConnectSocketConnect.prototype.inputEnter=function(e){var t;t=zi("chat_view").sendMessage();return zi("fsm").queue("sendMessage",t)};return PassiveConnectSocketConnect}(vi);$e=function(e){r(PassiveConnectSlotCreate,e);function PassiveConnectSlotCreate(){return PassiveConnectSlotCreate.__super__.constructor.apply(this,arguments)}PassiveConnectSlotCreate.prototype.inputEnter=function(e){var t;t=zi("chat_view").sendMessage();return zi("fsm").queue("sendMessage",t)};PassiveConnectSlotCreate.prototype.slotCreated=function(e){return zi("fsm").next(et,e)};PassiveConnectSlotCreate.prototype.enter=function(){this.timer=setTimeout(function(){return zi("fsm").event("timerFired")},vi.timeout_connect);return zi("slot").create({group_select_id:zi("session").get("group_select_id")})};PassiveConnectSlotCreate.prototype.timerFired=function(){return zi("fsm").next(Ue)};PassiveConnectSlotCreate.prototype.leave=function(e){clearTimeout(this.timer);return e()};return PassiveConnectSlotCreate}(vi);et=function(e){r(PassiveConnectSlotVerify,e);function PassiveConnectSlotVerify(){return PassiveConnectSlotVerify.__super__.constructor.apply(this,arguments)}PassiveConnectSlotVerify.prototype.enter=function(e){if(e.operator){return zi("fsm").next(Ze,e)}else{return zi("fsm").next(Ue)}};return PassiveConnectSlotVerify}(vi);Ze=function(e){r(PassiveConnectSlotStart,e);function PassiveConnectSlotStart(){return PassiveConnectSlotStart.__super__.constructor.apply(this,arguments)}PassiveConnectSlotStart.prototype.enter=function(e){var t;t=zi("session");t.set("id",e.id);t.set("chat_meta_id",e.chat_meta_id);t.set("was_proactive",false);t.resetStats();if(t.get("operator_id")===e.operator.id){t.setOperator(e.operator);zi("tracking").startSlot();zi("tracking_event").trigger("chat_connected");return zi("fsm").next(g)}else{t.setOperator(e.operator);zi("tracking").startSlot();return zi("chat_view").displaySlot(e.operator.display_name,e.operator.url_image,zi("config").status_message,function(){zi("tracking_event").trigger("chat_connected");return zi("fsm").next(g)})}};return PassiveConnectSlotStart}(vi);gi=function(e){r(SocketConnect,e);function SocketConnect(){return SocketConnect.__super__.constructor.apply(this,arguments)}SocketConnect.prototype.connecting=function(){return qi("Connecting")};SocketConnect.prototype.connect=function(){return zi("fsm").next(si,{proactive:false})};SocketConnect.prototype.error=function(){return zi("fsm").next(Ue)};SocketConnect.prototype.connectFailed=function(){return zi("fsm").next(Ue)};SocketConnect.prototype.enter=function(){this.timer=setTimeout(function(){return zi("fsm").event("timerFired")},vi.timeout_connect);return zi("slot").connect()};SocketConnect.prototype.timerFired=function(){zi("slot").disconnect();return zi("fsm").next(Ue)};SocketConnect.prototype.leave=function(e){clearTimeout(this.timer);return e()};SocketConnect.prototype.inputEnter=function(e){var t;t=zi("chat_view").sendMessage();return zi("fsm").queue("sendMessage",t)};return SocketConnect}(vi);v=function(e){r(ChatButlerConnect,e);function ChatButlerConnect(){return ChatButlerConnect.__super__.constructor.apply(this,arguments)}ChatButlerConnect.prototype.error=function(){return zi("fsm").next(y)};ChatButlerConnect.prototype.connectFailed=function(){return zi("fsm").next(y)};ChatButlerConnect.prototype.timerFired=function(){zi("slot").disconnect();return zi("fsm").next(y)};return ChatButlerConnect}(gi);si=function(e){r(SlotCreate,e);function SlotCreate(){return SlotCreate.__super__.constructor.apply(this,arguments)}SlotCreate.prototype.slotCreated=function(e){return zi("fsm").next(hi,e)};SlotCreate.prototype.enter=function(e){this.timer=setTimeout(function(){return zi("fsm").event("timerFired")},vi.timeout_connect*5);return zi("fsm").poll()};SlotCreate.prototype.directRequest=function(e){return zi("slot").create(e)};SlotCreate.prototype.slotRequest=function(){return zi("slot").create({group_select_id:zi("session").get("group_select_id")})};SlotCreate.prototype.timerFired=function(){zi("slot").disconnect();return zi("fsm").next(Ue)};SlotCreate.prototype.leave=function(e){clearTimeout(this.timer);return e()};SlotCreate.prototype.closeButton=function(){return zi("fsm").next(J)};SlotCreate.prototype.minimizeButton=function(){return zi("fsm").next(J)};SlotCreate.prototype.inputEnter=function(){var e;e=zi("chat_view").sendMessage();return zi("fsm").queue("sendMessage",e)};return SlotCreate}(vi);hi=function(e){r(SlotVerify,e);function SlotVerify(){return SlotVerify.__super__.constructor.apply(this,arguments)}SlotVerify.prototype.enter=function(e){if(e.operator){return zi("fsm").next(li,e)}else{return zi("fsm").next(ai,e)}};return SlotVerify}(vi);ai=function(e){r(SlotErrorDisconnect,e);function SlotErrorDisconnect(){return SlotErrorDisconnect.__super__.constructor.apply(this,arguments)}SlotErrorDisconnect.prototype.enter=function(e){zi("slot").disconnect();return zi("fsm").event("slotDisconnect",e)};SlotErrorDisconnect.prototype.slotDisconnect=function(e){return zi("fsm").next(ui,e)};return SlotErrorDisconnect}(vi);ui=function(e){r(SlotErrorHandle,e);function SlotErrorHandle(){return SlotErrorHandle.__super__.constructor.apply(this,arguments)}SlotErrorHandle.prototype.enter=function(e){qi("message="+(e!=null?e.message:void 0));if(e){if(e.message==="CUSTOMER_NOT_FOUND"){return zi("fsm").next(me)}else if(e.message==="EXPIRED"){return zi("fsm").next(Ue)}else if(e.message==="QUOTA_LIMIT_REACHED"){return zi("fsm").next(Ue)}else if(e.message==="GROUP_OFFLINE"){return zi("fsm").next(Ue)}else if(e.message==="NO_SLOT"){return zi("fsm").next(Ue)}else{return zi("fsm").next(Ue)}}else{return zi("fsm").next(Ue)}};return SlotErrorHandle}(vi);W=function(e){r(ChatUserQuit,e);function ChatUserQuit(){return ChatUserQuit.__super__.constructor.apply(this,arguments)}ChatUserQuit.prototype.enter=function(){var e;e=zi("session");zi("slot").queue("emit","quit");e.setState("Offline");e.deleteConfig();zi("tracking_event").trigger("chat_quit");e.resetChatDuration();return zi("fsm").event("done")};ChatUserQuit.prototype.done=function(){return zi("fsm").next(H)};return ChatUserQuit}(vi);H=function(e){r(ChatUserQuitDisconnect,e);function ChatUserQuitDisconnect(){return ChatUserQuitDisconnect.__super__.constructor.apply(this,arguments)}ChatUserQuitDisconnect.prototype.slotDisconnect=function(e){return zi("fsm").next(ae)};return ChatUserQuitDisconnect}(ai);ae=function(e){r(CheckTranscriptForm,e);function CheckTranscriptForm(){return CheckTranscriptForm.__super__.constructor.apply(this,arguments)}CheckTranscriptForm.prototype.enter=function(){if(zi("config").transcript_enabled&&zi("session").hasClientOriginating()){return zi("fsm").next(Pi)}else{return zi("fsm").next(X)}};return CheckTranscriptForm}(vi);Pi=function(e){r(TranscriptForm,e);function TranscriptForm(){return TranscriptForm.__super__.constructor.apply(this,arguments)}TranscriptForm.prototype.transitionIn=function(e){return zi("transcript_view").show(e)};TranscriptForm.prototype.enter=function(){return zi("tracking_event").trigger("transcript_show")};TranscriptForm.prototype.chatButton=function(){zi("tracking_event").trigger("transcript_cancel");return zi("popup").close(function(){return zi("fsm").next(X)})};TranscriptForm.prototype.directRequest=function(){zi("tracking_event").trigger("transcript_cancel");return zi("popup").close(function(){return zi("fsm").next(X)})};TranscriptForm.prototype.closeButton=function(){zi("tracking_event").trigger("transcript_cancel");return zi("popup").close(function(){return zi("fsm").next(X)})};TranscriptForm.prototype.submitButton=function(){zi("tracking_event").trigger("transcript_submit");if(zi("transcript_view").validateTranscriptForm()){return zi("fsm").next(Bi)}};return TranscriptForm}(vi);Bi=function(e){r(TranscriptSend,e);function TranscriptSend(){return TranscriptSend.__super__.constructor.apply(this,arguments)}TranscriptSend.prototype.transitionIn=function(e){return zi("progress_view").show(e)};TranscriptSend.prototype.enter=function(){this.timer=setTimeout(function(){return zi("fsm").event("timerFired")},vi.timeout_disconnected);return zi("slot").sendTranscript(function(){return zi("fsm").event("sent")})};TranscriptSend.prototype.leave=function(e){clearTimeout(this.timer);return e()};TranscriptSend.prototype.timerFired=function(){return zi("fsm").next(X)};TranscriptSend.prototype.sent=function(){zi("fsm").next(X);return{reconnect:function(){return zi("fsm").next(g)}}};return TranscriptSend}(vi);X=function(e){r(CheckPostChatFirst,e);function CheckPostChatFirst(){return CheckPostChatFirst.__super__.constructor.apply(this,arguments)}CheckPostChatFirst.prototype.enter=function(){if(zi("config").rating_enabled&&zi("session").hasClientOriginating()){return zi("fsm").next(O)}else{return zi("fsm").next(Z)}};return CheckPostChatFirst}(vi);Z=function(e){r(CheckPostChatSecond,e);function CheckPostChatSecond(){return CheckPostChatSecond.__super__.constructor.apply(this,arguments)}CheckPostChatSecond.prototype.enter=function(){if(zi("config").post_survey_enabled){return zi("fsm").next(nt)}else{return zi("fsm").next(ee)}};return CheckPostChatSecond}(vi);ee=function(e){r(CheckPostChatThird,e);function CheckPostChatThird(){return CheckPostChatThird.__super__.constructor.apply(this,arguments)}CheckPostChatThird.prototype.enter=function(){if(zi("facebook")&&zi("config").facebook_like_enabled||zi("twitter")&&zi("config").twitter_integration!=="disabled"){return zi("fsm").next(di)}else{return zi("fsm").next($)}};return CheckPostChatThird}(vi);$=function(e){r(CheckPostChatLast,e);function CheckPostChatLast(){return CheckPostChatLast.__super__.constructor.apply(this,arguments)}CheckPostChatLast.prototype.enter=function(){return zi("fsm").next(V)};return CheckPostChatLast}(vi);O=function(e){r(ChatFeedbackRatingComposite,e);function ChatFeedbackRatingComposite(){return ChatFeedbackRatingComposite.__super__.constructor.apply(this,arguments)}ChatFeedbackRatingComposite.prototype.transitionIn=function(e){return zi("feedback_rating_composite_view").show(e)};ChatFeedbackRatingComposite.prototype.enter=function(){return zi("tracking_event").trigger("feedback_rating_show")};ChatFeedbackRatingComposite.prototype.trySubmit=function(){if(zi("feedback_rating_composite_view").isValid()){return zi("fsm").event("done")}else{zi("tracking_event").trigger("feedback_rating_cancel");return zi("fsm").next(Z)}};ChatFeedbackRatingComposite.prototype.closeButton=function(){return zi("fsm").event("trySubmit")};ChatFeedbackRatingComposite.prototype.directRequest=function(){return zi("fsm").event("trySubmit")};ChatFeedbackRatingComposite.prototype.chatButton=function(){return zi("fsm").event("trySubmit")};ChatFeedbackRatingComposite.prototype.submitButton=function(){if(zi("feedback_rating_composite_view").isValid()){return zi("fsm").event("done")}else{return zi("fsm").event("cancel")}};ChatFeedbackRatingComposite.prototype.done=function(){var e;e=new ye(zi("rating_view"),zi("feedback_view"));e.send();return zi("fsm").next(Z)};return ChatFeedbackRatingComposite}(vi);di=function(e){r(SocialComposite,e);function SocialComposite(){return SocialComposite.__super__.constructor.apply(this,arguments)}SocialComposite.prototype.transitionIn=function(e){return zi("social_composite_view").show(e)};SocialComposite.prototype.enter=function(){return zi("tracking_event").trigger("social_composite_show")};SocialComposite.prototype.closeButton=function(){zi("tracking_event").trigger("social_composite_cancel");return zi("fsm").next($)};SocialComposite.prototype.directRequest=function(){zi("tracking_event").trigger("social_composite_cancel");return zi("fsm").next($)};SocialComposite.prototype.chatButton=function(){zi("tracking_event").trigger("social_composite_cancel");return zi("fsm").next($)};return SocialComposite}(vi);nt=function(e){r(PostSurveyForm,e);function PostSurveyForm(){return PostSurveyForm.__super__.constructor.apply(this,arguments)}PostSurveyForm.prototype.transitionIn=function(e){return zi("survey_view").showPostSurvey(e)};PostSurveyForm.prototype.enter=function(){return zi("tracking_event").trigger("post_survey_show")};PostSurveyForm.prototype.closeButton=function(){zi("tracking_event").trigger("post_survey_cancel");return zi("fsm").next(ee)};PostSurveyForm.prototype.directRequest=function(){zi("tracking_event").trigger("post_survey_cancel");return zi("fsm").next(ee)};PostSurveyForm.prototype.chatButton=function(){zi("tracking_event").trigger("post_survey_cancel");return zi("fsm").next(ee)};PostSurveyForm.prototype.select=function(e){var t;zi("tracking_event").trigger("post_survey_submit");t=new bi;t.send(zi("config")["post_survey_option0"+e],e);return zi("fsm").next(ee)};return PostSurveyForm}(vi);V=function(e){r(ChatQuit,e);function ChatQuit(){return ChatQuit.__super__.constructor.apply(this,arguments)}ChatQuit.prototype.transitionIn=function(e){return zi("popup").close(e)};ChatQuit.prototype.enter=function(){return zi("fsm").next(ze)};return ChatQuit}(vi);J=function(e){r(ChatWaitQuit,e);function ChatWaitQuit(){return ChatWaitQuit.__super__.constructor.apply(this,arguments)}ChatWaitQuit.prototype.transitionIn=function(e){return zi("popup").close(e)};ChatWaitQuit.prototype.slotCreated=function(e){return zi("fsm").next(N)};return ChatWaitQuit}(vi);N=function(e){r(ChatSendQuit,e);function ChatSendQuit(){return ChatSendQuit.__super__.constructor.apply(this,arguments)}ChatSendQuit.prototype.done=function(){return zi("fsm").next(ze)};return ChatSendQuit}(W);D=function(e){r(ChatQuitWaitDisconnect,e);function ChatQuitWaitDisconnect(){return ChatQuitWaitDisconnect.__super__.constructor.apply(this,arguments)}ChatQuitWaitDisconnect.prototype.slotDisconnect=function(e){return zi("fsm").next(q,e)};return ChatQuitWaitDisconnect}(ai);q=function(e){r(ChatQuitWait,e);function ChatQuitWait(){return ChatQuitWait.__super__.constructor.apply(this,arguments)}ChatQuitWait.prototype.transitionIn=function(e){return zi("popup").show(function(){zi("chat_view").showOperatorQuitInfo();return e()})};ChatQuitWait.prototype.enter=function(){var e;e=zi("session");zi("fsm").reset();e.setState("Offline");e.deleteConfig();zi("tracking_event").trigger("chat_quit");return e.resetChatDuration()};ChatQuitWait.prototype.closeButton=function(){return zi("fsm").next(ae)};ChatQuitWait.prototype.minimizeButton=function(){return zi("fsm").next(ae)};ChatQuitWait.prototype.directRequest=function(){return zi("fsm").next(ae)};ChatQuitWait.prototype.chatButton=function(){return zi("fsm").next(ae)};ChatQuitWait.prototype.inputEnter=function(e){zi("tracking_event").trigger("chat_requested");zi("fsm").queue("inputEnter",e);zi("fsm").queue("slotRequest");return zi("fsm").next(gi)};return ChatQuitWait}(vi);R=function(e){r(ChatMinimizedQuitWaitDisconnect,e);function ChatMinimizedQuitWaitDisconnect(){return ChatMinimizedQuitWaitDisconnect.__super__.constructor.apply(this,arguments)}ChatMinimizedQuitWaitDisconnect.prototype.slotDisconnect=function(e){return zi("fsm").next(j,e)};return ChatMinimizedQuitWaitDisconnect}(ai);j=function(e){r(ChatMinimizedQuitWait,e);function ChatMinimizedQuitWait(){return ChatMinimizedQuitWait.__super__.constructor.apply(this,arguments)}ChatMinimizedQuitWait.prototype.enter=function(){var e;e=zi("session");e.setState("Offline");e.deleteConfig();zi("tracking_event").trigger("chat_quit");return e.resetChatDuration()};ChatMinimizedQuitWait.prototype.chatButton=function(){return zi("fsm").next(q)};ChatMinimizedQuitWait.prototype.directRequest=function(){return zi("fsm").next(q)};return ChatMinimizedQuitWait}(vi);li=function(e){r(SlotStart,e);function SlotStart(){return SlotStart.__super__.constructor.apply(this,arguments)}SlotStart.prototype.enter=function(e){var t,i;i=zi("session");t=i.get("chatbutler_topic");i.resetSession();i.set("id",e.id);i.set("chat_meta_id",e.chat_meta_id);i.set("was_proactive",false);i.resetStats();i.setOperator(e.operator);zi("tracking").startSlot();return zi("chat_view").displaySlot(e.operator.display_name,e.operator.url_image,zi("config").status_message,function(){if(t!=null){zi("chat_view").sendForwardMessage()}else{zi("chat_view").sendWelcomeMessage()}zi("tracking_event").trigger("chat_connected");if(zi("popup").isVisible()){return zi("fsm").next(g)}else{return zi("fsm").next(E)}})};return SlotStart}(vi);g=function(e){r(Chat,e);function Chat(){return Chat.__super__.constructor.apply(this,arguments)}Chat.prototype.enter=function(){if(zi("config").geo_type==="browser"){zi("session").getLocation()}zi("slot").queue("emit","chat");zi("fsm").poll();return zi("button").clear()};Chat.prototype.persist=function(){zi("session").setState("Chat",vi.timeout_offsite);return zi("session").saveConfig()};Chat.prototype.slotRequest=function(){};Chat.prototype.transitionIn=function(e){zi("button").fadeOutEyecatcher();return zi("chat_view").show(e)};Chat.prototype.inputEnter=function(){var e;e=zi("chat_view").sendMessage();return zi("fsm").event("sendMessage",e)};Chat.prototype.chipSelected=function(e){e=zi("chat_view").sendChipMessage(e);return zi("fsm").event("sendMessage",e)};Chat.prototype.chatButton=function(){return zi("fsm").next(E)};Chat.prototype.minimizeButton=function(){return zi("fsm").next(E)};Chat.prototype.directRequest=function(){return zi("fsm").next(E)};Chat.prototype.closeButton=function(){return zi("fsm").next(W)};Chat.prototype.sendMessage=function(e){var t,i;if(!(e!=null?e.length:void 0)){return}t=zi("session");zi("fsm").event("persist");if(!t.hasClientOriginating()){t.startChatDuration();zi("tracking_event").trigger("chat_started");i=t.get("was_proactive");if(i&&i!=="false"){zi("tracking_event").trigger("chat_started_proactive")}}t.incClientOriginating();zi("tracking").sendMessage();zi("tracking_event").trigger("message_operator_terminating");zi("slot").queue("emit","chat_message",e);if(!(zi("popup").isActive()&&zi("config").audio_only_inactive)){return zi("sound").play("message_sent")}};Chat.prototype.requestUrlInfo=function(e){return zi("slot").urlinfo(e.url,e.callback)};Chat.prototype.goalReached=function(){return zi("slot").queue("emit","update_info",zi("session").packet())};Chat.prototype.locationchange=function(e){return zi("slot").queue("emit","update_info",zi("session").packet())};Chat.prototype.hashchange=function(e){return zi("slot").queue("emit","update_info",zi("session").packet())};Chat.prototype.pushstate=function(e){zi("slot").queue("emit","update_info",zi("session").packet());return zi("goal").check()};Chat.prototype.updateAPI=function(){zi("session").updateUserData();return zi("slot").queue("emit","update_info_api",zi("session").packet())};Chat.prototype.livePreview=function(e){return zi("slot").queue("emit","live_preview",e)};Chat.prototype.receiveMessage=function(e){zi("fsm").event("persist");if(!zi("session").hasClientTerminating()){zi("tracking_event").trigger("message_client_terminating_first")}zi("session").incClientTerminating();zi("tracking").receiveMessage();zi("tracking_event").trigger("message_client_terminating");if(!(zi("popup").isActive()&&zi("config").audio_only_inactive)){zi("sound").play("message_received")}return zi("chat_view").receiveMessage(e.from,e.body)};Chat.prototype.stateComposing=function(){return zi("slot").queue("emit","composing")};Chat.prototype.statePaused=function(){return zi("slot").queue("emit","paused")};Chat.prototype.stateActive=function(){return zi("slot").queue("emit","active")};Chat.prototype.stateInactive=function(){return zi("slot").queue("emit","inactive")};Chat.prototype.receiveComposing=function(e){if(zi("config").emit_chat_state){return zi("chat_view").stateComposing(e.from)}};Chat.prototype.receivePaused=function(e){if(zi("config").emit_chat_state){return zi("chat_view").statePaused(e.from)}};Chat.prototype.receiveBlock=function(){return zi("fsm").next(k)};Chat.prototype.receiveInactive=function(e){return zi("fsm").next(M)};Chat.prototype.receiveQuit=function(){return zi("fsm").next(D)};Chat.prototype.receiveSwitch=function(e){return zi("fsm").next(pi)};Chat.prototype.receiveName=function(e){return zi("session").set("client_name",e.name)};Chat.prototype.receiveEmail=function(e){return zi("session").set("client_email",e.email)};Chat.prototype.receiveLocale=function(e){return zi("session").set("locale",e.locale)};Chat.prototype.receiveAdditional=function(e){return zi("session").set("client_additional0"+e.num+"_value",e.value)};Chat.prototype.receiveReplaceText=function(e){return zi("chat_view").replaceText(e)};Chat.prototype.receiveScreenshot=function(e){var t,i,r,n;t=zi("session").get("chat_meta_id");i=zi("config").customer_id;n=zi("session").get("id");r=new Yt;if(r.unsupported()){return e(true)}qi("receiveScreenshot::load");return r.load(function(){var o;qi("receiveScreenshot::take");o=r.take();return o.then(function(o){return function(o){qi("receiveScreenshot::take ok");return r.crossDomainPost("https://api.userlike.com/api/client/message/chat_meta/screenshot/",{id:t,customer_id:i,screenshot:o.toDataURL("image/png"),session_id:n},function(t,i){qi("receiveScreenshot::sent err="+t+" url="+(i!=null?i.url:void 0));return e(t,i!=null?i.url:void 0)})}}(this),function(t){return function(){qi("receiveScreenshot::take failed");return e(true)}}(this))["catch"](function(t){qi("receiveScreenshot::take failed");return e(true)})})};Chat.prototype.receivePush=function(e){var t;t=new St;return t.send(e.url,e.callback)};Chat.prototype.receiveDownload=function(e){return zi("chat_view").receiveDownload(e.from,e.url,e.name)};Chat.prototype.receiveImage=function(e){return zi("chat_view").receiveImage(e.from,e.url,e.thumbnail_url,e.title)};Chat.prototype.receiveVideo=function(e){return zi("chat_view").receiveVideo(e.from,e.url,e.thumbnail_url,e.title)};Chat.prototype.receiveChips=function(e){return zi("chat_view").receiveChips(e.choices,e.title)};Chat.prototype.receiveLinks=function(e){return zi("chat_view").receiveLinks(e.links)};Chat.prototype.receiveOperatorDisconnect=function(){return zi("fsm").next(I)};Chat.prototype.receiveHibernate=function(){return zi("fsm").next(Xt)};Chat.prototype.receiveSlot=function(e){zi("session").setOperator(e.operator);return zi("chat_view").displaySlot(e.operator.display_name,e.operator.url_image,zi("config").status_message,function(){})};Chat.prototype.receiveForward=function(e){zi("session").setOperator(e.operator);return zi("chat_view").displaySlot(e.operator.display_name,e.operator.url_image,zi("config").status_message,function(){return zi("chat_view").sendForwardMessage()})};Chat.prototype.receiveOffline=function(e){zi("slot").disconnect();return zi("fsm").next(F)};Chat.prototype.disconnect=function(){return zi("fsm").next(U)};Chat.prototype.injectBubble=function(e){var t;zi("chat_view").injectInContent(e);if(e.extract_callback){t=e.extract_callback(e.body)}else{t=$i(e.body)}zi("fsm").event("sendMessage",$i(e.prefix));return zi("fsm").event("sendMessage",t)};return Chat}(vi);E=function(e){r(ChatMinimized,e);function ChatMinimized(){return ChatMinimized.__super__.constructor.apply(this,arguments)}ChatMinimized.prototype.enter=function(){zi("tracking_event").trigger("chat_window_minimzed");return zi("slot").queue("emit","minize")};ChatMinimized.prototype.persist=function(){var e;e=zi("session");e.setState("ChatMinimized",vi.timeout_offsite);return e.saveConfig()};ChatMinimized.prototype.transitionIn=function(e){zi("popup").hide(e);return zi("button").clear()};ChatMinimized.prototype.inputEnter=function(){};ChatMinimized.prototype.chatButton=function(){zi("tracking_event").trigger("chat_window_maximized");return zi("fsm").next(g)};ChatMinimized.prototype.directRequest=function(){zi("tracking_event").trigger("chat_window_maximized");return zi("fsm").next(g)};ChatMinimized.prototype.receiveMessage=function(e){var t,i,r;t=zi("session");zi("fsm").event("persist");i=zi("tracking_event");if(!t.hasClientTerminating()){i.trigger("message_client_terminating_first");r=t.get("was_proactive");if(r&&r!=="false"){i.trigger("message_client_terminating_first_proactive")}}t.incClientTerminating();zi("tracking").receiveMessage();i.trigger("message_client_terminating");if(!(zi("popup").isActive()&&zi("config").audio_only_inactive)){zi("sound").play("message_received")}return zi("chat_view").receiveMessage(e.from,e.body,e.sent_at)};ChatMinimized.prototype.receiveDownload=function(e){return zi("chat_view").receiveDownload(e.from,e.url,e.name)};ChatMinimized.prototype.receiveImage=function(e){return zi("chat_view").receiveImage(e.from,e.url,e.thumbnail_url,e.title)};ChatMinimized.prototype.receiveVideo=function(e){return zi("chat_view").receiveVideo(e.from,e.url,e.thumbnail_url,e.title)};ChatMinimized.prototype.receiveChips=function(e){return zi("chat_view").receiveChips(e.choices,e.title)};ChatMinimized.prototype.receiveLinks=function(e){return zi("chat_view").receiveLinks(e.links)};ChatMinimized.prototype.receiveQuit=function(){return zi("fsm").next(R)};return ChatMinimized}(g);M=function(e){r(ChatInactive,e);function ChatInactive(){return ChatInactive.__super__.constructor.apply(this,arguments)}ChatInactive.prototype.enter=function(){return zi("fsm").next(Ue)};return ChatInactive}(vi);k=function(e){r(ChatBlocked,e);function ChatBlocked(){return ChatBlocked.__super__.constructor.apply(this,arguments)}ChatBlocked.prototype.transitionIn=function(e){return zi("popup").close(function(){return zi("popup").hideTab(e)})};ChatBlocked.prototype.enter=function(){return zi("session").set("blocked",1)};return ChatBlocked}(vi);U=function(e){r(ChatReconnectingIntermediate,e);function ChatReconnectingIntermediate(){return ChatReconnectingIntermediate.__super__.constructor.apply(this,arguments)}ChatReconnectingIntermediate.prototype.reconnecting=function(){};ChatReconnectingIntermediate.prototype.reconnect=function(){};ChatReconnectingIntermediate.prototype.connect=function(){return zi("fsm").next(zt)};ChatReconnectingIntermediate.prototype.reconnectFailed=function(){return zi("fsm").next(ai)};ChatReconnectingIntermediate.prototype.timerFired=function(){return zi("fsm").next(z)};ChatReconnectingIntermediate.prototype.enter=function(){return this.timer=setTimeout(function(){return zi("fsm").event("timerFired")},vi.timeout)};ChatReconnectingIntermediate.prototype.leave=function(e){clearTimeout(this.timer);return e()};return ChatReconnectingIntermediate}(vi);z=function(e){r(ChatReconnecting,e);function ChatReconnecting(){return ChatReconnecting.__super__.constructor.apply(this,arguments)}ChatReconnecting.prototype.transitionIn=function(e){return zi("progress_view").show(e)};ChatReconnecting.prototype.reconnecting=function(){};ChatReconnecting.prototype.reconnect=function(){};ChatReconnecting.prototype.connect=function(){return zi("fsm").next(zt)};ChatReconnecting.prototype.reconnectFailed=function(){return zi("fsm").next(ai)};ChatReconnecting.prototype.timerFired=function(){return zi("fsm").next(ai)};ChatReconnecting.prototype.enter=function(){return this.timer=setTimeout(function(){return zi("fsm").event("timerFired")},vi.timeout_disconnected)};ChatReconnecting.prototype.leave=function(e){clearTimeout(this.timer);return e()};return ChatReconnecting}(vi);pi=function(e){r(SlotSwitchDisconnect,e);function SlotSwitchDisconnect(){return SlotSwitchDisconnect.__super__.constructor.apply(this,arguments)}SlotSwitchDisconnect.prototype.slotDisconnect=function(e){return zi("fsm").next(ci,e)};return SlotSwitchDisconnect}(ai);ci=function(e){r(SlotSwitch,e);function SlotSwitch(){return SlotSwitch.__super__.constructor.apply(this,arguments)}SlotSwitch.prototype.transitionIn=function(e){return zi("message_view").showTransfer(e)};SlotSwitch.prototype.transitionOut=function(e){return zi("popup").close(e)};SlotSwitch.prototype.chatButton=function(){return zi("fsm").next(fi)};SlotSwitch.prototype.closeButton=function(){return zi("fsm").next(fi)};SlotSwitch.prototype.minimizeButton=function(){return zi("fsm").next(fi)};return SlotSwitch}(vi);fi=function(e){r(SlotSwitchIdle,e);function SlotSwitchIdle(){return SlotSwitchIdle.__super__.constructor.apply(this,arguments)}SlotSwitchIdle.prototype.chatButton=function(){return zi("fsm").next(xi)};SlotSwitchIdle.prototype.directRequest=function(){return zi("fsm").next(xi)};return SlotSwitchIdle}(vi);L=function(e){r(ChatReopen,e);function ChatReopen(){return ChatReopen.__super__.constructor.apply(this,arguments)}ChatReopen.prototype.enter=function(e){zi("fsm").event("receiveMessage",e);return zi("fsm").next(g)};return ChatReopen}(g);Xt=function(e){r(ServerHibernate,e);function ServerHibernate(){return ServerHibernate.__super__.constructor.apply(this,arguments)}ServerHibernate.prototype.transitionIn=function(e){return zi("progress_view").show(e)};ServerHibernate.prototype.connect=function(){return zi("fsm").next($t)};ServerHibernate.prototype.reconnectFailed=function(){return zi("fsm").next(F)};ServerHibernate.prototype.timerFired=function(){return zi("fsm").next(F);
};ServerHibernate.prototype.enter=function(){return this.timer=setTimeout(function(){return zi("fsm").event("timerFired")},vi.timeout_hibernate)};ServerHibernate.prototype.leave=function(e){clearTimeout(this.timer);return e()};return ServerHibernate}(vi);$t=function(e){r(ServerHibernateWakeup,e);function ServerHibernateWakeup(){return ServerHibernateWakeup.__super__.constructor.apply(this,arguments)}ServerHibernateWakeup.prototype.enter=function(){this.timer=setTimeout(function(){return zi("fsm").event("timerFired")},vi.timeout_hibernate);return zi("slot").wakeup()};ServerHibernateWakeup.prototype.wakeupDone=function(e){return zi("fsm").next(Zt,e)};ServerHibernateWakeup.prototype.timerFired=function(){return zi("fsm").next(F)};ServerHibernateWakeup.prototype.leave=function(e){clearTimeout(this.timer);return e()};return ServerHibernateWakeup}(vi);Zt=function(e){r(ServerHibernateWakeupSlotVerify,e);function ServerHibernateWakeupSlotVerify(){return ServerHibernateWakeupSlotVerify.__super__.constructor.apply(this,arguments)}ServerHibernateWakeupSlotVerify.prototype.enter=function(e){if(e.operator){return zi("fsm").next(g)}else{return zi("fsm").next(F)}};ServerHibernateWakeupSlotVerify.prototype.transitionOut=function(e){return zi("popup").close(e)};return ServerHibernateWakeupSlotVerify}(vi);I=function(e){r(ChatOperatorDisconnect,e);function ChatOperatorDisconnect(){return ChatOperatorDisconnect.__super__.constructor.apply(this,arguments)}ChatOperatorDisconnect.prototype.transitionIn=function(e){return zi("progress_view").show(e)};ChatOperatorDisconnect.prototype.receiveOperatorReconnect=function(){return zi("fsm").next(g)};ChatOperatorDisconnect.prototype.receiveOffline=function(e){zi("slot").disconnect();return zi("fsm").next(F)};ChatOperatorDisconnect.prototype.receiveSlot=function(e){zi("session").setOperator(e.operator);return zi("chat_view").displaySlot(e.operator.display_name,e.operator.url_image,zi("config").status_message,function(){return zi("fsm").next(g)})};ChatOperatorDisconnect.prototype.receiveForward=function(e){zi("session").setOperator(e.operator);return zi("chat_view").displaySlot(e.operator.display_name,e.operator.url_image,zi("config").status_message,function(){zi("chat_view").sendForwardMessage();return zi("fsm").next(g)})};ChatOperatorDisconnect.prototype.timerFired=function(){zi("slot").disconnect();return zi("fsm").next(F)};ChatOperatorDisconnect.prototype.enter=function(){return this.timer=setTimeout(function(){return zi("fsm").event("timerFired")},vi.timeout_disconnected)};ChatOperatorDisconnect.prototype.leave=function(e){clearTimeout(this.timer);return e()};return ChatOperatorDisconnect}(vi);F=function(e){r(ChatOffline,e);function ChatOffline(){return ChatOffline.__super__.constructor.apply(this,arguments)}ChatOffline.prototype.enter=function(){return zi("fsm").next(Ue)};return ChatOffline}(vi);Dt=function(e){r(RestartSlot,e);function RestartSlot(){return RestartSlot.__super__.constructor.apply(this,arguments)}RestartSlot.prototype.enter=function(){return zi("fsm").next(It)};return RestartSlot}(vi);It=function(e){r(RestartCheckUserlikeObject,e);function RestartCheckUserlikeObject(){return RestartCheckUserlikeObject.__super__.constructor.apply(this,arguments)}RestartCheckUserlikeObject.prototype.done=function(){return zi("fsm").next(qt)};return RestartCheckUserlikeObject}(ue);qt=function(e){r(RestartFacebookLoader,e);function RestartFacebookLoader(){return RestartFacebookLoader.__super__.constructor.apply(this,arguments)}RestartFacebookLoader.prototype.done=function(){qi("RestartFacebookLoader integration="+zi("config").facebook_integration+" facebook="+zi("facebook"));return zi("fsm").next(Ht)};return RestartFacebookLoader}(ve);Ht=function(e){r(RestartTwitterLoader,e);function RestartTwitterLoader(){return RestartTwitterLoader.__super__.constructor.apply(this,arguments)}RestartTwitterLoader.prototype.done=function(){qi("RestartTwitterLoader integration="+zi("config").twitter_integration+" twitter="+zi("twitter"));return zi("fsm").next(Vt)};return RestartTwitterLoader}(Ti);Vt=function(e){r(RestartEventSetup,e);function RestartEventSetup(){return RestartEventSetup.__super__.constructor.apply(this,arguments)}RestartEventSetup.prototype.done=function(e){return zi("fsm").next(Wt,e)};return RestartEventSetup}(ge);Wt=function(e){r(RestartSocketConnect,e);function RestartSocketConnect(){return RestartSocketConnect.__super__.constructor.apply(this,arguments)}RestartSocketConnect.prototype.connect=function(){return zi("fsm").next(zt)};RestartSocketConnect.prototype.slotRestarted=function(e){return zi("fsm").queue("slotRestarted",e)};RestartSocketConnect.prototype.error=function(){return zi("fsm").next(Ue)};RestartSocketConnect.prototype.connectFailed=function(){return zi("fsm").next(Ue)};RestartSocketConnect.prototype.enter=function(){this.timer=setTimeout(function(){return zi("fsm").event("timerFired")},vi.timeout_connect);return zi("slot").connect()};RestartSocketConnect.prototype.timerFired=function(){return zi("fsm").next(Ue)};RestartSocketConnect.prototype.leave=function(e){clearTimeout(this.timer);return e()};return RestartSocketConnect}(vi);zt=function(e){r(RestartSlotCreate,e);function RestartSlotCreate(){return RestartSlotCreate.__super__.constructor.apply(this,arguments)}RestartSlotCreate.prototype.slotRestarted=function(e){return zi("fsm").next(Nt,e)};RestartSlotCreate.prototype.enter=function(){this.timer=setTimeout(function(){return zi("fsm").event("timerFired")},vi.timeout_connect);return zi("slot").restart()};RestartSlotCreate.prototype.timerFired=function(){zi("slot").disconnect();return zi("fsm").next(Ue)};RestartSlotCreate.prototype.leave=function(e){clearTimeout(this.timer);return e()};return RestartSlotCreate}(vi);Nt=function(e){r(RestartSlotVerify,e);function RestartSlotVerify(){return RestartSlotVerify.__super__.constructor.apply(this,arguments)}RestartSlotVerify.prototype.enter=function(e){if(e.status==="switch"){return zi("fsm").next(Ut,e)}else{return zi("fsm").next(ze)}};return RestartSlotVerify}(vi);Ut=function(e){r(RestartSlotPlayback,e);function RestartSlotPlayback(){return RestartSlotPlayback.__super__.constructor.apply(this,arguments)}RestartSlotPlayback.prototype.slotPlayback=function(e){return zi("fsm").next(Lt,e)};RestartSlotPlayback.prototype.enter=function(e){zi("session").setOperator(e.operator);return zi("slot").playback()};return RestartSlotPlayback}(vi);Lt=function(e){r(RestartSlotStart,e);function RestartSlotStart(){return RestartSlotStart.__super__.constructor.apply(this,arguments)}RestartSlotStart.prototype.enter=function(e){zi("tracking_event").trigger("chat_reconnect");zi("chat_view").playbackSlot(e);if(zi("session").getState()==="ChatMinimized"){return zi("fsm").next(E)}else{return zi("fsm").next(g)}};RestartSlotStart.prototype.requestUrlInfo=function(e){return zi("slot").urlinfo(e.url,e.callback)};return RestartSlotStart}(vi);xi=function(e){r(SwitchSocketConnect,e);function SwitchSocketConnect(){return SwitchSocketConnect.__super__.constructor.apply(this,arguments)}SwitchSocketConnect.prototype.slotRestarted=function(e){return zi("fsm").queue("slotRestarted",e)};SwitchSocketConnect.prototype.connect=function(){return zi("fsm").next(wi)};return SwitchSocketConnect}(Wt);wi=function(e){r(SwitchSlotCreate,e);function SwitchSlotCreate(){return SwitchSlotCreate.__super__.constructor.apply(this,arguments)}SwitchSlotCreate.prototype.slotSwitched=function(e){return zi("fsm").next(Nt,e)};SwitchSlotCreate.prototype.enter=function(){this.timer=setTimeout(function(){return zi("fsm").event("timerFired")},vi.timeout_connect);return zi("slot")["switch"]()};return SwitchSlotCreate}(zt);at=function(e){r(PreviewState,e);function PreviewState(){return PreviewState.__super__.constructor.apply(this,arguments)}PreviewState.prototype.enter=function(){};PreviewState.prototype.close=function(){var e;return(e=Ni())!=null?e.stop():void 0};PreviewState.prototype.closeButton=function(){var e;return(e=Ni())!=null?e.stop():void 0};PreviewState.prototype.minimizeButton=function(){return zi("popup").hide()};PreviewState.prototype.submitButton=function(){var e;return(e=Ni())!=null?e.cycleView():void 0};PreviewState.prototype.select=function(){var e;return(e=Ni())!=null?e.cycleView():void 0};PreviewState.prototype.leave=function(e){var t,i;t=zi("config");if((i=Ni())!=null){i.setButton(t)}zi("popup").setConfig(t).setupTheme();return e()};return PreviewState}(vi);return t.exports={FSM:_e,State:vi,Init:Me,Start:_i,CheckScriptPosition:oe,ConfigSetup:ce,FontLoader:Se,SessionSetup:ti,NoStateCheck:De,ResetState:Ft,WidgetVerify:Ii,Setup:ii,CustomCSS:pe,BlockedCheck:a,CheckMobileDevice:Y,LoadLib:je,RemoteControlCheck:Rt,RemoteApiMode:jt,Blocked:i,ButtonCheck:l,ButtonChange:u,ButtonShow:m,ButtonHidden:f,WidgetInsert:Fi,ButtonHiddenWidgetInsert:h,ButtonEventSetup:c,ButtonInsert:d,SetupTheme:ni,SetupError:ri,UserlikeReady:Mi,RestoreState:Gt,Idle:Te,NoCookies:Ve,PageUnloading:Ke,Offline:ze,ProactiveTimer:xt,ProactiveSlotCheck:mt,ProactiveSlotUnavailable:wt,ProactiveSlotAvailable:dt,ProactiveEventSetup:ut,ProactiveOffer:lt,ProactiveSlotOfferPassiveStart:vt,ProactiveSlotOfferPassive:kt,ProactiveSlotRejected:yt,ProactiveSlotReject:bt,ProactivePassiveSocketConnect:ht,ProactivePassiveSlotCreate:ct,ProactivePassiveSlotVerify:ft,ProactivePassiveSlotStart:pt,FacebookLoader:ve,TwitterLoader:Ti,EventSetup:ge,CheckDisclaimer:Q,CheckPreChatFirst:te,CheckPreChatSecond:re,CheckPreChatThird:ne,CheckSlotAvailable:se,CheckPreChatLast:ie,PassiveConnectAvailableCheck:Ye,DisclaimerAvailableCheck:he,Disclaimer:fe,RegisterAvailableCheck:Bt,PreSurveyAvailableCheck:ot,GroupSelectAvailableCheck:Be,Warning:ji,NoCookiesMessage:qe,ErrorMessage:me,ExpiredWarning:ke,OfflineMessage:Ue,OfflineMessageForm:We,OfflineMessageFeedback:Ne,OfflineMessageSend:Ge,OfflineMessageDone:Le,OfflineMessageScreenshot:He,OfflineMessageSent:Je,RegisterOptions:Mt,GroupSelect:Pe,RegisterForm:Ot,RegisterFacebookLogin:Tt,RegisterFacebookApiMe:At,PreSurveyForm:st,PassiveConnectStart:it,PassiveConnectOffer:Xe,PassiveConnectSocketConnect:tt,PassiveConnectSlotCreate:$e,PassiveConnectSlotVerify:et,PassiveConnectSlotStart:Ze,SocketConnect:gi,SlotCreate:si,SlotVerify:hi,SlotErrorDisconnect:ai,SlotErrorHandle:ui,ChatUserQuit:W,ChatUserQuitDisconnect:H,CheckTranscriptForm:ae,TranscriptForm:Pi,TranscriptSend:Bi,CheckPostChatFirst:X,CheckPostChatSecond:Z,CheckPostChatThird:ee,CheckPostChatLast:$,ChatFeedbackRatingComposite:O,SocialComposite:di,PostSurveyForm:nt,ChatQuit:V,ChatWaitQuit:J,ChatSendQuit:N,ChatQuitWaitDisconnect:D,ChatQuitWait:q,ChatMinimizedQuitWaitDisconnect:R,ChatMinimizedQuitWait:j,SlotStart:li,Chat:g,ChatMinimized:E,ChatInactive:M,ChatBlocked:k,ChatReconnectingIntermediate:U,ChatReconnecting:z,SlotSwitchDisconnect:pi,SlotSwitch:ci,SlotSwitchIdle:fi,ChatReopen:L,ServerHibernate:Xt,ServerHibernateWakeup:$t,ServerHibernateWakeupSlotVerify:Zt,ChatOperatorDisconnect:I,ChatOffline:F,RestartSlot:Dt,RestartFacebookLoader:qt,RestartTwitterLoader:Ht,RestartEventSetup:Vt,RestartSocketConnect:Wt,RestartSlotCreate:zt,RestartSlotVerify:Nt,RestartSlotPlayback:Ut,RestartSlotStart:Lt,SwitchSocketConnect:xi,SwitchSlotCreate:wi,PreviewState:at,CheckUserlikeObject:ue,RestartCheckUserlikeObject:It}})()},{"./buttons/button_factory.coffee":6,"./config.coffee":8,"./feedback_and_rating.coffee":10,"./font.coffee":11,"./global.coffee":13,"./goal.coffee":14,"./popup.coffee":17,"./push.coffee":21,"./router.coffee":22,"./screenshot.coffee":23,"./session.coffee":24,"./slot.coffee":25,"./survey.coffee":26,"./tracking.coffee":27,"./utils/jq.coffee":31,"./utils/loader.coffee":32,"./utils/message_parser.coffee":33,"./utils/sound.coffee":34,"./utils/utils.coffee":36,"./utils/validator.coffee":37,"./views/chat.coffee":38,"./views/disclaimer.coffee":39,"./views/facebook.coffee":41,"./views/feedback.coffee":42,"./views/feedback_rating_composite.coffee":43,"./views/group_select.coffee":44,"./views/idle.coffee":45,"./views/message.coffee":46,"./views/offline_message.coffee":47,"./views/progress.coffee":48,"./views/rating.coffee":49,"./views/register.coffee":50,"./views/social_composite.coffee":51,"./views/survey.coffee":52,"./views/transcript.coffee":53,"./views/twitter.coffee":54}],13:[function(e,t,i){(function(){var i,r,n,o,s,a,u,l,c,p;if(typeof window.userlike==="undefined"&&window.userlikeConfig!=="undefined"){window.userlike={_config:window.userlikeConfig}}n={CONTEXT:{},jsonp_callbacks:{},userlikeReady:window.userlikeReady||((a=window.userlike._config)!=null?(u=a.options)!=null?u.ready:void 0:void 0),userlikeRemoteReady:window.userlikeRemoteReady||((l=window.userlike._config)!=null?(c=l.options)!=null?c.remoteReady:void 0:void 0),userlike:window.userlike||{},shopifyDoShift:null,messenger:{},is_amd_loader:typeof define==="function"&&define.amd&&typeof e==="function",data:((p=window.userlike._config)!=null?p.custom_data:void 0)||window.userlikeData||{},avoid_globals:false,segment_analytics_enabled:window.userlike.segment_analytics_enabled!=null?window.userlike.segment_analytics_enabled:true,fsm:null,config:null,session:null,popup:null,idle_view:null,progress_view:null,message_view:null,disclaimer_view:null,offline_message_view:null,register_view:null,group_select_view:null,survey_view:null,chat_view:null,transcript_view:null,rating_view:null,feedback_view:null,twitter_view:null,facebook_view:null,feedback_rating_composite_view:null,social_composite_view:null,slot:null,pusher:null,sound:null,goal:null,button:null,tracking:null,tracking_event:null,facebook:false,twitter:false,version_messenger:"1005",is_mobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|UIWebView/i.test(typeof navigator!=="undefined"&&navigator!==null?navigator.userAgent:void 0)};t.exports={get:function(e){if(e==="data"){return window.userlikeData||n["data"]}return n[e]},set:function(e,t){if(e==="data"){return(window.userlikeData||n["data"])[e]=t}return n[e]=t},getData:function(){return window.userlikeData||n["data"]},setData:function(e){if(window.userlikeData!=null){return window.userlikeData=e}else{return n["data"]=e}},setJsonpCallback:function(e,t){return n["CONTEXT"][e]=n["jsonp_callbacks"][e]=t},getJsonpCallback:function(e){return n["jsonp_callbacks"]},getGitVersion:function(){return n.git_version},isMobile:function(){return n.is_mobile}};s=null;try{s=window["localStorage"]}catch(f){r=f}i={setItem:function(e,t){try{s.setItem(e,t);return true}catch(i){r=i;if(this.removeItem(e)){try{s.setItem(e,t);return true}catch(i){r=i}}}return false},getItem:function(e){try{return s.getItem(e)}catch(t){r=t}return null},clear:function(){try{s.clear();return true}catch(e){r=e}return false},removeItem:function(e){try{s.removeItem(e);return true}catch(t){r=t}return false},length:function(){try{return s.length}catch(e){r=e}return 0},key:function(e){try{return s.key(e)}catch(t){r=t}return""}};t.exports.UserlikeLS=i;o=function(){return i!=null?i.getItem("uslk_debug"):void 0};t.exports.isDebugEnabled=o;t.exports._ullog=function(){var e;if(((e=window.__utils__)!=null?e.echo:void 0)&&window.console){__utils__.echo("Client: "+Array.prototype.slice.call(arguments))}try{if(window.console&&o()){return Function.prototype.apply.call(console.log,console,arguments)}}catch(t){}};return t.exports.UL_EMOTICONS=[{image:"emoji_smile.png",equivalents:[":-)",":)"],code:":-)",name:"Smile"},{image:"emoji_wink.png",equivalents:[";-)",";)"],code:";-)",name:"Wink"},{image:"emoji_wink_tongue.png",equivalents:[";-P",";P",";-p",";p"],code:";-P",name:"Wink Tongue"},{image:"emoji_grin.png",equivalents:[":-D",":D"],code:":-D",name:"Grin"},{image:"emoji_blushing.png",equivalents:[":-]",":]",":-`"],code:":-]",name:"Blushing"},{image:"emoji_kiss.png",equivalents:[":-*",":*"],code:":-*",name:"Kiss"},{image:"emoji_cool.png",equivalents:["B-)","B)","8-)","8)"],code:"B-)",name:"Cool"},{image:"emoji_innocent.png",equivalents:["O:-)","O:)","o:-)","o:)","0:-)","0:)"],code:"O:-)",name:"Innocent"},{image:"emoji_tongue.png",equivalents:[":-P",":P",":-p",":p"],code:":-P",name:"Tongue"},{image:"emoji_smirk.png",equivalents:[":->",":>"],code:":->",name:"Smirk"},{image:"emoji_lips_are_sealed.png",equivalents:[":-X",":-x"],code:":-X",name:"Lips Are Sealed"},{image:"emoji_confused.png",equivalents:[":-?",":?"],code:":-?",name:"Confused"},{image:"emoji_embarrassed.png",equivalents:[":-[",":["],code:":-[",name:"Embarrassed"},{image:"emoji_frown.png",equivalents:[":-(",":("],code:":-(",name:"Frown"},{image:"emoji_gasp.png",equivalents:[":-o",":o",":-O",":O","=-o","=-O"],code:":-o",name:"Gasp"},{image:"emoji_grimmace.png",equivalents:["X-(","x-(","X(","x("],code:"X-(",name:"Grimmace"},{image:"emoji_mischievous.png",equivalents:[">:-)",">:)"],code:">:-)",name:"Mischievous"},{image:"emoji_oops.png",equivalents:[":-!",":!"],code:":-!",name:"Oops"},{image:"emoji_shouting.png",equivalents:[">:-O",">:O",">:-o",">:o",":-@",":@",">:-@",">:@",">:-V",">:V",":-V",":V"],code:">:-O",name:"Shouting"},{image:"emoji_sleeping.png",equivalents:["|-)","I-)","I-|","|-|","|-*","|-*","|-.","|-."],code:"|-)",name:"Sleeping"},{image:"emoji_straight_faced.png",equivalents:[":-|",":|",":-I",":I"],code:":-|",name:"Straight Faced"},{image:"emoji_undecided.png",equivalents:[":-U",":U"],code:":-U",name:"Undecided"},{image:"emoji_evil.png",equivalents:[">:-D",">:D"],code:">:-D",name:"Evil"},{image:"emoji_angry.png",equivalents:[">:-(",">:("],code:">:-(",name:"Angry"}]})()},{}],14:[function(e,t,i){(function(){var i,r,n;n=e("./global.coffee").get;r=e("./global.coffee")._ullog;i=function(){function WidgetGoal(){}WidgetGoal.prototype.check=function(){var e,t,i,o,s,a,u,l;e=n("config");u=n("session");if(!e.goals.length){return r("WidgetGoal::check no goals")}else{o=e.goals;a=[];for(t=0,i=o.length;t<i;t++){l=o[t];r("WidgetGoal::check "+l.url+" == "+document.location.href);if(((s=document.location.href)!=null?s.indexOf(l.url):void 0)>-1){r("WidgetGoal::check match "+l.url);if(u.get("uuid")&&!u.getGoal(l.key)){u.setGoal(l.key);u.set("goal",l.name);this.send(l);n("fsm").event("goalReached")}break}else{a.push(void 0)}}return a}};WidgetGoal.prototype.send=function(e){var t,i,o,s;t=n("config");o=n("session");s="//api.userlike.com/api/client/goal/";s+="?chat_meta_id="+encodeURIComponent(o.get("chat_meta_id"));s+="&customer_id="+encodeURIComponent(t.customer_id);s+="&goal_key="+encodeURIComponent(e.key);s+="&_="+ +new Date;r("WidgetGoal::send "+s);i=document.createElement("img");i.setAttribute("src",s);i.setAttribute("width",1);i.setAttribute("height",1);i.style="width: 1px!important; height: 1px!important;";i.className="userlike-tracking-img";return document.body.appendChild(i)};return WidgetGoal}();return t.exports.WidgetGoal=i})()},{"./global.coffee":13}],15:[function(e,t,i){var r=function(e,t){return function(){return e.apply(t,arguments)}},n=function(e,t){for(var i in t){if(o.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e},o={}.hasOwnProperty;(function(){var i,o,s,a,u,l,c,p,f;f=e("./global.coffee").get;p=e("./global.coffee")._ullog;c=e("./utils/jq.coffee")._jq;s=function(){function KeyHandlerFactory(){}KeyHandlerFactory.prototype.get=function(e,t){var r;r=f("config");if(!r.data_privacy&&r.live_preview){return new u(e,t)}else{return new i(e,t)}};return KeyHandlerFactory}();a=function(){function KeyHandlerFactoryAndroid(){}KeyHandlerFactoryAndroid.prototype.get=function(e,t){var i;i=f("config");if(!i.data_privacy&&i.live_preview){return new l(e,t)}else{return new o(e,t)}};return KeyHandlerFactoryAndroid}();i=function(){KeyHandler.PAUSED="Paused";KeyHandler.COMPOSING="Composing";KeyHandler.ACTIVE="Active";KeyHandler.CHAT_STATE_INTERVAL=5e3;KeyHandler.PREVIEW_INTERVAL=500;KeyHandler.fsm=null;KeyHandler.$input=null;KeyHandler.chat_state_timer=null;KeyHandler.chat_state_last_input="";KeyHandler.chat_state_last_length="";KeyHandler.prototype.key_action_event_name="keypress";function KeyHandler(e,t){this.$input=e;this.fsm=t;this.handler=r(this.handler,this);this.chatStateTimer=r(this.chatStateTimer,this);this.chat_state=KeyHandler.PAUSED;this.$input.off().on(this.key_action_event_name,this.handler);this.$input.blur(function(e){return function(){return e.changeChatState(KeyHandler.PAUSED)}}(this));this.$input.focus(function(e){return function(){return e.changeChatState(KeyHandler.ACTIVE)}}(this))}KeyHandler.prototype.chatStateTimer=function(){if(this.chat_state===KeyHandler.COMPOSING&&this.$input.val().length===this.chat_state_last_length){return this.changeChatState(KeyHandler.PAUSED)}else if(this.chat_state===KeyHandler.COMPOSING){this.chat_state_last_length=this.$input.val().length;clearTimeout(this.chat_state_timer);return this.chat_state_timer=setTimeout(this.chatStateTimer,KeyHandler.CHAT_STATE_INTERVAL)}};KeyHandler.prototype.changeChatState=function(e){this.chat_state_last_input=this.chat_state;this.chat_state=e;if(this.chat_state!==this.chat_state_last_input){p("KeyHandler changeChatState name="+this.chat_state);return this.fsm.event("state"+this.chat_state)}};KeyHandler.prototype.clearTimer=function(){clearTimeout(this.chat_state_timer);return this.chat_state_timer=null};KeyHandler.prototype.handler=function(e){var t;e=c.event(e);t=e.which;if(t===13&&e.shiftKey){}else if(t===13){this.changeChatState(KeyHandler.PAUSED);f("fsm").event("inputEnter");this.clearTimer();c.event(e).preventDefault()}else{this.changeChatState(KeyHandler.COMPOSING);clearTimeout(this.chat_state_timer);return this.timer=setTimeout(this.chatStateTimer,KeyHandler.CHAT_STATE_INTERVAL)}};return KeyHandler}();o=function(e){n(KeyHandlerAndroid,e);function KeyHandlerAndroid(){this.handler=r(this.handler,this);this.livePreviewTimer=r(this.livePreviewTimer,this);return KeyHandlerAndroid.__super__.constructor.apply(this,arguments)}KeyHandlerAndroid.prototype.livePreviewTimer=function(){var e;e=this.$input.val();if(e!==this.live_preview_last_input&&e.indexOf(f("config").default_textarea)===-1){p("KeyHandlerPreview livePreviewTimer send event livePreview val="+this.$input.val());this.live_preview_last_input=e}clearTimeout(this.live_preview_timer);this.live_preview_timer=null;return this.live_preview_timer=setTimeout(this.livePreviewTimer,i.PREVIEW_INTERVAL)};KeyHandlerAndroid.prototype.handler=function(e){KeyHandlerAndroid.__super__.handler.call(this,e);return this.live_preview_timer=this.live_preview_timer||setTimeout(this.livePreviewTimer,i.PREVIEW_INTERVAL)};return KeyHandlerAndroid}(i);u=function(e){n(KeyHandlerLivePreview,e);function KeyHandlerLivePreview(){this.handler=r(this.handler,this);this.livePreviewTimer=r(this.livePreviewTimer,this);return KeyHandlerLivePreview.__super__.constructor.apply(this,arguments)}KeyHandlerLivePreview.prototype.clearTimer=function(){KeyHandlerLivePreview.__super__.clearTimer.call(this);clearTimeout(this.live_preview_timer);this.live_preview_timer=null;return this.live_preview_last_input=""};KeyHandlerLivePreview.prototype.livePreviewTimer=function(){var e;e=this.$input.val();if(e!==this.live_preview_last_input&&e.indexOf(f("config").default_textarea)===-1){p("KeyHandlerPreview livePreviewTimer send event livePreview val="+this.$input.val());this.live_preview_last_input=e;this.fsm.event("livePreview",e)}clearTimeout(this.live_preview_timer);this.live_preview_timer=null;return this.live_preview_timer=setTimeout(this.livePreviewTimer,i.PREVIEW_INTERVAL)};KeyHandlerLivePreview.prototype.handler=function(e){KeyHandlerLivePreview.__super__.handler.call(this,e);return this.live_preview_timer=this.live_preview_timer||setTimeout(this.livePreviewTimer,i.PREVIEW_INTERVAL)};return KeyHandlerLivePreview}(i);l=function(e){n(KeyHandlerLivePreviewAndroid,e);function KeyHandlerLivePreviewAndroid(){this.handler=r(this.handler,this);this.livePreviewTimer=r(this.livePreviewTimer,this);return KeyHandlerLivePreviewAndroid.__super__.constructor.apply(this,arguments)}KeyHandlerLivePreviewAndroid.prototype.clearTimer=function(){KeyHandlerLivePreviewAndroid.__super__.clearTimer.call(this);clearTimeout(this.live_preview_timer);this.live_preview_timer=null;return this.live_preview_last_input=""};KeyHandlerLivePreviewAndroid.prototype.livePreviewTimer=function(){var e;e=this.$input.val();if(e!==this.live_preview_last_input&&e.indexOf(f("config").default_textarea)===-1){p("KeyHandlerPreview livePreviewTimer send event livePreview val="+this.$input.val());this.live_preview_last_input=e;this.fsm.event("livePreview",e)}clearTimeout(this.live_preview_timer);this.live_preview_timer=null;return this.live_preview_timer=setTimeout(this.livePreviewTimer,i.PREVIEW_INTERVAL)};KeyHandlerLivePreviewAndroid.prototype.handler=function(e){KeyHandlerLivePreviewAndroid.__super__.handler.call(this,e);return this.live_preview_timer=this.live_preview_timer||setTimeout(this.livePreviewTimer,i.PREVIEW_INTERVAL)};return KeyHandlerLivePreviewAndroid}(o);t.exports.KeyHandlerFactory=s;t.exports.KeyHandlerFactoryAndroid=a;t.exports.KeyHandler=i;t.exports.KeyHandlerAndroid=o;t.exports.KeyHandlerLivePreview=u;return t.exports.KeyHandlerLivePreviewAndroid=u})()},{"./global.coffee":13,"./utils/jq.coffee":31}],16:[function(e,t,i){t.exports.userlike_html='<!--[if IE 8]><div id="userlike" class="lt-ie9"><![endif]-->\n<!--[if gt IE 8]><!--><div id="userlike"><!--<![endif]-->\n    <div id="userlike-popup" class="userlike-theme-bg userlike-theme-window-bg-color" style="display:none">\n\n        <div id="userlike-headerbar" class="userlike-drag userlike-theme-bg userlike-theme-headbar-bg-color">\n            <div id="userlike-headerbar-headline" class="userlike-theme-text userlike-theme-headbar-text-color"></div>\n            <i id="userlike-minimize" class="userlike-symbol userlike-symbol-minimize userlike-theme-text userlike-theme-headbar-text-color"></i>\n            <i id="userlike-close" class="userlike-symbol userlike-symbol-close userlike-theme-text userlike-theme-headbar-text-color"></i>\n        </div>\n\n        <div id="userlike-view-container">\n            <div id="userlike-idle" style="display:none"></div>\n            <div id="userlike-progress" style="display:none">\n                <img src="//dq4irj27fs462.cloudfront.net/images/spinner.gif" alt="loading" id="userlike-spinner-gif" style="display:none">\n                <div id="userlike-spinner">\n                  <div id="userlike-bounce-1" class="userlike-theme-bg userlike-theme-symbol-active-color"></div>\n                  <div id="userlike-bounce-2" class="userlike-theme-bg userlike-theme-symbol-active-color"></div>\n                  <div id="userlike-bounce-3" class="userlike-theme-bg userlike-theme-symbol-active-color"></div>\n                </div>\n            </div>\n\n            <div id="userlike-disclaimer" style="display:none">\n                <div class="userlike-headline userlike-theme-text userlike-theme-headline-text-color" id="userlike-disclaimer-headline"></div>\n                \n                \n                <div id="userlike-disclaimer-text-container">\n                    <div id="userlike-disclaimer-text" class="userlike-theme-text userlike-theme-text-default-color"></div>\n                    <div id="userlike-disclaimer-text-bottom-fadeout" class="userlike-theme-gradient userlike-theme-window-bg-color"></div>\n                </div>\n                <div id="userlike-disclaimer-submit">\n                    <i class="userlike-symbol userlike-symbol-check userlike-theme-text userlike-theme-symbol-default-color userlike-symbol-has-active-state"></i>\n                </div>\n            </div>\n\n            <div id="userlike-message" style="display:none">\n                <div id="userlike-message-headline" class="userlike-headline userlike-theme-text userlike-theme-headline-text-color" ></div>\n            </div>\n\n            <div id="userlike-group-select" style="display:none">\n                <div class="userlike-headline userlike-theme-text userlike-theme-headline-text-color" id="userlike-group-select-headline"></div>\n                <div class="userlike-fieldset-wrapper">\n                    <div class="userlike-radio-wrapper" data-select="1">\n                        <input type="radio">\n                        <img src="" alt="" class="userlike-group-select-operator-image">\n                        <div class="userlike-label userlike-theme-text userlike-theme-text-default-color"></div>\n                    </div>\n                    <div class="userlike-radio-wrapper" data-select="2">\n                        <input type="radio">\n                        <img src="" alt="" class="userlike-group-select-operator-image">\n                        <div class="userlike-label userlike-theme-text userlike-theme-text-default-color"></div>\n                    </div>\n                    <div class="userlike-radio-wrapper" data-select="3">\n                        <input type="radio">\n                        <img src="" alt="" class="userlike-group-select-operator-image">\n                        <div class="userlike-label userlike-theme-text userlike-theme-text-default-color"></div>\n                    </div>\n                    <div class="userlike-radio-wrapper" data-select="4">\n                        <input type="radio">\n                        <img src="" alt="" class="userlike-group-select-operator-image">\n                        <div class="userlike-label userlike-theme-text userlike-theme-text-default-color"></div>\n                    </div>\n                    <div class="userlike-radio-wrapper" data-select="5">\n                        <input type="radio">\n                        <img src="" alt="" class="userlike-group-select-operator-image">\n                        <div class="userlike-label userlike-theme-text userlike-theme-text-default-color"></div>\n                    </div>\n                    <div class="userlike-radio-wrapper" data-select="6">\n                        <input type="radio">\n                        <img src="" alt="" class="userlike-group-select-operator-image">\n                        <div class="userlike-label userlike-theme-text userlike-theme-text-default-color"></div>\n                    </div>\n                </div>\n            </div>\n           \n            <div id="userlike-feedback-rating-composite">\n                <div id="userlike-rating" style="display:none">\n                    <div class="userlike-headline userlike-theme-text userlike-theme-headline-text-color" id="userlike-rating-headline"></div>\n                    <div id="userlike-star-rating">\n                        <span>\n                            <i data-rating="1" class="userlike-symbol userlike-symbol-rating-inactive userlike-theme-text userlike-theme-symbol-default-color userlike-rating"></i>\n                        </span>\n                        <span>\n                            <i data-rating="2" class="userlike-symbol userlike-symbol-rating-inactive userlike-theme-text userlike-theme-symbol-default-color userlike-rating"></i>\n                        </span>\n                        <span>\n                            <i data-rating="3" class="userlike-symbol userlike-symbol-rating-inactive userlike-theme-text userlike-theme-symbol-default-color userlike-rating"></i>\n                        </span>\n                        <span>\n                            <i data-rating="4" class="userlike-symbol userlike-symbol-rating-inactive userlike-theme-text userlike-theme-symbol-default-color userlike-rating"></i>\n                        </span>\n                        <span>\n                            <i data-rating="5" class="userlike-symbol userlike-symbol-rating-inactive userlike-theme-text userlike-theme-symbol-default-color userlike-rating"></i>\n                        </span>\n                   </div>\n                </div>\n                <div id="userlike-feedback" style="display:none">\n                    <form id="userlike-feedback-form" onsubmit="return false;">\n                        <textarea id="userlike-feedback-textarea" class="userlike-theme-text userlike-theme-input-default-text-color"></textarea>\n                    </form>\n                   <i id="userlike-feedback-submit" class="userlike-symbol userlike-symbol-send userlike-theme-text userlike-theme-symbol-default-color userlike-symbol-has-active-state userlike-disabled"></i>\n                </div>\n            </div>\n            \n            <div id="userlike-survey" style="display:none">\n                <div class="userlike-headline userlike-theme-text userlike-theme-headline-text-color" id="userlike-survey-headline"></div>\n                <div class="userlike-fieldset-wrapper">\n                    <div class="userlike-radio-wrapper" data-select="1">\n                        <input type="radio">\n                        <div class="userlike-label userlike-theme-text userlike-theme-text-default-color"></div>\n                    </div>\n                    <div class="userlike-radio-wrapper" data-select="2">\n                        <input type="radio">\n                        <div class="userlike-label userlike-theme-text userlike-theme-text-default-color"></div>\n                    </div>\n                    <div class="userlike-radio-wrapper" data-select="3">\n                        <input type="radio">\n                        <div class="userlike-label userlike-theme-text userlike-theme-text-default-color"></div>\n                    </div>\n                    <div class="userlike-radio-wrapper" data-select="4">\n                        <input type="radio">\n                        <div class="userlike-label userlike-theme-text userlike-theme-text-default-color"></div>\n                    </div>\n                </div>\n            </div>\n\n            <div id="userlike-social-composite">\n                <div id="userlike-facebook-like" style="display:none">\n                    <div class="userlike-headline userlike-theme-text userlike-theme-headline-text-color" id="userlike-facebook-like-headline"></div>\n                    <div id="userlike-facebook-like-wrapper"></div>\n                </div>\n                <div id="userlike-twitter-tweet" style="display:none">\n                    <div class="userlike-headline userlike-theme-text userlike-theme-headline-text-color" id="userlike-twitter-tweet-headline"></div>\n                    <div id="userlike-twitter-tweet-wrapper">\n                    </div>\n                </div>\n            </div>\n\n            <div id="userlike-offline-message" style="display:none">\n                <div class="userlike-headline userlike-theme-text userlike-theme-headline-text-color" id="userlike-offline-message-headline"></div>\n                <div id="userlike-offline-message-text" class="userlike-theme-text userlike-theme-text-default-color"></div>\n                <form id="userlike-offline-message-form" onsubmit="return false;">\n                    <input id="userlike-offline-name" type="text">\n                    <input id="userlike-offline-email" type="email">\n                    <textarea id="userlike-offline-textarea"></textarea>\n                    <div id="userlike-screenshot-wrapper">\n                        <input type="checkbox" id="userlike-screenshot-checkbox" class="userlike-theme-text userlike-theme-text-default-color" name="sendScreenshot" value="1">\n                        <div id="userlike-screenshot-label"></div>\n                    </div>\n                    <div id="userlike-offline-message-submit">\n                        <i class="userlike-symbol userlike-symbol-send userlike-theme-text userlike-theme-symbol-default-color userlike-symbol-has-active-state"></i>\n                    </div>\n                </form>\n            </div>\n\n            <div id="userlike-register" style="display:none">\n                <div class="userlike-headline userlike-theme-text userlike-theme-headline-text-color" id="userlike-register-headline"></div>\n                <div id="userlike-register-text" class="userlike-theme-text userlike-theme-text-default-color"></div>\n                <form id="userlike-register-form" onsubmit="return false;">\n                    <input id="userlike-register-name" class="userlike-theme-text userlike-theme-input-default-text-color" type="text">\n                    <input id="userlike-register-email" class="userlike-theme-text userlike-theme-input-default-text-color" type="email">\n                    <input id="userlike-register-additional01" class="userlike-theme-text userlike-theme-input-default-text-color" type="text">\n                    <input id="userlike-register-additional02" class="userlike-theme-text userlike-theme-input-default-text-color" type="text">\n                    <input id="userlike-register-additional03" class="userlike-theme-text userlike-theme-input-default-text-color" type="text">\n                    <div id="userlike-register-submit">\n                        <i class="userlike-symbol userlike-symbol-send userlike-theme-text userlike-theme-symbol-default-color userlike-symbol-has-active-state"></i>\n                    </div>\n                    <div id="userlike-facebook-connect-submit">\n                        <i class="userlike-symbol userlike-symbol-facebook userlike-theme-text userlike-theme-symbol-default-color userlike-symbol-has-active-state"></i>\n                    </div>\n                </form>\n            </div>\n\n            <div id="userlike-transcript" style="display:none">\n                <div class="userlike-headline userlike-theme-text userlike-theme-headline-text-color" id="userlike-transcript-headline"></div>\n                <div id="userlike-transcript-text" class="userlike-theme-text userlike-theme-text-default-color"></div>\n                <form id="userlike-transcript-form" onsubmit="return false;">\n                    <input id="userlike-transcript-email" class="userlike-theme-text userlike-theme-input-default-text-color" type="email">\n                    <div id="userlike-transcript-submit">\n                        <i class="userlike-symbol userlike-symbol-send userlike-theme-text userlike-theme-symbol-default-color userlike-symbol-has-active-state"></i>\n                    </div>\n                </form>\n            </div>\n\n            <div id="userlike-chat" style="display:none">\n                <div id="userlike-chat-subheader" class="userlike-theme-bg uselike-theme-bg-default-color">\n                    <div id="userlike-spinner" class="userlike-operator-connect-spinner">\n                      <div id="userlike-bounce-1" class="userlike-theme-bg userlike-theme-symbol-active-color"></div>\n                      <div id="userlike-bounce-2" class="userlike-theme-bg userlike-theme-symbol-active-color"></div>\n                      <div id="userlike-bounce-3" class="userlike-theme-bg userlike-theme-symbol-active-color"></div>\n                    </div>\n                    <img id="userlike-subheader-operator-image" src="" alt=""></img>\n                    <div id="userlike-subheader-operator-info-text-wrapper">\n                        <span id="userlike-subheader-operator-info-text" class="userlike-theme-text userlike-theme-headbar-bg-color userlike-adjust-text"></span>\n                    </div>\n                </div>\n                \n                <form id="userlike-chat-form" onsubmit="return false;">\n                    <div id="userlike-chat-content">\n                    </div>\n                    <div id="userlike-chat-scroll-textarea">\n                        <textarea id="userlike-chat-textarea" class="userlike-theme-text userlike-theme-text-default-color"></textarea>\n                        <div id="userlike-emoji-button" class="userlike-emoji userlike-emoji-icon_emoticon"></div>\n                    </div>\n                </form>\n            </div>\n        </div>\n\n        <div id="userlike-footerbar">\n            <div id="userlike-data-privacy"><a target="_blank" href="#" class="userlike-theme-text userlike-theme-link-text-color"></a></div>\n            <div id="userlike-poweredby" class="notranslate userlike-theme-text userlike-theme-link-text-color">{{POWEREDBY_SLOGAN}} <a id="userlike-poweredby-link" class="notranslate userlike-theme-text userlike-theme-link-text-color" target="_blank" href="{{POWEREDBY_LINK}}">Userlike</a></div>\n        </div>\n        <img id="userlike-subheader-operator-image-zoomed" src="" alt="" style="display: none;"></img>\n    </div>\n\n    <div id="userlike-eyecatcher">\n        <i id="userlike-eyecatcher-close" class="userlike-symbol userlike-symbol-close userlike-theme-button-bg-color userlike-theme-text"></i>\n        <div id="userlike-eyecatcher-box">\n            <div id="userlike-eyecatcher-mask">\n                <div id="userlike-eyecatcher-picture"></div>\n            </div>\n            <div id="userlike-eyecatcher-message" class="userlike-theme-button-bg-color userlike-theme-text"></div>\n        </div>\n    </div>\n\n    <div id="userlike-hover-text-container" class="userlike-theme-button-bg-color userlike-theme-bg">\n        <span id="userlike-button-hover-text" class="userlike-theme-text userlike-theme-button-text-color"></span>\n        <div id="userlike-hover-text-arrow"></div>\n    </div>\n\n    <a href="javascript:void(0);" onkeypress="javascript:return false;" id="userlike-tab" class="userlike-theme-button-bg-color userlike-theme-bg" style="">\n        <div id="userlike-button-symbol">\n            <div id="userlike-spinner" class="userlike-button-spinner">\n              <div id="userlike-bounce-1" class="userlike-theme-bg userlike-theme-button-symbol-color"></div>\n              <div id="userlike-bounce-2" class="userlike-theme-bg userlike-theme-button-symbol-color"></div>\n              <div id="userlike-bounce-3" class="userlike-theme-bg userlike-theme-button-symbol-color"></div>\n            </div>\n            <i class="userlike-symbol userlike-theme-text userlike-theme-button-symbol-color"></i>\n        </div>\n        <span id="userlike-button-text" class="userlike-theme-text userlike-theme-button-text-color"></span>\n        <div id="userlike-message-badge" class="userlike-theme-bg userlike-theme-window-bg-color">\n            <div id="userlike-message-badge-count" class="userlike-theme-text userlike-theme-headbar-bg-color"></div>\n        </div>\n    </a>\n</div>\n';
t.exports.userlike_css='p#userlike,.userlike { position: static; z-index: 2147483640; overflow: hidden; width: auto; min-width: 0; height: auto; min-height: 0; margin: 0; padding: 0;}#userlike *{ font-family: \'{{FONT}}\', sans-serif; font-size: 13px; font-weight: 400; font-style: normal; font-variant: normal; line-height: 1.5; position: static; top: auto; right: auto; bottom: auto; left: auto; float: none; clear: none; overflow: hidden; width: auto; min-width: 0; height: auto; min-height: 0; margin: 0; padding: 0; cursor: auto; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; text-align: left; white-space: normal; text-decoration: none; text-indent: 0; letter-spacing: normal; word-spacing: normal; text-transform: none; opacity: 1; color: #4b4d4f; border: none; -webkit-border-radius: 0; -moz-border-radius: 0; border-radius: 0; outline-style: none; background: none; -webkit-box-shadow: none; -moz-box-shadow: none; box-shadow: none; text-shadow: none; direction: ltr; unicode-bidi: normal; -moz-text-size-adjust: 100%; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; -webkit-touch-callout: none; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; -ms-border-radius: 0;}a#userlike-tab { line-height: 1; position: fixed; z-index: 2147483640; float: none; clear: none; overflow: hidden; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; width: auto; min-width: 240px; height: 48px; min-height: 0; max-height: 0; margin: 0; margin-bottom: -8px; padding: 0; padding-right: 32px; padding-bottom: 0; padding-left: 32px; cursor: pointer; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; text-align: left; white-space: nowrap; text-decoration: none; text-indent: 0; letter-spacing: normal; word-spacing: normal; text-transform: none; text-overflow: ellipsis; opacity: 1; color: #fff; border: none; border-radius: 0; outline-style: none; background: none; -webkit-box-shadow: 0 -5px 30px 0 rgba(0, 0, 0, .1); -moz-box-shadow: 0 -5px 30px 0 rgba(0, 0, 0, .1); box-shadow: 0 -5px 30px 0 rgba(0, 0, 0, .1); text-shadow: none; unicode-bidi: normal; transform: translatez(1px); -webkit-transform: translatez(1px); -moz-text-size-adjust: 100%; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; -webkit-touch-callout: none; -webkit-tap-highlight-color:rgba(0,0,0,0); -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale;}a#userlike-tab #userlike-message-bubble { display: none;}a#userlike-tab.userlike-button-01,a#userlike-tab.userlike-button-02 { padding-left: 28px;}a#userlike-tab.userlike-button-03 { padding-left: 26px;}a#userlike-tab.userlike-button-04 { padding-left: 25px;}a#userlike-tab.userlike-button-offline-01,a#userlike-tab.userlike-button-05,a#userlike-tab.userlike-button-06 { padding-left: 23px;}a#userlike-tab.userlike-button-offline-02{ padding-left: 24px;}a#userlike-tab.userlike-button-offline-03{ padding-left: 29px;}a#userlike-tab.userlike-button-bubble.userlike-button-01 .userlike-symbol{ padding-top: 1px;}a#userlike-tab.userlike-button-bubble.userlike-button-02 .userlike-symbol{ padding-left: 4px;}a#userlike-tab.userlike-button-bubble.userlike-button-03 .userlike-symbol{ padding-top: 2px;}a#userlike-tab.userlike-button-bubble.userlike-button-04 .userlike-symbol{ padding-top: 3px; padding-left: 2px;}a#userlike-tab.userlike-button-bubble.userlike-button-05 .userlike-symbol{ padding-top: 3px; padding-left: 2px;}a#userlike-tab.userlike-button-bubble.userlike-button-06 .userlike-symbol{ padding-top: 2px; padding-left: 2px;}a#userlike-tab.userlike-button-bubble.userlike-button-offline-01 .userlike-symbol{ padding-top: 1px;}a#userlike-tab.userlike-button-bubble.userlike-button-offline-02 .userlike-symbol{ padding-top: 3px; padding-left: 3px;}a#userlike-tab.userlike-button-bubble.userlike-button-offline-03 .userlike-symbol{ padding-top: 3px; padding-right: 3px;}#userlike a#userlike-tab.userlike-button-big { overflow: visible;}#userlike.userlike-mobile a#userlike-tab,#userlike a#userlike-tab.userlike-button-bubble { bottom: -100px; width: 64px; min-width: 64px; max-width: 64px; height: 64px; min-height: 64px; max-height: 64px; padding: 0; border-radius: 50%; overflow: visible;}#userlike.userlike-mobile a#userlike-tab.userlike-button-bubble.userlike-button-05 .userlike-symbol{ padding-top: 3px; padding-left: 4px;}#userlike.userlike-mobile a#userlike-tab.userlike-button-bubble.userlike-button-offline-01 .userlike-symbol{ padding-top: 1px; padding-right: 0px;}#userlike.userlike-mobile a#userlike-tab.userlike-button-bubble.userlike-button-offline-02 .userlike-symbol{ padding-top: 3px; padding-right: 0px;}#userlike.userlike-mobile a#userlike-tab.userlike-button-bubble.userlike-button-offline-03 .userlike-symbol{ padding-top: 3px; padding-right: 3px;}#userlike.userlike-mobile a#userlike-tab.userlike-slideup,#userlike a#userlike-tab.userlike-button-bubble.userlike-slideup{ bottom: 16px; -webkit-transition: bottom .5s ease-in-out; -moz-transition: bottom .5s ease-in-out; -o-transition: bottom .5s ease-in-out; transition: bottom .5s ease-in-out;}#userlike a#userlike-tab.userlike-button-bubble > #userlike-message-badge { position: absolute; top: -2px; right: -1px; display: none; width: 20px; height: 20px; border-radius: 50%; box-shadow: 0 9px 20px 0 rgba(0,0,0,0.25);}#userlike a#userlike-tab.userlike-button-big > #userlike-message-badge { position: absolute; top: -5px; right: -5px; display: none; width: 20px; height: 20px; border-radius: 50%; box-shadow: 0 9px 20px 0 rgba(0,0,0,0.25);}#userlike a#userlike-tab #userlike-message-badge.userlike-show { display: block;}#userlike a#userlike-tab #userlike-message-badge #userlike-message-badge-count { text-align: center;}#userlike.userlike-mobile #userlike-button-symbol,#userlike a#userlike-tab.userlike-button-bubble #userlike-button-symbol { width: 63px; height: 43px; margin-top: 9px !important; text-align: center;}#userlike.userlike-mobile #userlike-button-symbol #userlike-spinner,#userlike a#userlike-tab.userlike-button-bubble #userlike-button-symbol #userlike-spinner{ margin-left: 13px; margin-top: 15px;}a#userlike-tab #userlike-button-text,#userlike #userlike-button-hover-text{ font-size: 14px !important; display: inline-block!important; position: relative !important; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; -webkit-user-select: none; -moz-user-select: noe; -ms-user-select: none; user-select: none; text-align: left; vertical-align: top !important; text-decoration: none; text-indent: 0; word-spacing: normal; text-transform: none; opacity: 1; outline-style: none; text-shadow: none; unicode-bidi: normal; -moz-text-size-adjust: 100%; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; -webkit-touch-callout: none; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; cursor: pointer;}#userlike .userlike-button-bubble #userlike-button-text { display: none!important;}a#userlike-tab #userlike-button-text { top: 8px !important; padding-left: 10px !important; font-weight: 700;}#userlike #userlike-button-hover-text { padding-top: 13px; cursor: unset; font-weight: 600;}#userlike.userlike-mobile a#userlike-tab #userlike-button-text { display: none !important;}a#userlike-tab.userlike-slideup { max-height: 48px; margin-bottom: 0; padding-top: 8px; -webkit-transition: max-height .5s ease-in-out; -moz-transition: max-height .5s ease-in-out; -o-transition: max-height .5s ease-in-out; transition: max-height .5s ease-in-out;}a#userlike-tab.userlike-slidedown { top: 0 !important; max-height: 48px; -webkit-transition: top .5s ease-in-out; -moz-transition: top .5s ease-in-out; -o-transition: top .5s ease-in-out; transition: top .5s ease-in-out;}a#userlike-tab.userlike-left,a#userlike-tab.userlike-right { bottom: 0; -webkit-border-top-left-radius: 3px; border-top-left-radius: 3px; -webkit-border-top-right-radius: 3px; border-top-right-radius: 3px; -moz-border-top-left-radius: 3px; -moz-border-top-right-radius: 3px;}a#userlike-tab.userlike-left { left: 40px;}a#userlike-tab.userlike-right { right: 40px;}body.userlike-disable-body-scroll{ position: fixed; overflow: hidden;}#userlike.userlike-mobile a#userlike-tab.userlike-left { left: 16px;}#userlike.userlike-mobile a#userlike-tab.userlike-right { right: 16px;}#userlike-button-symbol { position: relative !important; display: inline-block !important; width: 43px; height: 43px; margin-top: -3px !important;}#userlike-button-symbol i.userlike-symbol { font-size: 43px; cursor: pointer;}#userlike-button-symbol .userlike-button-spinner{ display: none; width: 40px !important; margin-top: 13px;}#userlike-button-symbol .userlike-button-spinner > div{ width: 10px !important; height: 10px !important;}#userlike-eyecatcher,#userlike-eyecatcher-box,#userlike-eyecatcher-mask,#userlike-eyecatcher-message { display: none; transform: translatez(1px); -webkit-transform: translatez(1px);}#userlike.userlike-mobile #userlike-eyecatcher,#userlike.lt-ie9 #userlike-eyecatcher { display: none !important;}#userlike #userlike-eyecatcher-close { font-size: 20px !important; position: absolute; z-index: 2147483642; width: 19px !important; height: 19px !important; padding: 0 !important; cursor: pointer; border: none; transform: translatez(2px); -webkit-transform: translatez(2px);}#userlike-hover-text-container,#userlike-eyecatcher { position: fixed; z-index: 2147483640; display: none; float: none; clear: none; overflow: visible !important; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; margin: 0; padding: 0; cursor: pointer; -webkit-transition: opacity .1s ease-in; -moz-transition: opacity .1s ease-in; -ms-transition: opacity .1s ease-in; -o-transition: opacity .1s ease-in; transition: opacity .1s ease-in; text-decoration: none; opacity: 0; border: none; outline-style: none; box-shadow: none; direction: ltr;}#userlike-hover-text-container{ bottom: 24px; height: 48px; padding-left: 32px; padding-right: 32px; min-height: 48px; max-height: 48px; border-radius: 2px; box-shadow: 0 10px 30px 0 rgba(0,0,0,0.15); cursor: unset; text-align: center; pointer-events: none;}#userlike-hover-text-arrow{ position: absolute; width: 0; height: 0; border-style: solid; top: 15px;}#userlike-hover-text-container.userlike-right #userlike-hover-text-arrow{ border-width: 9.5px 0 9.5px 10px; right: -10px;}#userlike-hover-text-container.userlike-left #userlike-hover-text-arrow{ border-width: 9.5px 10px 9.5px 0; left: -10px;}#userlike-eyecatcher { bottom: 56px; width: 242px; min-width: 240px; border-radius: 0; height: 60px; min-height: 60px; max-height: 60px; text-indent: -100000px;}#userlike-eyecatcher *{ cursor: pointer;}#userlike-eyecatcher.fadeIn,#userlike-hover-text-container.fadeIn{ opacity: 1 !important;}#userlike #userlike-eyecatcher-close { top: 3px !important; right: 3px !important; display: none !important;}#userlike #userlike-eyecatcher:hover > #userlike-eyecatcher-close { display: block !important;}#userlike-eyecatcher-box { display: block; overflow: visible !important; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; min-width: 240px; height: 60px;}#userlike-eyecatcher.eyecatcher-01 #userlike-eyecatcher-box { width: 242px; height: 60px; -webkit-border-radius: 3px; -moz-border-radius: 3px; border-radius: 3px; background-color: #fff; -webkit-box-shadow: 0 9px 30px 0 rgba(0, 0, 0, .15); -moz-box-shadow: 0 9px 30px 0 rgba(0, 0, 0, .15); box-shadow: 0 9px 30px 0 rgba(0, 0, 0, .15);}#userlike-eyecatcher.eyecatcher-01 #userlike-eyecatcher-message { bottom: 7px;}#userlike-eyecatcher.eyecatcher-02 { bottom: 68px;}#userlike-eyecatcher.eyecatcher-02 #userlike-eyecatcher-box { height: 72px; background-image: url(//dq4irj27fs462.cloudfront.net/images/eyecatcher_02.png); background-repeat: no-repeat; background-size: 100% 100%;}#userlike-eyecatcher.eyecatcher-02 #userlike-eyecatcher-message { bottom: 15px; margin: 0 auto; left: 0; right: 0; width: 73%;}#userlike-eyecatcher.eyecatcher-02 #userlike-eyecatcher-close { top: 8px !important; right: 38px !important;}#userlike-eyecatcher.eyecatcher-03 #userlike-eyecatcher-box { height: 144px; background-image: url(//dq4irj27fs462.cloudfront.net/images/eyecatcher_03.png); background-repeat: no-repeat; background-size: 100% 100%;}#userlike-eyecatcher.eyecatcher-03 #userlike-eyecatcher-close { top: 18px !important; right: 12px !important;}#userlike-eyecatcher.eyecatcher-03 { bottom: 141px;}#userlike-eyecatcher.eyecatcher-03.right { right: 0;}#userlike-eyecatcher.eyecatcher-03.left { left: 100px;}#userlike-eyecatcher.eyecatcher-03 #userlike-eyecatcher-mask { top: 25px; left: 29px; width: 50px; height: 50px; margin: 0; border: none;}#userlike-eyecatcher.eyecatcher-03 #userlike-eyecatcher-box:before { display: none;}#userlike-eyecatcher.eyecatcher-03 #userlike-eyecatcher-picture { width: 50px; height: 50px; background-size: 50px 50px;}#userlike-eyecatcher.eyecatcher-03 #userlike-eyecatcher-message { bottom: 84px; left: 90px; width: 59%; text-align: left;}@media(-webkit-min-device-pixel-ratio:2), (min-resolution:192dppx) { #userlike-eyecatcher.eyecatcher-02 #userlike-eyecatcher-box { background-image: url(//dq4irj27fs462.cloudfront.net/images/eyecatcher_02@2x.png); } #userlike-eyecatcher.eyecatcher-03 #userlike-eyecatcher-box { background-image: url(//dq4irj27fs462.cloudfront.net/images/eyecatcher_03@2x.png); }}#userlike-eyecatcher-box:before { position: absolute; z-index: -1; top: -50px; right: 0; left: 0; display: block; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; width: 80px; height: 80px; margin: auto; content: \'\'; border: 5px solid #fff; -webkit-border-radius: 50%; -moz-border-radius: 50%; border-radius: 50%; background-color: #fff; -webkit-box-shadow: 0 2px 2px 0 rgba(0, 0, 0, .1), 0 0 4px 0 rgba(0, 0, 0, .1); -moz-box-shadow: 0 2px 2px 0 rgba(0, 0, 0, .1), 0 0 4px 0 rgba(0, 0, 0, .1); box-shadow: 0 2px 2px 0 rgba(0, 0, 0, .1), 0 0 4px 0 rgba(0, 0, 0, .1);}#userlike-eyecatcher-mask { position: absolute; top: -48px; right: 0; left: 0; display: block; overflow: hidden; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; width: 74px; height: 74px; margin: auto; border: 5px solid #fff; -webkit-border-radius: 50%; -moz-border-radius: 50%; border-radius: 50%; background-color: #fff;}#userlike-eyecatcher-picture { width: 64px; height: 64px; background-color: #fff; background-size: 64px 64px; border-radius: 50%;}#userlike-eyecatcher-message { font-size: 15px; position: absolute; bottom: 7px; display: block; width: 100%; text-align: center; text-indent: 0; color: #4b4d4f; white-space: nowrap; text-overflow: ellipsis; overflow: hidden;}#userlike-eyecatcher.right { right: 40px;}#userlike-eyecatcher.left { left: 40px;}#userlike a:hover,#userlike a:active { z-index: 2147483642; cursor: pointer; text-decoration: none; outline: 0;}#userlike input { font-size: 100%; line-height: normal; overflow: visible; margin: 0; -webkit-user-select: text; -moz-user-select: text; -ms-user-select: text; user-select: text; vertical-align: middle;}#userlike input[type="checkbox"],#userlike input[type="radio"] { box-sizing: border-box; border: none; padding: 0 !important;}#userlike input::-moz-focus-inner { padding: 0; border: 0;}#userlike form { position: relative; top: 0; right: 0; display: block; margin: 0; padding: 0;}#userlike-popup { position: fixed; z-index: 2147483643; overflow: visible !important; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; width: 416px; height: 216px; margin: 0 !important; padding: 0 0 10px !important; color: #4b4d4f; -webkit-border-radius: 0; -moz-border-radius: 0; border-radius: 0; background: #fff; box-shadow: 0 -5px 50px 0 rgba(0, 0, 0, .2); transform: translatez(1px); -webkit-transform: translatez(1px);}#userlike.userlike-mobile #userlike-popup{ width: 100%;}#userlike #userlike-register,#userlike #userlike-offline-message,#userlike #userlike-survey,#userlike #userlike-disclaimer,#userlike #userlike-group-select,#userlike #userlike-transcript,#userlike #userlike-message,#userlike #userlike-social-composite,#userlike #userlike-feedback-rating-composite { margin: 0 40px;}#userlike.userlike-mobile #userlike-register,#userlike.userlike-mobile #userlike-offline-message,#userlike.userlike-mobile #userlike-survey,#userlike.userlike-mobile #userlike-disclaimer,#userlike.userlike-mobile #userlike-group-select,#userlike.userlike-mobile #userlike-transcript,#userlike.userlike-mobile #userlike-message,#userlike.userlike-mobile #userlike-message,#userlike.userlike-mobile #userlike-feedback-rating-composite { margin: 0 22px;}#userlike #userlike-group-select .userlike-radio-wrapper{ height: 48px; width: 43%; float: left; padding-left: 23px;}#userlike #userlike-group-select input[type="radio"]{ margin: 17px 0 0 -5px !important;}#userlike #userlike-group-select .userlike-label{ padding-top: 15px; padding-left: 19px; overflow: hidden; white-space: nowrap; width: 73%; text-overflow: ellipsis;}#userlike #userlike-group-select .userlike-group-select-operator-image{ position: absolute; top: 0; left: 0; width: 48px!important; height: 48px!important; border-radius: 50%; cursor: pointer;}#userlike.lt-ie9 #userlike-popup { border: 1px solid rgb(211, 212, 213);}#userlike-progress { position: static;}#userlike-progress #userlike-spinner { margin: 60px auto 0;}#userlike.userlike-no-css-animation #userlike-spinner-gif { margin: 40px 180px 0!important;}#userlike.userlike-no-css-animation #userlike-spinner div { display: none;}#userlike.userlike-no-css-animation #userlike-progress #userlike-spinner { width: 40px; height: 40px; background-size: 40px 40px;}#userlike-spinner { position: static; z-index: 2147483642; width: 70px; text-align: center;}#userlike-spinner div { position: static; display: inline-block; width: 18px !important; height: 18px !important; -webkit-animation: bouncedelay 1.4s infinite ease-in-out; -moz-animation: bouncedelay 1.4s infinite ease-in-out; animation: bouncedelay 1.4s infinite ease-in-out; border-radius: 100%; -webkit-animation-fill-mode: both; -moz-animation-fill-mode: both; animation-fill-mode: both;}#userlike-spinnerIframe { position: relative; z-index: 2147483642; top: 50%; width: 100%; height: 100%; text-align: center;}#userlike-spinnerIframe div { position: static; display: inline-block; width: 40px !important; height: 40px !important; -webkit-animation: bouncedelay 1.4s infinite ease-in-out; -moz-animation: bouncedelay 1.4s infinite ease-in-out; animation: bouncedelay 1.4s infinite ease-in-out; border-radius: 100%; background-color: #a9b0b7 !important; -webkit-animation-fill-mode: both; -moz-animation-fill-mode: both; animation-fill-mode: both;}#userlike.lt-ie9 #userlike-spinnerIframe div { position: static; display: inline-block; width: 40px !important; height: 40px !important; border-radius: 100%; background-color: #a9b0b7 !important;}#userlike-bounce-1 { -webkit-animation-delay: -.32s !important; -moz-animation-delay: -.32s !important; animation-delay: -.32s !important;}#userlike-bounce-2 { -webkit-animation-delay: -.16s !important; -moz-animation-delay: -.16s !important; animation-delay: -.16s !important;}@-webkit-keyframes bouncedelay { 0%, 80%, 100% { -webkit-transform: scale(.0); transform: scale(.0); } 40% { -webkit-transform: scale(1.0); transform: scale(1.0); }}@keyframes bouncedelay { 0%, 80%, 100% { transform: scale(.0); } 40% { transform: scale(1.0); }}.uselikeDrag { cursor: auto;}#userlike-dragTop { position: absolute; z-index: 2147483641; top: 0 !important; left: 0 !important; display: block; width: 320px !important; height: 40px !important; margin: 0 !important; cursor: auto;}#userlike #userlike-headerbar { position: absolute !important; top: 0 !important; right: 0 !important; left: 0 !important; height: 56px !important;}#userlike.userlike-chat-textarea-fullscreen #userlike-headerbar { display: none;}#userlike #userlike-headerbar #userlike-headerbar-headline { font-size: 14px !important; font-weight: bold; position: absolute !important; top: 18px !important; left: 40px !important; max-width: 80%; white-space: nowrap; text-overflow: ellipsis;}#userlike.userlike-mobile #userlike-headerbar #userlike-headerbar-headline { left: 22px !important;}#userlike #userlike-footerbar { position: absolute; right: 0; bottom: 0; left: 0; height: 32px;}#userlike.userlike-chat-textarea-fullscreen #userlike-footerbar { display: none;}#userlike-close,#userlike-minimize { position: absolute; z-index: 2147483642; top: 16px; width: 24px !important; height: 24px !important; padding: 0 !important; cursor: pointer; border: none;}#userlike-view-container { position: absolute !important; top: 56px !important; right: 0 !important; bottom: 32px !important; left: 0 !important;}#userlike.userlike-mobile #userlike-view-container { position: fixed !important; overflow-y: scroll !important; overflow-x: hidden !important; width: 100%;}#userlike.userlike-mobile.userlike-chat-textarea-fullscreen #userlike-view-container { top: 0 !important;}#userlike-close { right: 16px;}#userlike-minimize { right: 44px;}.userlike-headline { font-size: 14px !important; font-weight: 700 !important; line-height: 20px !important; z-index: 2147483642; display: block; overflow: hidden; width: 336px !important; height: auto !important; padding: 0 !important; text-overflow: ellipsis;}#userlike.userlike-mobile .userlike-headline { width: auto !important;}#userlike-offline-message-headline,#userlike-register-headline,#userlike-disclaimer-headline,#userlike-transcript-headline,#userlike-group-select-headline,#userlike-survey-headline { position: relative !important; margin-top: 40px !important;}#userlike-offline-message-text,#userlike-register-text,#userlike-transcript-text { font-size: 13px; line-height: 18px; overflow: hidden; min-height: 20px !important; max-height: 40px !important; margin: 16px 0 0 0; text-overflow: ellipsis;}#userlike-disclaimer-text { font-size: 13px !important; line-height: 18px !important; right: 40px !important; bottom: 60px !important; left: 40px !important; overflow-y: auto !important; height: 165px !important; text-overflow: ellipsis !important; margin: 16px 0 0 0;}#userlike-disclaimer-text-bottom-fadeout { position: relative; bottom: 30px; height: 30px;}#userlike-disclaimer-text-top-fadeout { top: 10px;}#userlike.userlike-mobile #userlike-disclaimer-text { left: 22px !important;}#userlike-facebook-like,#userlike-twitter-tweet { position: relative; width: 100% !important; margin: 40px 0 !important; padding-bottom: 16px; text-align: left !important; border-bottom: 1px solid rgba(211, 212, 213, .4);}.lt-ie9 #userlike-facebook-like,.lt-ie9 #userlike-twitter-tweet { border-bottom: 1px solid rgb(211, 212, 213);}#userlike-facebook-like-headline,#userlike-twitter-tweet-headline { display: inline-block; max-width: 50%; text-align: left;}#userlike-facebook-like-wrapper,#userlike-twitter-tweet-wrapper { float: right; max-width: 50% !important;}#userlike #userlike-facebook-like.userlike-break-facebook-line #userlike-facebook-like-wrapper{ max-width: 100% !important; float: left; margin-top: 10px;}#userlike #userlike-facebook-like.userlike-break-facebook-line #userlike-facebook-like-headline{ max-width: 100% !important; width: 100% !important;}#userlike.userlike-mobile #userlike-facebook-like-wrapper { right: 0;}#userlike.ie #userlike-facebook-like-wrapper { display: table; width: 225px; height: 70px; margin: 20px auto;}#userlike-twitter-tweet-wrapper { text-align: right;}#userlike.ie #userlike-twitter-tweet-wrapper { display: table; margin: 20px auto;}#userlike-rating { position: relative; margin-top: 20px;}#userlike-rating-headline { width: auto !important; margin-top: 24px !important; text-align: left !important;}#userlike-message-headline { min-height: 22px !important; margin-top: 30px !important; max-height: 90px !important;}#userlike-chatHeadline { line-height: 20px !important; margin: 12px 10px 0 14px !important;}#userlike-chat-subheader { position: absolute; top: 0; right: 0; left: 0; height: 50px;}#userlike.userlike-chat-textarea-fullscreen #userlike-chat-subheader { display: none !important;}#userlike-chat-subheader #userlike-subheader-operator-image,#userlike-chat-subheader #userlike-spinner.userlike-operator-connect-spinner { position: absolute; left: 40px; width: 32px!important; height: 32px!important;}#userlike #userlike-subheader-operator-image-zoomed{ position: absolute; top: 66px; left: 38px; border-radius: 50%; width: 32px!important; height: 32px!important; -webkit-transition: -webkit-transform 0.6s; transition: -webkit-transform 0.6s; transition: transform 0.6s; transition: transform 0.6s, -webkit-transform 0.6s;}#userlike.userlike-mobile #userlike-subheader-operator-image-zoomed{ left: 16px;}#userlike #userlike-subheader-operator-image-zoomed.userlike-zoom{ box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.41); transform: scale(2.5); -webkit-transform: scale(2.5);}#userlike.userlike-mobile #userlike-subheader-operator-image-zoomed.userlike-zoom{ -webkit-transform: scale(2.5) translateX(7px); transform: scale(2.5) translateX(7px)}#userlike.userlike-mobile.userlike-chat-textarea-fullscreen #userlike-subheader-operator-image-zoomed{ display: none;}#userlike-chat-subheader #userlike-spinner.userlike-operator-connect-spinner { top: 17px;}#userlike.no-css-animation #userlike-spinner.userlike-operator-connect-spinner{ display: none;}#userlike-chat-subheader #userlike-subheader-operator-image { top: 10px; border-radius: 50%;}#userlike.userlike-mobile #userlike-chat-subheader #userlike-subheader-operator-image,#userlike.userlike-mobile #userlike-chat-subheader #userlike-spinner.userlike-operator-connect-spinner{ left: 16px;}#userlike-chat-subheader #userlike-spinner.userlike-operator-connect-spinner div { width: 8px !important; height: 8px !important;}#userlike-chat-subheader #userlike-subheader-operator-info-text-wrapper { position: absolute; top: 17px; left: 88px; height: 20px;}#userlike.userlike-mobile #userlike-chat-subheader #userlike-subheader-operator-info-text-wrapper { left: 64px; max-width: 80%; white-space: nowrap; text-overflow: ellipsis;}#userlike-chat-subheader #userlike-subheader-operator-info-text { font-size: 13px; font-weight: bold;}#userlike-chat-form { position: absolute !important; top: 50px !important; right: 0 !important; bottom: 0 !important; left: 0 !important; display: block !important; margin: 0; padding: 0;}#userlike.userlike-chat-textarea-fullscreen #userlike-chat-form { top: 0 !important;}#userlike #userlike-chatHeadlineContainer { width: 175px !important; height: 16px !important; margin: 12px 10px 0 84px !important;}#userlike #userlike-poweredby { font-size: 11px; position: absolute; z-index: 2147483642; bottom: 10px; left: 40px; display: block; color: rgb(169, 176, 183);}#userlike.userlike-mobile #userlike-poweredby { left: 20px;}#userlike #userlike-poweredby-link { font-size: 11px; text-decoration: underline; color: rgb(169, 176, 183);}#userlike-data-privacy { position: absolute; z-index: 2147483642; right: 15px; bottom: 10px; display: none;}#userlike input[type="checkbox"],#userlike input[type="checkbox"]:focus,#userlike input[type="checkbox"]:hover,#userlike input[type="checkbox"]:active { display: inline; overflow: hidden; margin: 10px 5px 20px 0; padding: 0; border: none; border-radius: 0; box-shadow: none; -moz-appearance: checkbox; -ms-appearance: checkbox; -webkit-appearance: checkbox;}#userlike input[type="text"],#userlike input[type="email"] { width: 100% !important; margin: 20px 0 !important; padding: 26px 0 21px 0 !important; -webkit-appearance: none; -moz-appearance: none;}#userlike input,#userlike input[type="text"],#userlike input[type="email"] { font-size: 13px; font-weight: 400; display: block; overflow: hidden; box-sizing: border-box; padding: 8px 0 16px 0 !important; color: #4b4d4f; border-bottom: 1px solid rgba(211, 212, 213, .4);}/* Hack to prevent ios from zooming on inputs that have a font-size < 16 */#userlike.userlike-mobile textarea,#userlike.userlike-mobile textarea#userlike-chat-textarea,#userlike.userlike-mobile input[type="text"],#userlike.userlike-mobile input[type="email"]{ font-size: 16px !important;}#userlike.userlike-mobile textarea#userlike-chat-textarea { margin: 0;}#userlike.lt-ie9 input,#userlike.lt-ie9 input[type="text"],#userlike.lt-ie9 input[type="email"]{ border-bottom: 1px solid rgb(211, 212, 213);}#userlike textarea { white-space: pre-wrap;}#userlike input[type="radio"] { float: left !important; clear: none !important; overflow: auto; margin: 3px 0 0 1px !important; border: none; cursor: pointer;}#userlike.userlike-mobile input[type="radio"] { margin: 2px 0 0 1px !important;}#userlike.lt-ie9 input[type="radio"] { margin-top: 5px !important;}#userlike-screenshot-wrapper { display: inline-block; margin: 0 !important;}#userlike-screenshot-wrapper #userlike-screenshot-checkbox { margin: 1px 16px 4px 0;}#userlike-screenshot-label { display: inline;}#userlike textarea { line-height: 1.5 !important; overflow-y: auto; box-sizing: border-box !important; width: 100% !important; max-width: 100% !important; resize: none; -webkit-user-select: text; -moz-user-select: text; -ms-user-select: text; user-select: text; vertical-align: top; color: #4b4d4f; -webkit-appearance: none; -moz-appearance: none;}#userlike-offline-textarea { height: 110px !important; margin-bottom: 16px; border-bottom: 1px solid rgba(211, 212, 213, .4);}.lt-ie9 #userlike-offline-textarea{ border-bottom: 1px solid rgb(211, 212, 213);}#userlike-popup:after { position: absolute; width: 0; height: 0; content: \'\';}#userlike-chat-content { font-size: 13px; font-weight: 400; position: absolute; top: 0; right: 0; bottom: 110px; left: 0; display: block; overflow-y: auto; box-sizing: border-box; margin: 0 !important; padding: 16px 16px 16px 16px !important; word-wrap: break-word; word-break: break-word; -ms-word-break: break-word; border-top: 1px solid #e8e8e8; border-bottom: 1px solid #e8e8e8; overflow-wrap: break-word;}#userlike.userlike-mobile #userlike-chat-content{ bottom: 60px;}#userlike.userlike-mobile.userlike-chat-textarea-fullscreen #userlike-chat-content{ display: none !important;}#userlike-chat-content::-webkit-scrollbar { display: none;}#userlike-chat-content * { -webkit-user-select: text; -moz-user-select: text; -ms-user-select: text; user-select: text;}#userlike-chat-content .userlike-message-container { clear: both; margin-top: 8px;}#userlike-chat-content .userlike-message-container-ct { text-align: left;}#userlike-chat-content .userlike-message-container-co,#userlike-chat-content .userlike-message-container-preview { text-align: right;}#userlike-chat-content .userlike-message-bubble { display: inline-block; max-width: 80%; padding: 16px 24px !important; border-radius: 20px;}#userlike.userlike-no-css-animation #userlike-chat-content .userlike-message-bubble #userlike-spinner { width: 17px; height: 17px;}#userlike-chat-content .userlike-message-bubble #userlike-spinner { position: relative; top: 2px;}#userlike-chat-content .userlike-message-bubble #userlike-spinner div { width: 12px !important; height: 12px !important;}#userlike-chat-content .userlike-message-bubble-co,#userlike-chat-content .userlike-message-bubble-preview { border-bottom-right-radius: 0;}#userlike-chat-content .userlike-message-bubble-ct { border-bottom-left-radius: 0;}#userlike-chat-content .userlike-message-bubble-preview { border-style: dashed; border-width: 1px;}#userlike-chat-content .userlike-message-timestamp { font-size: 11px; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;}#userlike-chat-content .userlike-message-timestamp.userlike-message-timestamp-co,#userlike-chat-content .userlike-message-timestamp.userlike-message-timestamp-preview { text-align: right;}#userlike-chat-content img.userlike-url-info-image{ margin-top: 22px; height: auto; width: 100%;}#userlike-chat-content .userlike-url-info-title{ font-weight: bold;}#userlike #userlike-chat-content .userlike-emoji { vertical-align: middle; cursor: auto;}#userlike #userlike-chat-content .userlike-command-image,#userlike #userlike-chat-content .userlike-command-video{ width: 100%;}#userlike #userlike-chat-content .userlike-command-chips { text-align: center;}#userlike #userlike-chat-content .userlike-command-chips-choice { display: inline-block; margin: 4px 10px 0 0;}#userlike #userlike-chat-content .userlike-command-chips-choice button { border: 1px solid transparent; border-radius: 16px; padding: 4px 8px; margin: 4px 10px 0 0; min-width: 64px; text-align: center;}#userlike #userlike-chat-content .userlike-command-chips-choice button:hover { border: 1px solid;}#userlike-chat-state { line-height: 16px; overflow: hidden; height: 16px; max-height: 16px; margin: -5px 0 0 15px; white-space: nowrap; text-overflow: ellipsis;}#userlike-chat-state > div { font-size: 12px !important; font-weight: 400 !important; color: #a9b0b7;}#userlike-offline-message form { height: 325px !important;}#userlike #userlike-feedback{ position: relative; height: 100%;}#userlike #userlike-feedback-textarea { width: 100% !important; padding: 16px 0 20px 0 !important; border-top: 1px solid rgba(211, 212, 213, .4);}#userlike.lt-ie9 #userlike-feedback-textarea { border-bottom: 1px solid rgb(211, 212, 213);}#userlike-transcript form { height: 140px !important;}#userlike-star-rating { position: relative !important; display: inline-block !important; height: 25px !important; margin: 16px 0 !important; padding: 0 !important; cursor: pointer;}#userlike-star-rating .userlike-symbol { font-size: 22px !important; padding-right: 4px !important;}#userlike-offline-message-submit { position: relative; z-index: 2147483642; top: -9px; right: -8px; display: inline-block; float: right; width: 40px; height: 40px; cursor: pointer; border: none;}#userlike-offline-message-submit .userlike-symbol { position: absolute; top: 5px; left: 5px;}#userlike-chat-scroll-textarea { position: absolute; right: 0; bottom: 0; left: 0; height: 110px;}#userlike.userlike-mobile #userlike-chat-scroll-textarea{ height: 60px;}#userlike #userlike-chat-textarea { font-weight: 400 !important; position: absolute !important; right: 0 !important; bottom: 0 !important; left: 0 !important; width: 100% !important; height: 110px !important; padding-left: 40px !important; padding-right: 40px !important; padding-top: 16px !important; padding-bottom: 0px !important;}#userlike.userlike-mobile #userlike-chat-textarea { height: 60px !important; padding: 6px 36px 10px 16px !important;}#userlike-emoji-button { position: absolute; z-index: 2147483642; top: 16px; right: 16px; width: 22px; height: 22px; cursor: pointer; border: none;}#userlike-emoji-list { position: absolute; top: 0; right: 50px; bottom: 0; left: 1px; display: none; overflow-y: auto; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; padding: 8px 40px; -moz-border-radius: 5px; border-radius: 5px;}#userlike.userlike-mobile #userlike-emoji-list { padding: 8px 16px;}#userlike-emoji-list.show { display: block;}#userlike-popup .userlike-emoji { width: 21px; height: 21px; cursor: pointer;}#userlike-emoji-list .userlike-emoji { padding: 3px 0 0 10px;}#userlike.userlike-mobile #userlike-emoji-list .userlike-emoji { padding: 4px 0 0 5px;}#userlike-register-submit,#userlike-transcript-submit,#userlike-facebook-connect-submit,#userlike-feedback-submit { position: relative; z-index: 2147483642; right: -12px; bottom: 14px; float: right; width: 40px; height: 40px; cursor: pointer; border: none;}#userlike-register-submit{ bottom: 11px;}#userlike-facebook-connect-submit{ bottom: 9px;}#userlike-register form { height: 380px;}#userlike-disclaimer-submit { position: absolute; z-index: 2147483642; right: 28px; bottom: 0; width: 40px; height: 40px; cursor: pointer; border: none;}#userlike-feedback-submit { bottom: 3px;}#userlike .userlike-fieldset-wrapper { clear: none; overflow: hidden; margin-top: 24px;}#userlike.userlike-mobile .userlike-fieldset-wrapper { margin-right: 0 !important;}#userlike .userlike-radio-wrapper { display: block; position: relative !important; margin-bottom: 16px; cursor: pointer;}#userlike .userlike-label { font-size: 13px !important; line-height: 1.5; left: 19px; position: relative; cursor: pointer;}#userlikePushIframe { position: fixed; z-index: 2147483640; top: 10%; right: 10%; bottom: 10%; left: 10%; overflow: hidden; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; width: 80%; height: 80%; margin: 0; padding: 0; color: #4b4d4f; -webkit-border-radius: 5px; -moz-border-radius: 5px; border-radius: 5px; background: #fff; box-shadow: 0 -5px 50px 0 rgba(0, 0, 0, .2);}#userlikePushIframeClose { position: absolute; color: #A9B0B7; height: 19px!important; width: 19px!important; padding: 0!important; font-size: 26px !important; border: none; z-index: 2147483642; right: 22px; top: 0; cursor: pointer;}#userlikePushIframeOpen { position:absolute; background-image: url(\'//dq4irj27fs462.cloudfront.net/images/icon_open.png\'); background-size: 100% 100%; top: 5px; right: 42px; height: 16px!important; width: 16px!important; border:none; z-index:2147483642; padding:0!important; cursor:pointer;}#userlike .userlike-symbol.userlike-symbol-close { font-size: 28px !important;}#userlike .userlike-symbol.userlike-symbol-minimize { font-size: 28px !important; margin-left: 4px !important;}#userlike .userlike-symbol.userlike-symbol-check { font-size: 30px !important; position: absolute !important; left: 2px !important;}#userlike .userlike-symbol.userlike-symbol-send { font-size: 34px !important;}#userlike .userlike-symbol.userlike-symbol-facebook { font-size: 30px !important;}/* IE8 will not load fonts if we use the data-url in one @font-face declaration */@font-face { font-family: "userlike_default"; font-weight: normal; font-style: normal; src: url("//dq4irj27fs462.cloudfront.net/fonts/userlike_default.eot"); src: url("//dq4irj27fs462.cloudfront.net/fonts/userlike_default.eot?#iefix") format("embedded-opentype");}@font-face { font-family: "userlike_default"; font-weight: normal; font-style: normal; src: url(data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAABUsABAAAAAAIhQAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABGRlRNAAABbAAAABoAAAAceIDqwUdERUYAAAGIAAAAHAAAAB4AJwAbT1MvMgAAAaQAAABKAAAAYEDWXThjbWFwAAAB8AAAAEIAAAFCAA/0vWN2dCAAAAI0AAAAFAAAACQDmf+YZnBnbQAAAkgAAAXBAAAL4j+uG59nYXNwAAAIDAAAAAgAAAAIAAAAEGdseWYAAAgUAAAKZgAADsxx6+iYaGVhZAAAEnwAAAAuAAAANgeYwwFoaGVhAAASrAAAABwAAAAkA/ABxWhtdHgAABLIAAAALgAAADIIhgMibG9jYQAAEvgAAAAsAAAALCLOJwxtYXhwAAATJAAAACAAAAAgAYMCL25hbWUAABNEAAAA+gAAAgEzXt0UcG9zdAAAFEAAAABsAAAA3H7RM+ZwcmVwAAAUrAAAAIAAAACNE0njCnicY2BgYGQAgkvSGTYg+rLRQScYDQA5dgWjAAB4nGNgZGBg4AFiMSBmYmAEQhEgZgHzGAAEegBDeJxjYGFiYJzAwMrAwOjDmMbAwOAOpb8ySDK0MDAwMbByMsCBAILJEJDmmsLQ8JHxoxDjgf8HGPQYDzA4AIUZkZQoMDACAAueC6MAAHicY2BgYGaAYBkGRgYQsAHyGMF8FgYFIM0ChED+R6H//4Ek4////ExQlQyMbAwwJgMjE5BgYkAFjAzDHgAAT/YGvgAAeJxjYMACeCCQ8cD/AyAMABZoBTF4nK1WaXPTVhSVvMVJyFKy0KIuT7w4Te0nk1IIBkwIkmUX3MXZWglKK8VOui/QMsNv0K+5Mu0M/cZP67mSbQxJ2hmmmYzuee8dvbtfmTQlSNv3XF+I9jNtdrtNhd17Hl02aM0PjkS071GmFP5d1IpatysPDNMkzSfNkY2+pmtOYFukKxLBkUUZJXqCnncot3qvv6ZPOW7XpYLrmZQt+Tv3PVOaRuQJ6nSwteUbgmqMar4v4pQd9mgNW4OVoHU+X2fm844nYE0UCprqeAF2BJ9NMdpgtBEYge/7BukV35ekdbxD37coqwTuyZVCWJZ3Oh7lpU0FacMPn/TAopySsEv04vyBLfiELTZSC/gJktulbNnEoSMiEUFBvJ4vwcltL+gY4Y7vSd/0BW3tejgz2LWBfovyiiacSl/LpJEqYCltiYhLO6TMwRHpXSigfNmiCSXY1Gmn+yynHQi+gbYCnylBIzG1qPoT05rj2mVzFPtJ9XIuptJb9ApMcOB3INxIhpyXJF6awTElYcDIoZXIjgwbqYrpU16nFbylGS9cG3/pjEoc6k9PZZFsQ5p+2bRoRsWZjEu9sGHRrAJRCDrj3OXXAaTt0wyvdrCawcqiOVwzn4REIAJd6KVZJxBRIGgWQbNoXrX3vDjXa/grNHMon1j0hmpve+3ddNMwsb+Q7J9VsTbn7Hvx3BwSGNo0V+GaRSXb8Rl+zOBB+jIykS11vJiDB2/tCPlltWVT4rUhNtJzfgWtwDs+PGnB/hZ2X07VKQmMNW1BIloOaZt9XdeTXC0oLdYy7p5Hc9IWLk2j+KagOLBFAPV/zc/r2qxm21EQny1U6HHFuIAwLcK3hYpFSyrWWS4jzizPqTjL8k0V51i+peI8y/MqLrA0VDzB8m0VF1m+o+JJlh8oOYw7FQJEWIoq6Q+4QSwqjx0ujw4fpoeVscPV0eGj9PBdpdFM5TX8ew/+vQu7BPxjacI/lhfgH0sJ/1iuwD+WJfjHchX+sXwf/rFcg38slRL1pEwtBbXzgXDYBCdJJVpPca1WFVkVstCFF9EALXFKFmVYkzwR/5VhsPfro9Tqy3SxHOf1JdfDIGMHPxyPzPHjS0pcSez9CDzdPa4E3Xmict7Xlv/U+K+xKWvxJX0JHl2G/zD4ZHvRFGHNoiuqeq5u0cZ/UVHAXdCvIiXacklURYsbH6G8E0Ut2cKk8PCFwGDFNNjQ9aVF6K9hQi2jufCfUGjSqRxGVSlEPcJd114ci2p6B+VwJ1iCAp4VW9ve04zICuNpZjV73rd5fhYximXClk10rvNqGwY8w9LPRcYJepKyTtjDccYJDeCA59er74QwCVNdNpFDCQ1N+AWRaMF9JyiR6aTMYTgg9nkUVP7YrbiRPSolRuDZSSfkC11I+XWOgcBOfnUQA1lHaG4k21RE8wjRlC1WxtmqJyFjBwYR1fa8qqjj68oWDzYF2zIMeaGE1Z3xD3maqJMqeJAZyWV8c2CBM0xNwF/6V10cpnIT86DKUWtiqNf9alzVF9GAt0bbnfHtrZfZJ3JuK6pVTrzUVnStEkExFwusPc5BWqpUBdUZVdgwulxcEqVeRZOk1zUwNDD/X6MUW/9X9bH5PF/qEiNkLN+mP7DR5WAM/W+y/6YcBGDgx8jlFlxeSpsTvwzQhwtVuoxe/PiU/TuYufriAl0BvqvoKkSbo+YirqKJz+AwTp8oLkdqA36q+pgzAJ8B6Aw+V3092ekAJDvbzHEBdpjDYJc5DPaYw2CfObcBvmAOgy+Zw8BjDgOfOQ7APeYwuM8cBl8xh8ED5jQBvmYOg2+YwyBgDoOQOTbAAXMYdJnDoMccBoeKro/CfMQL2gT6NkG3gL5L6gmLLSy+V3RjxP6BFwn7xwQx+6cEMfVnRfUR9RdeJNRfE8TU3xLE1IeKbo6oj3iRUH9PEFP/SBBTH6unk7nM8IeXXaHiIWVXOk+G3xTrH4qiY04AAAAAAQAB//8AD3icrVdbbBzVGT7/mTnnzM6sZ/YyF9u7vs3YM7bXt3j2ksR2PE1IbK9rkpo4xg4CErNxSJMQ4t6gUpQgpUEIhYRSUaqWVhWKVIEqKiEh0T7w0otKkVDVJx5Qn/pQ8VS1L60U+p/ZJI3a8sZqdW7znznnv3zf/w+hJE8IeQ3WiEIEGU0inCmUKCcIBaBrhFLYUHEEK4QIzlQUU/JMOJU4H+ejOB/kn//mqVOwdvvNPMS4l5KYhPAxbBKbBORAkuRAod0ax21lwN3NkqDqgjyCKuQCISol6nmiqk8TwKPWCR51HI+mh6NCEE0z0VVp2N5U4EeiEdaq9Xja9cLA5/Vp17GFF/HAn4Ba9ZfTMBbOdTTOrux+xOn1k83WuZUpPup1BXPBj2PfDOeH9+w+MjGoH5jaOzLRO9otuidKI+Tefd/H+zokImPJCN4XShlKFRXwik2C04t4XeUiitKLuOPJYHx0QBWdlSEur8XDeWjfzDPBsd2G5/JJwEehXOvFJfCCaGQw4Qrt6ttMDk2MzQz8wlRUFnT1VmZnK6Wp0p6ik6eMTY/EyWZdW5j09/b1qoxmc7Nrs+XJso+nqmTlzj27yAAZIVXSSKo6kAUCGlfxfkC3BEObEmVd9grZwCFZqYzumhqtVqrFYtGplzKiuzJkCgtqAQ/noFqfgWm3B+zQ57Y7Xa/e7SM/1UWuwA21o+A4TsFU1Ym5B5fib8dLDxVNs9hxRrbm14QusDO/pWT0jmxW16iyjx2s8XhxMeazRzpS0XbLDZ6RPUn12ST98JM0TnwyQfaQfckMAV2wjIqmV7Y0TlUUW5e9SjYoSBNMTbpONZ7cM7VndGQw6Ck5vusP1foN4VUaaHGpUTyQasQrIHjUaOsRT+/DIAlHgTt2L6STqK1prToBH7SYEAzGmSb4ExUhHmMZZmhM49n1nMEyeoZ9VTMMOTyvsT8yLW0OGMbvUE4z0gbFM6w9yrUnUkcgO+iza6hjjZxafjtz5OHEF6iHSrYJwyBn9IQCoKqwjh2oxzmooB4uJQNSCPd+vsxG4gCJd42NDA70loo5XZAa1DRhVxp+FNbnQfp1H6A5wgqgCdAevVS6WprFv9/xqZk+0DgHvsLFhJYVOeMmtqrIcEvqZZXCqHSzFIalcJGHguV4k4kO0crmtKzWYrqmGrlsVGqVo6jcKkUP8NS3p1DvH6DeGWKRITIlY3U8QlbhSCSENl2LwgKGJygELiDkn0akKXQdyUY5LrF2uDzRaUuIoSZRGAjXc0UoB40y7AosmKdT0xJwvWBbSgNFUAuU+eAmdBjWzQ5Dz4JhmPklYCcHPlKoSt18RkNmGemCrGHSLpRo3bSM7MuqbnRnDaOKD9WBkx8B5PVOgyrU7LKyRpdq6Aihu7qYpAcZ7fFED/yB/h6GQdpcfttAn/YhieEhp9HfVEUYEglC5NO7ECwl/W0J5cLniWy8W3ig0/6KpLshLxgFjGWklJTjMEQRlTKI90I8CYHjNSJ4prdkr3Qe2Ny8vLmnb/nM8vJu94F8ca17ohCenN1Mks3NpNo/OFVbXq7Vm+GPTkwUJK8zxNwp+CHydAkxN0TGkUWWkkPTI4N+H1PpZBlJjzbv3pUBQXephJ5AR0F6W9iQdLgSBEDGKsNRMBQMFTVSgm6BodcOKIHMF/i7Bqb8QLL2BKSYFLbXqDeihtewIEbO9HFYnUOnwSXL8pD4AW7/ExtKs0bR0GAJ4MvG5ctv7v94/5AilMWlZYC4aNzo5ChT0G9Y1s8pXQcY85rNB1dXHUp71ym9MoZXJt1kE/NPgpHXgzxZIwfIEjmWPDRfp7oHBl1CQ+gq0U9gmDKqMkx0RMlQTHgGyXAjs4WvEBoXWwSDQlsjmia11mBlafHQwf1fqsb4q1VrcVb0VBq1//BNMICZqI0rxzYBcVZvz1LMufeNG+hMnNRRfzTEPASeO31LY9AtqeX2X5j2omDbTFO5ss3GBKvK5SoraCwV6GargqNQy+g3xo/+4ahwT33IheAfIomdMlAA903omjC0g4YQhnjxltx164lstrC6KjAAI1KET+BR4pKepDsPCL+mTLgX8RGk+c3udBQkVGJblPuTNKwiCqf7oCEb+ET7MNQ8LdzWtEhztYfewyaCYVf7fShE2MJZqGmr72paKPnvBdKEb0Ad4w3PckyhyNPQ23iSAnhUp91ZSFMpWkKeE2HSbB/l2hZ4aC8/ArLOcjpbX2d6Trb3xrf+Z6U9Jlky89m/4NdwFSsaB6Mgwhw/g3GwTI6Rx8lZ8iycTwrPPnX2zBYz7MegoFmQKSh30IyAVGV8XOgAwzZt4zTBZ4XM6U7gGDFc3fKcrKK7YBu6vZUDMw+WZlpbxS6qkUJGKyBaUEGmwBaRaWWdMCaOE8HE4dLy2wU8YPP/H6Bc+AJOSI7/18vNC1/c2zc2ktrIcH/v13fOnzu9ffLEo8cfXj929PCDy82FQwf2z++b2duoT44PxyPTg0Fv1B8VbX+oWMBSq1KXXIa+LCI0ZNGECblNa+1iY1f6EF3vTUvopOQXh3f23N3r3unDNi9KMS9AQUSSg/WLqN4jTF+06zFZezlHW9dbrevvzLcWVuPJucXWipy23lrd2XljZ+d7wvbtvoroM23Lsq9atmnavpHT9dzf9Vya2X/zMojviCshQwl4KWRg6cLgz6QvgV3x6kJrPmotzh1LT7kk3/nGzl95ob8wXOaxY5p3/92WYbT/WOCwrEo5p6tFVdFNU1fUYjriWa6o7brhdYzfbYxfl8TJFJFE3JR5cQe5iaAfTzBJlbDGJGVieY7wXQny+HMGhChVwAl8k/ZALAInqAW1ODUHbA/piMCDmdmFmZmpER+e28d0Qxs/9M47h+KxXeQeXsnTSIWdiYMLQNbk+obkhpV4mgq3cj+rvaD3vN6jy+ZwD2M9LH2H/dmf4FN4i/RLzBdzBldkHdNMy2eQoC8PRpJfhlKEO3bgT4LMGrUU/9hSpADqwqdiuxOynF2+zFkWOrdF7nrCczy5nvsH1868oiiWsrCgWMBeOaNxQ3GvZbPXXKVd05PP3qcE3k+xHyZBOChzdl+pu6uYNXQTlWnKm16UeedJf6worwOTEPrIeD3gCVklzkDDiyVJR8jyeFP8AEGu9uDPV2eMUWPmav85j1mGfuWKnrO8c+Nnup57ruvMd5MEXPtSZ+clm5Wtp26omtmxsOBl2UtPWeWBs68uLLx61nv++dROJ4kPryMP9xA3KZY9u1jQhaKRRUnBZcAvLHCFkubTtn0irNsaIgqjamNIuvM1WbJi2USPjCqcUvH9Xx0UwGFIfrk8wsTtvyGGoT9moGhz7/20rAih/AyNgt8RFfgtGmAPmUgqu4Eqk4N+GWOINu985tyfCxCHQ2i1vCoTfB3LMC5s7kxxhwuTyjtFYaMeu412HzYQjumC53rVxj7AGs316vAeU1Ul66K1lezs0cmCVRthlPKRKDLw65B2G0wxXEVhECwDm+xTM6FThG7KFFZysd5VQBPjhyKa6VMZU0xrFDf7wyz0sYBcKrNM3zDwAYX8G0gH4HsAAHicY2BkYGAA4rnCDCfj+W2+MsgzMYDAZaODTgj6/wEmBsYDQC4HA1gaAA/0CdgAAHicY2BkYGA88P8Agx4TAwgASUYGVMACAFCUArl4nGNiYBBkAAImCDYGQl+GKIZihjQgjGKQYlBn6GKwZpgHJEWASpIYfAFpRgWvAAAAAAAoACgAKACAANQBPAGuAioCkAL2A2gD+AQuBGoFygYGBigGaga8BvgHZgABAAAAFQB7AAwAAAAAAAIANABEAHcAAAC2AW4AAAAAeJydj0FqwzAUREeJnVIoJUcQ3XRTG0kNJWQbyKa7LELpJhiiGBNhgxxfpTfohXqWHCAj96+6KUTw9R9fMxoJwAO+oJCWwhxPwhPcYS08xQu+hTNqLsI55upZeEb+pFJl95zo0ZV4gke8Ck/xgXfhjJof4Rxa5cIz8hIDenhEBDQ4kfY4cD+i4knAGRh6H0Nz8vuDP1ZD4GRLQT0eVzRi6+shVIQNOrS0pB6p8Ax2KGHYV6z/on5Vlp4CC5aj0+KNF3ftedPF2mtXGr3Sf5/EkXXFonDGUn3Dj3ajoach/UAzNyWXY0+vx87HvulabYwtjTH6lpQrH4BYQAAAeJxdzTkSgkAARNH5o4iCuGAZcIuZQVBCXLgLiZl34pZoQUf+5FV10saaqXEwxQ/Mf+dptVgWLIlYEbNmQ0LKlowdew4cyTnFn3ffeedlkKW8yErW8ipvspGtvMuHfMqX7Ga9k/r34Qs9fypHeJxj8N7BcCIoYiMjY1/kBsadHAwcDMkFGxnYnTYxMDJogRibeZgYOSAsAQYwi8NpF7MDUJoTyOZ02sUAZTMzuGxUYewIjNjg0BGxkTnFZaMaiLeLo4GBkcWhIzkkAqQkEgg28zEx8mjtYPzfuoGldyMTg8tm1hQ2BhcXAOttJS8=) format("woff"), url("//dq4irj27fs462.cloudfront.net/fonts/userlike_default.eot") format("truetype");}#userlike .userlike-symbol,#userlike i.userlike-symbol,#userlikePushIframe .userlike-symbol,#userlikePushIframe i.userlike-symbol,#userlikePushIframe [class*="-symbol"],#userlikePushIframe [class*="symbol-"],#userlikePushIframe i[class*="-symbol"],#userlikePushIframe i[class*="symbol-"] { font-family: "{{ICON_FONT}}" !important; font-weight: normal !important; font-style: normal !important; line-height: 1 !important; display: inline-block !important; cursor: pointer; vertical-align: middle !important; text-decoration: inherit !important; text-transform: none !important; speak: none !important; text-rendering: auto !important; margin: 0 0 0 0!important; -webkit-font-smoothing: antialiased !important; -moz-osx-font-smoothing: grayscale !important; -webkit-touch-callout: none; -webkit-tap-highlight-color:rgba(0,0,0,0);}#userlike .userlike-symbol:before,#userlike i.userlike-symbol:before,#userlikePushIframe .userlike-symbol:before,#userlikePushIframe i.userlike-symbol:before,#userlikePushIframe [class*="-symbol"]:before,#userlikePushIframe [class*="symbol-"]:before,#userlikePushIframe i[class*="-symbol"]:before,#userlikePushIframe i[class*="symbol-"]:before,#userlike .userlike-symbol:after,#userlike i.userlike-symbol:after,#userlikePushIframe .userlike-symbol:after,#userlikePushIframe i.userlike-symbol:after,#userlikePushIframe [class*="-symbol"]:after,#userlikePushIframe [class*="symbol-"]:after,#userlikePushIframe i[class*="-symbol"]:after,#userlikePushIframe i[class*="symbol-"]:after { font-family: "{{ICON_FONT}}" !important;}.userlike-symbol-fallback #userlike-button-symbol .userlike-symbol { background-position: center; background-size: contain; height: 100%; width: 100%; background-repeat: no-repeat;}.userlike-symbol.userlike-button-01:before { content:"\\f101";}.userlike-symbol-fallback-white .userlike-symbol.userlike-button-01 { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/button_01_white.png") !important;}.userlike-symbol-fallback-gray .userlike-symbol.userlike-button-01 { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/button_01_gray.png") !important;}.userlike-symbol-fallback-black .userlike-symbol.userlike-button-01 { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/button_01_black.png") !important;}.userlike-symbol-fallback .userlike-symbol.userlike-button-01:before { content: none;}.userlike-symbol.userlike-button-02:before { content:"\\f102";}.userlike-symbol-fallback-white .userlike-symbol.userlike-button-02 { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/button_02_white.png") !important;}.userlike-symbol-fallback-gray .userlike-symbol.userlike-button-02 { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/button_02_gray.png") !important;}.userlike-symbol-fallback-black .userlike-symbol.userlike-button-02 { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/button_02_black.png") !important;}.userlike-symbol-fallback .userlike-symbol.userlike-button-02:before { content: none;}.userlike-symbol.userlike-button-03:before { content:"\\f103";}.userlike-symbol-fallback-white .userlike-symbol.userlike-button-03 { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/button_03_white.png") !important;}.userlike-symbol-fallback-gray .userlike-symbol.userlike-button-03 { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/button_03_gray.png") !important;}.userlike-symbol-fallback-black .userlike-symbol.userlike-button-03 { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/button_03_black.png") !important;}.userlike-symbol-fallback .userlike-symbol.userlike-button-03:before { content: none;}.userlike-symbol.userlike-button-04:before { content:"\\f104";}.userlike-symbol-fallback-white .userlike-symbol.userlike-button-04 { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/button_04_white.png") !important;}.userlike-symbol-fallback-gray .userlike-symbol.userlike-button-04 { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/button_04_gray.png") !important;}.userlike-symbol-fallback-black .userlike-symbol.userlike-button-04 { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/button_04_black.png") !important;}.userlike-symbol-fallback .userlike-symbol.userlike-button-04:before { content: none;}.userlike-symbol.userlike-button-05:before { content:"\\f105";}.userlike-symbol-fallback-white .userlike-symbol.userlike-button-05 { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/button_05_white.png") !important;}.userlike-symbol-fallback-gray .userlike-symbol.userlike-button-05 { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/button_05_gray.png") !important;}.userlike-symbol-fallback-black .userlike-symbol.userlike-button-05 { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/button_05_black.png") !important;}.userlike-symbol-fallback .userlike-symbol.userlike-button-05:before { content: none;}.userlike-symbol.userlike-button-06:before { content:"\\f106";}.userlike-symbol-fallback-white .userlike-symbol.userlike-button-06 { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/button_06_white.png") !important;}.userlike-symbol-fallback-gray .userlike-symbol.userlike-button-06 { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/button_06_gray.png") !important;}.userlike-symbol-fallback-black .userlike-symbol.userlike-button-06 { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/button_06_black.png") !important;}.userlike-symbol-fallback .userlike-symbol.userlike-button-06:before { content: none;}.userlike-symbol.userlike-button-offline-01:before { content:"\\f107";}.userlike-symbol-fallback-white .userlike-symbol.userlike-button-offline-01 { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/button_offline_01_white.png") !important;}.userlike-symbol-fallback-gray .userlike-symbol.userlike-button-offline-01 { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/button_offline_01_gray.png") !important;}.userlike-symbol-fallback-black .userlike-symbol.userlike-button-offline-01 { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/button_offline_01_black.png") !important;}.userlike-symbol-fallback .userlike-symbol.userlike-button-offline-01:before { content: none;}.userlike-symbol.userlike-button-offline-02:before { content:"\\f108";}.userlike-symbol-fallback-white .userlike-symbol.userlike-button-offline-02 { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/button_offline_02_white.png") !important;}.userlike-symbol-fallback-gray .userlike-symbol.userlike-button-02 { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/button_offline_02_gray.png") !important;}.userlike-symbol-fallback-black .userlike-symbol.userlike-button-02 { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/button_offline_02_black.png") !important;}.userlike-symbol-fallback .userlike-symbol.userlike-button-offline-02:before { content: none;}.userlike-symbol.userlike-button-offline-03:before { content:"\\f109";}.userlike-symbol-fallback-white .userlike-symbol.userlike-button-offline-03 { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/button_offline_03_white.png") !important;}.userlike-symbol-fallback-gray .userlike-symbol.userlike-button-03 { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/button_offline_03_gray.png") !important;}.userlike-symbol-fallback-black .userlike-symbol.userlike-button-03 { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/button_offline_03_black.png") !important;}.userlike-symbol-fallback .userlike-symbol.userlike-button-offline-03:before { content: none;}.userlike-symbol.userlike-symbol-check:before { content:"\\f10a";}.userlike-symbol-fallback-white .userlike-symbol-check { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/icon_check_white.png") !important;}.userlike-symbol-fallback-gray .userlike-symbol-check { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/icon_check_gray.png") !important;}.userlike-symbol-fallback-black .userlike-symbol-check { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/icon_check_black.png") !important;}.userlike-symbol-fallback .userlike-symbol.userlike-symbol-check:before { content: none;}.userlike-symbol.userlike-symbol-close:before { content:"\\f10b";}.userlike-symbol-fallback-white .userlike-symbol.userlike-symbol-close { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/icon_close_white.png") !important;}.userlike-symbol-fallback-gray .userlike-symbol.userlike-symbol-close { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/icon_close_gray.png") !important;}.userlike-symbol-fallback-black .userlike-symbol.userlike-symbol-close { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/icon_close_black.png") !important;}.userlike-symbol-fallback .userlike-symbol.userlike-symbol-close:before { content: none;}.userlike-symbol.userlike-symbol-emoticon:before { content:"\\f10c";}.userlike-symbol-fallback-white .userlike-symbol-emoticon { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/icon_emoticon_white.png") !important;}.userlike-symbol-fallback-gray .userlike-symbol-emoticon { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/icon_emoticon_gray.png") !important;}.userlike-symbol-fallback-black .userlike-symbol-emoticon { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/icon_emoticon_black.png") !important;}.userlike-symbol-fallback .userlike-symbol.userlike-symbol-emoticon:before { content: none;}.userlike-symbol.userlike-symbol-facebook:before { content:"\\f10d";}.userlike-symbol-fallback-white .userlike-symbol-facebook { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/icon_facebook_white.png") !important;}.userlike-symbol-fallback-gray .userlike-symbol-facebook { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/icon_facebook_gray.png") !important;}.userlike-symbol-fallback-black .userlike-symbol-facebook { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/icon_facebook_black.png") !important;}.userlike-symbol-fallback .userlike-symbol.userlike-symbol-facebook:before { content: none;}.userlike-symbol.userlike-symbol-minimize:before { content:"\\f10e";}.userlike-symbol-fallback-white #userlike-minimize { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/icon_minimize_white.png") !important;}.userlike-symbol-fallback-gray #userlike-minimize { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/icon_minimize_gray.png") !important;}.userlike-symbol-fallback-black #userlike-minimize { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/icon_minimize_black.png") !important;}.userlike-symbol-fallback .userlike-symbol.userlike-symbol-minimize:before { content: none;}.userlike-symbol.userlike-symbol-rating:before { content:"\\f10f";}.userlike-symbol-fallback .userlike-symbol-rating,.userlike-symbol-fallback .userlike-symbol-rating-inactive { width: 40px !important; height: 40px !important; background-size: contain !important; background-position: center -8px !important; background-repeat: no-repeat !important;}.userlike-symbol-fallback-white .userlike-symbol-rating { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/icon_rating_white.png") !important;}.userlike-symbol-fallback-gray .userlike-symbol-rating { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/icon_rating_gray.png") !important;}.userlike-symbol-fallback-black .userlike-symbol-rating { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/icon_rating_black.png") !important;}.userlike-symbol-fallback .userlike-symbol.userlike-symbol-rating:before { content: none;}.userlike-symbol.userlike-symbol-rating-inactive:before { content:"\\f110";}.userlike-symbol-fallback-white .userlike-symbol-rating-inactive { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/icon_rating_inactive_white.png") !important;}.userlike-symbol-fallback-gray .userlike-symbol-rating-inactive { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/icon_rating_inactive_gray.png") !important;}.userlike-symbol-fallback-black .userlike-symbol-rating-inactive { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/icon_rating_inactive_black.png") !important;}.userlike-symbol-fallback .userlike-symbol.userlike-symbol-rating-inactive:before { content: none;}.userlike-symbol.userlike-symbol-send:before { content:"\\f111";}.userlike-symbol-fallback .userlike-symbol-send { width: 50px !important; height: 50px !important;}.userlike-symbol-fallback-white .userlike-symbol-send { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/icon_send_white.png") !important;}.userlike-symbol-fallback-gray .userlike-symbol-send { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/icon_send_gray.png") !important;}.userlike-symbol-fallback-black .userlike-symbol-send { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/icon_send_black.png") !important;}.userlike-symbol-fallback .userlike-symbol.userlike-symbol-send:before { content: none;}.userlike-symbol.userlike-symbol-twitter:before { content:"\\f112";}.userlike-symbol-fallback-white .userlike-symbol-twitter { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/icon_send_white.png") !important;}.userlike-symbol-fallback-gray .userlike-symbol-twitter { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/icon_send_twitter.png") !important;}.userlike-symbol-fallback-black .userlike-symbol-twitter { background-image: url("//dq4irj27fs462.cloudfront.net/images/symbols/icon_send_black.png") !important;}.userlike-symbol-fallback .userlike-symbol.userlike-symbol-twitter:before { content: none;}.userlike-emoji { background-image: url(\'//dq4irj27fs462.cloudfront.net/images/spritemap_emojis.png\') !important; background-repeat: no-repeat !important; display: inline-block !important;}@media only screen and (-webkit-min-device-pixel-ratio: 2),only screen and (min-device-pixel-ratio: 2) { .userlike-emoji { background-image: url(\'//dq4irj27fs462.cloudfront.net/images/spritemap_emojis@2x.png\') !important; background-size: 155px 155px !important; }}.userlike-emoji-emoji_angry { width: 21px !important; height: 21px !important; background-position: -5px -5px !important;}.userlike-emoji-emoji_blushing { width: 21px !important; height: 21px !important; background-position: -36px -5px !important;}.userlike-emoji-emoji_confused { width: 21px !important; height: 21px !important; background-position: -67px -5px !important;}.userlike-emoji-emoji_cool { width: 21px !important; height: 21px !important; background-position: -98px -5px !important;}.userlike-emoji-emoji_embarrassed { width: 21px !important; height: 21px !important; background-position: -129px -5px !important;}.userlike-emoji-emoji_evil { width: 21px !important; height: 21px !important; background-position: -5px -36px !important;}.userlike-emoji-emoji_frown { width: 21px !important; height: 21px !important; background-position: -36px -36px !important;}.userlike-emoji-emoji_gasp { width: 21px !important; height: 21px !important; background-position: -67px -36px !important;}.userlike-emoji-emoji_grimmace { width: 21px !important; height: 21px !important; background-position: -98px -36px !important;}.userlike-emoji-emoji_grin { width: 21px !important; height: 21px !important; background-position: -129px -36px !important;}.userlike-emoji-emoji_innocent { width: 21px !important; height: 21px !important; background-position: -5px -67px !important;}.userlike-emoji-emoji_kiss { width: 21px !important; height: 21px !important; background-position: -36px -67px !important;}.userlike-emoji-emoji_lips_are_sealed { width: 21px !important; height: 21px !important; background-position: -67px -67px !important;}.userlike-emoji-emoji_mischievous { width: 21px !important; height: 21px !important; background-position: -98px -67px !important;}.userlike-emoji-emoji_oops { width: 21px !important; height: 21px !important; background-position: -129px -67px !important;}.userlike-emoji-emoji_shouting { width: 21px !important; height: 21px !important; background-position: -5px -98px !important;}.userlike-emoji-emoji_sleeping { width: 21px !important; height: 21px !important; background-position: -36px -98px !important;}.userlike-emoji-emoji_smile { width: 21px !important; height: 21px !important; background-position: -67px -98px !important;}.userlike-emoji-emoji_smirk { width: 21px !important; height: 21px !important; background-position: -98px -98px !important;}.userlike-emoji-emoji_straight_faced { width: 21px !important; height: 21px !important; background-position: -129px -98px !important;}.userlike-emoji-emoji_tongue { width: 21px !important; height: 21px !important; background-position: -5px -129px !important;}.userlike-emoji-emoji_undecided { width: 21px !important; height: 21px !important; background-position: -36px -129px !important;}.userlike-emoji-emoji_wink { width: 21px !important; height: 21px !important; background-position: -67px -129px !important;}.userlike-emoji-emoji_wink_tongue { width: 21px !important; height: 21px !important; background-position: -98px -129px !important;}.userlike-emoji-icon_emoticon { width: 21px !important; height: 21px !important; background-position: -129px -129px !important;}';
},{}],17:[function(e,t,i){var r=function(e,t){for(var i in t){if(n.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e},n={}.hasOwnProperty;(function(){var i,o,s,a,u,l,c,p,f,h,d,m,g,k,_,v,b,y,w,x,C,S,P,B;d=e("./markup.coffee");B=d.userlike_html;P=d.userlike_css;y=e("./global.coffee").isMobile();b=e("./utils/utils.coffee").isIE8;_=e("./utils/utils.coffee").hashCode;f=e("./utils/utils.coffee").adjustFontSize;k=e("./utils/utils.coffee").has_css_animation_support;S=e("./utils/utils.coffee").trim;v=e("./utils/utils.coffee").isAndroid;h=e("./utils/utils.coffee").applyTheme;x=e("./utils/utils.coffee").setBadge;C=e("./utils/favicon.coffee").setBubble;w=e("./utils/utils.coffee").rgbaToRgb;m=e("./global.coffee").get;g=function(){return m("preview")};p=e("./global.coffee")._ullog;c=e("./utils/jq.coffee")._jq;l=e("./views/view.coffee").View;u=e("./position.coffee").Position;o=e("./key_handler.coffee").KeyHandlerFactory;s=e("./key_handler.coffee").KeyHandlerFactoryAndroid;i=e("./views/emoji_popover.coffee").EmojiPopoverView;t.exports.assignCallbacks=function(e){return function(){return this.userlikeCallbackIframeCheck=function(e){var t,i;i="iframe_blacklist_"+_(e.url);t=e.status!=="200"||e.xframe;p("userlikeCallbackIframeCheck: url="+e.url+" status="+e.status+" xframe="+e.xframe+" blacklist="+t);return m("session").set(i,t)}}.call(e)};a=function(e){r(Popup,e);Popup.TIMEOUT=5e3;Popup.FADE=50;Popup.prototype.last_scroll_pos=null;Popup.prototype.is_visible=false;function Popup(e){var t,i,r;Popup.__super__.constructor.call(this,e);this.tab_active=true;i=m("font").get();p("Popup::ctor font="+i);t=P.replace("{{FONT}}",i);t=t.replace(/{{ICON_FONT}}/g,"userlike_"+this.config.theme.symbol_set);r=document.createElement("style");r.type="text/css";document.getElementsByTagName("head")[0].appendChild(r);if(r.styleSheet){r.styleSheet.cssText=t}else{r.appendChild(document.createTextNode(t))}}Popup.prototype.setup=function(){this.setupDomReferences();this.setupEventHandlers();this.position=new u;this.position.update();this.setView(m("idle_view"));if(v()){this.keyhandler=(new s).get(this.$input,m("fsm"))}else{this.keyhandler=(new o).get(this.$input,m("fsm"))}this.emojiPopover=new i;return this.setupLayout()};Popup.prototype.setupDomReferences=function(){this.$popup=c("#userlike-popup");this.$input=c("#userlike-chat-textarea");this.$content=c("#userlike-chat-content");this.$header=c("#userlike-chatHeadline");this.$headerbar_text=c("#userlike-headerbar-headline");this.$data_privacy=c("#userlike-data-privacy");this.$data_privacy_link=c("#userlike-data-privacy a");return this.$message_headline=c("#userlike-message-headline")};Popup.prototype.setConfig=function(e){this.config=c.extend({},this.config,e);return this};Popup.prototype.setHeaderbarText=function(){var e;e=this.view.getHeaderbarText();if(e!=null){this.highlightText(this.$headerbar_text,e);return this.$headerbar_text.text(e)}};Popup.prototype.setupEventHandlers=function(){c("#userlike-close").on("click",function(e){m("fsm").event("closeButton");c.event(e).preventDefault();return c.event(e).stopPropagation()});c("#userlike-minimize").on("click",function(e){m("fsm").event("minimizeButton");c.event(e).preventDefault();return c.event(e).stopPropagation()});c(".userlike-fieldset-wrapper div").on("click",function(e){var t,i;i=c(c.event(e).target);t=i.data("select")||i.parent().data("select");if(t){m("fsm").event("select",t)}c.event(e).preventDefault();return c.event(e).stopPropagation()});c("#userlike-register-form,#userlike-offline-email,#userlike-offline-name,#userlike-feedback-form,#userlike-transcript-form").on("keypress",function(e){var t;t=c.event(e);if(t.which===13){return m("fsm").event("submitButton")}});c.windowOn("resize",function(e){return function(){return e.position.update()}}(this));c.windowOn("focus",function(e){return function(){p("Popup::focus");return e.tab_active=true}}(this));c("body").on("gesturestart",function(e){return function(){return e.position.update()}}(this));c.windowOn("blur",function(e){return function(){p("Popup::blur");return e.tab_active=false}}(this));if(y){return c('textarea, input[type="text"], input[type="email"]').on("focus",function(){return window.setTimeout(function(e){return function(){if(e.scrollIntoViewIfNeeded!=null){return e.scrollIntoViewIfNeeded()}else if(e.scrollIntoView!=null){return e.scrollIntoView()}}}(this),250)})}};Popup.prototype.setupLayout=function(){var e,t;if(this.config.show_data_privacy_link){this.$data_privacy.css("display","block");this.$data_privacy_link.attr("href",this.config.data_privacy_link);this.$data_privacy_link.text(this.config.data_privacy_name)}else{this.$data_privacy.hide()}if(this.config.hide_poweredby){this.$popup.find("#userlike-poweredby").hide()}else{this.$popup.find("#userlike-poweredby").show()}if(((t=this.config.theme)!=null?t.font_custom:void 0)!=null){e=m("font").get();p("Popup::setupLayout font="+e);this.$popup.css("font-family",e)}if(this.view.is_minimizable){c("#userlike-minimize").css("display","inline-block").importize()}else{c("#userlike-minimize").css("display","none").importize()}if(!k&&!c("#userlike").hasClass("userlike-no-css-animation")){return c("#userlike").addClass("userlike-no-css-animation")}};Popup.prototype.setupTheme=function(){var e,t,i,r,o;e=this;if(b()){i=this.config.theme;for(t in i){if(!n.call(i,t))continue;o=i[t];if(typeof o==="string"&&o.indexOf("rgba(")!==-1){this.config.theme[t]=w(o)}}}h(this.config.theme);return(r=this.position)!=null?r.update():void 0};Popup.prototype.isActive=function(){if(!this.$popup){this.setupDomReferences()}return this.tab_active&&this.$popup.css("display")==="block"};Popup.prototype.isVisible=function(){return this.is_visible};Popup.prototype.hideTab=function(e){return c("#userlike-tab").fadeOut(Popup.FADE,e)};Popup.prototype.hide=function(e){var t;if(e==null){e=function(){}}this.is_visible=false;if(!this.$popup){if((t=m("button"))!=null){t.restoreDisplayState()}e();return}return this.$popup.fadeOut(Popup.FADE,function(){var t;m("tracking_event").trigger("window_invisible");if((t=m("button"))!=null){t.restoreDisplayState()}return e()})};Popup.prototype.show=function(e){this.reset();this.is_visible=true;return this.transition(this.view,e)};Popup.prototype.startDisableBodyScroll=function(){if(this.last_scroll_pos==null){this.last_scroll_pos=c("body").scrollTop()}return c("body").addClass("userlike-disable-body-scroll")};Popup.prototype.stopDisableBodyScroll=function(){c("body").removeClass("userlike-disable-body-scroll");if(this.last_scroll_pos!=null){c("body").scrollTop(this.last_scroll_pos);return this.last_scroll_pos=null}};Popup.prototype.reset=function(){m("button").clear();m("chat_view").incoming_messages=0;m("button").setBadge(0);if(this.config.favicon_enabled){return C(0)}};Popup.prototype.close=function(e){if(e==null){e=function(){}}return this.hide(function(t){return function(){t.reset();t.view.el().hide();t.$content.empty();t.$input.val("");return e()}}(this))};Popup.prototype.setView=function(e){this.view=e;if(y){return this.view.height_mobile}return this.view.height};Popup.prototype.transition=function(e,t){var i;p("Popup::transition next="+e.el().attr("id"));this.is_visible=true;if(!this.$popup||!this.position){this.setup()}if(this.view!=null&&this.view.el().get()!==e.el().get()){this.view.el().hide();this.view.destroy()}if(this.$popup.css("display")!=="block"){m("tracking_event").trigger("window_visible")}i=this.setView(e);this.setHeaderbarText();this.$popup.css({height:i});this.position.update();this.reset();this.setupLayout();this.$popup.fadeIn({duration:Popup.FADE,queue:false});this.view.el().fadeIn({duration:Popup.FADE,queue:false,complete:t});return f(this.view.el().find(".userlike-adjust-text"))};Popup.prototype.injectIframe=function(e){var t,i;if(m("session").get("iframe_blacklist_"+_(e))||c.browser.msie){return window.open(e)}i=document.createElement("div");i.id="userlikePushIframe";t=c(i);t.html('<i id="userlikePushIframeClose" class="userlike-symbol userlike-symbol-close userlike-theme-text userlike-theme-headbar-text-color"></i>\n<div id="userlikePushIframeOpen"></div>\n<div id="userlikeSpinnerIframe">\n  <div id="userlikeBounce1"></div>\n  <div id="userlikeBounce2"></div>\n  <div id="userlikeBounce3"></div>\n</div>\n<iframe id="userlikePushIframe" src="'+e+'" style="border:none">');c("#userlikePushIframe").remove();c("body").append(t);c("#userlikePushIframeClose").on("click",function(){return c("#userlikePushIframe").remove()});c("#userlikePushIframeOpen").on("click",function(){window.open(e);return c("#userlikePushIframe").remove()});return setTimeout(function(){return c("#userlikeSpinnerIframe").remove()},5e3)};Popup.prototype.clearInput=function(e,t,i){var r,n,o;r=c(e);t=S(t);n=r.data("default")&&r.data("default")!==t;r.data("default",t);if(!i){i=t}if(!r.val().length&&!r.hasFocus()){r.val(i);r.css({color:this.config.theme.input_default_text_color})}if(n){if((o=g())!=null?o.isActive():void 0){this.highlightText(r,i)}r.val(t);r.css({color:this.config.theme.input_default_text_color})}r.off("focus");r.focus(function(e){return function(){t=r.data("default");r.css({"border-color":e.config.theme.symbol_active_color});if(r.val()===t){r.val("");return r.css({color:e.config.theme.text_default_color})}}}(this));r.off("blur");return r.blur(function(e){return function(){if(r.val()===""){r.val(t).css({color:e.config.theme.input_default_text_color})}return r.css({"border-color":e.config.theme.border_color.replace("1.0","0.4")})}}(this))};return Popup}(l);return t.exports.Popup=a})()},{"./global.coffee":13,"./key_handler.coffee":15,"./markup.coffee":16,"./position.coffee":18,"./utils/favicon.coffee":30,"./utils/jq.coffee":31,"./utils/utils.coffee":36,"./views/emoji_popover.coffee":40,"./views/view.coffee":55}],18:[function(e,t,i){(function(){var i,r,n,o,s,a,u,l,c;r=e("./utils/jq.coffee")._jq;n=e("./global.coffee")._ullog;u=e("./utils/utils.coffee").isElementInViewport;s=e("./utils/utils.coffee").getMousePosition;c=e("./utils/utils.coffee").overlapDiv;l=e("./global.coffee").isMobile();o=e("./global.coffee").get;a=function(){return o("preview")};i=function(){function Position(){var e,t,i,s;this.$button=r(o("button").el());this.$popup=r("#userlike-popup");this.drag=o("session").getDrag()||{};if(!this.drag.snap&&((e=this.drag)!=null?(t=e.pos)!=null?t.top:void 0:void 0)!=null&&((i=this.drag)!=null?(s=i.pos)!=null?s.left:void 0:void 0)!=null){n("Position::ctor use stored position top="+this.drag.pos.top+" left="+this.drag.pos.left+" snap="+this.drag.snap)}else{this.snap();n("Position::ctor use button position")}this.setupEvents()}Position.prototype.snap=function(){n("Position::snap");this.drag.snap=true;this.drag.down=false;return o("session").persistDrag(this.drag)};Position.prototype.update=function(){var e;if(!u(this.$popup.get())&&!this.drag.down){this.snap()}if(this.drag.snap){this.drag.pos=o("button").popupPosition()}try{this.$popup.css(this.drag.pos);if(this.isInDefaultPosition()){return o("button").slideOut()}else{return o("button").show()}}catch(t){e=t;return n("Position:update error=",e," drag=",this.drag)}};Position.prototype.isInDefaultPosition=function(){return this.drag.snap&&o("popup").isVisible()};Position.prototype.setupEvents=function(){var e;if(l){return}e=r(".userlike-drag");e.css({cursor:"move"});e.on("mousedown",function(e){return function(t){e.startDrag(t);return false}}(this)).on("touchstart",function(e){return function(t){e.startDrag(t);return false}}(this));return r(document).on("mouseup",function(e){return function(t){return e.stopDrag(t)}}(this)).on("mousemove",function(e){return function(t){return e.moveDrag(t)}}(this)).on("touchend",function(e){return function(t){return e.stopDrag(t)}}(this)).on("touchmove",function(e){return function(t){return e.moveDrag(t)}}(this))};Position.prototype.getMousePosition=function(e){var t,i,r,n;t=0;i=0;if(!e){e=window.event}if(((r=e.originalEvent)!=null?r.targetTouches:void 0)!=null){n=e.originalEvent.targetTouches[0];t=n.clientX;i=n.clientY}else if(e.pageX||e.pageY){t=e.pageX;i=e.pageY}else if(e.clientX||e.clientY){t=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;i=e.clientY+document.body.scrollTop+document.documentElement.scrollTop}return{x:t,y:i}};Position.prototype.startDrag=function(e){var t,i;if(a()!=null&&((t=a())!=null?t.isActive():void 0)){return}if(r(r.event(e).target).hasClass("userlike-symbol")){return}i=this.$popup.position();this.drag={mouse:s(e),start:{left:i.left,top:i.top},down:true,snap:false};return o("session").persistDrag(this.drag)};Position.prototype.stopDrag=function(e){if(!this.drag.down){return}this.drag.down=false;if(c(this.$button,this.$popup)){this.snap()}this.update();return o("session").persistDrag(this.drag)};Position.prototype.moveDrag=function(e){var t;if(!this.drag.down){return}t=s(e);this.drag.pos={left:t.x-this.drag.mouse.x+this.drag.start.left,top:t.y-this.drag.mouse.y+this.drag.start.top};this.update();return o("session").persistDrag(this.drag)};return Position}();return t.exports.Position=i})()},{"./global.coffee":13,"./utils/jq.coffee":31,"./utils/utils.coffee":36}],19:[function(e,t,i){var r={}.hasOwnProperty;(function(){var i,n,o,s,a,u,l,c,p,f,h,d,m,g,k,_,v,b,y,w,x,C,S,P,B;b=e("./utils/jq.coffee")._jq;y=e("./global.coffee")._ullog;C=e("./global.coffee");x=C.get;P=e("./session.coffee").isSessionActive;S=e("./utils/utils.coffee").isIE11;h=e("./fsm.coffee").PreviewState;u=e("./fsm.coffee").Idle;p=e("./fsm.coffee").Offline;d=e("./fsm.coffee").ProactiveSlotReject;f=e("./views/offline_message.coffee").OfflineMessageView;g=e("./views/register.coffee").RegisterView;_=e("./views/survey.coffee").SurveyView;n=e("./views/chat.coffee").ChatView;o=e("./views/disclaimer.coffee").DisclaimerView;a=e("./views/group_select.coffee").GroupSelectView;v=e("./views/transcript.coffee").TranscriptView;m=e("./views/progress.coffee").ProgressView;c=e("./views/message.coffee").MessageView;s=e("./views/feedback_rating_composite.coffee").FeedbackRatingCompositeView;k=e("./views/social_composite.coffee").SocialCompositeView;i=e("./buttons/button_factory.coffee").ButtonFactory;B=null;w=function(){var e;B=this.userlikePreview=e=function(){function UserlikePreview(){}UserlikePreview.has_registered_events=false;UserlikePreview.current_view_index=-1;UserlikePreview.last_config={};UserlikePreview.view_functions=["showChat","showOfflineMessageForm","showRegister","showPreSurvey","showGroupSelect","showPostSurvey","showFeedbackRatingComposite","showTranscript","showDisclaimer","showTransfer","showProgress","showError","showFeedbackOffline","showButton"];UserlikePreview.init=function(e){if(B!=null){B.registerEvents();B.setUIState();B.setOperatorInfo(e);return B.last_config=b.extend({},x("config"),e)}};UserlikePreview.setOperatorInfo=function(e){if(B!=null){B.operator_display_name=e.operator_display_name;return B.operator_url_image=e.operator_url_image}};UserlikePreview.updateSymbols=function(e){return b("#userlike .userlike-symbol-has-active-state").each(function(){if(!b(this).hasClass("userlike-disabled")){return b(this).css({color:e.theme_link_color})}})};UserlikePreview.start=function(){var e,t,i,r,n;t=false;n=[u,h,p,d];for(e=0,i=n.length;e<i;e++){r=n[e];if(x("fsm").state instanceof r){t=true}}if(t){if(!this.isActive()){x("fsm").next(h)}if(B!=null){B.setUIState()}B.resetPosition();return true}else{y("userlikePreview::start: Cannot start preview, not in Idle mode");return false}};UserlikePreview.resetPosition=function(){var e,t,i;return(e=x("popup"))!=null?(t=e.position)!=null?(i=t.drag)!=null?i.snap=true:void 0:void 0:void 0};UserlikePreview.isActive=function(){return x("fsm").state instanceof h};UserlikePreview.stop=function(){var e,t;if(B!=null){B.reset();B.setUIState();B.setButton(x("config"))}if(typeof(e=x("button")).registerEvents==="function"){e.registerEvents()}if(typeof(t=x("button")).fadeOutHoverText==="function"){t.fadeOutHoverText()}return x("fsm").next(u)};UserlikePreview.loaded=function(){var e,t,i;t=x("session");i=t.getState();e=!P(i)&&x("button").el();return e};UserlikePreview.destroy=function(){return B!=null?B.unregisterEvents():void 0};UserlikePreview.reset=function(){var e;this.resetSlogan();if((e=x("popup"))!=null?e.view:void 0){return x("popup").close()}};UserlikePreview.showOfflineMessageForm=function(e){if(!(B!=null?B.start():void 0)){return}if(e==null){e=B.last_config}return new f({config:e}).showOfflineMessageForm()};UserlikePreview.showOfflineMessageSent=function(e){if(!(B!=null?B.start():void 0)){return}if(e==null){e=B.last_config}return new f({config:e}).showOfflineMessageSent()};UserlikePreview.showRegister=function(e){if(!(B!=null?B.start():void 0)){return}if(e==null){e=B.last_config}return new g({config:e}).showRegisterForm()};UserlikePreview.showPreSurvey=function(e){if(!(B!=null?B.start():void 0)){return}if(e==null){e=B.last_config}return new _({config:e}).showPreSurvey()};UserlikePreview.showPostSurvey=function(e){if(!(B!=null?B.start():void 0)){return}if(e==null){e=B.last_config}return new _({config:e}).showPostSurvey()};UserlikePreview.showChat=function(e){if(!(B!=null?B.start():void 0)){return}if(e==null){e=B.last_config}e.operator_display_name=B!=null?B.operator_display_name:void 0;e.operator_url_image=B!=null?B.operator_url_image:void 0;return new n({config:e}).showPreview()};UserlikePreview.showDisclaimer=function(e){if(e==null){e=B.last_config}return new o({config:e}).show()};UserlikePreview.showGroupSelect=function(e){if(!(B!=null?B.start():void 0)){return}if(e==null){e=B.last_config}if(e.data==null){e.data={available:[{name:"Operator1",first:{url_image:"//dggtwb4wc2zg7.cloudfront.net/static/web/images/profile-pictures/default_2.jpg"}},{name:"Operator2",first:{url_image:"//dggtwb4wc2zg7.cloudfront.net/static/web/images/profile-pictures/default_3.jpg"}},{name:"Operator3",first:{url_image:"//dggtwb4wc2zg7.cloudfront.net/static/web/images/profile-pictures/default_4.jpg"}}]}}return new a({config:e}).show()};UserlikePreview.showTranscript=function(e){if(!(B!=null?B.start():void 0)){return}if(e==null){e=B.last_config}return new v({config:e}).show()};UserlikePreview.setHidePoweredBy=function(e){if(!(B!=null?B.start():void 0)){return}return this.last_config.hide_poweredby=e};UserlikePreview.setSlogan=function(e){var t,i;t=b("#userlike-poweredby");if(this.poweredby_original==null){this.poweredby_original=t.html()}if(this.hide_poweredby_original==null){this.hide_poweredby_original=t.css("display")}i=t.find("#userlike-poweredby-link");t.html(e);t.append(i);if(this.last_config.hide_poweredby){return t.hide()}else{return t.show()}};UserlikePreview.resetSlogan=function(){var e;e=b("#userlike-poweredby");e.html(this.poweredby_original);return e.css("display",this.hide_poweredby_original)};UserlikePreview.setButton=function(e){var t;if(!(B!=null?B.start():void 0)){return}if(e==null){e=B.last_config}x("button").destroy();return C.set("button",t=new i({config:e}).makeButton().render().show(0))};UserlikePreview.showButton=function(){if(!(B!=null?B.start():void 0)){return}return x("popup").hide()};UserlikePreview.setEyecatcher=function(e){if(e==null){e={}}if(!(B!=null?B.start():void 0)){return}if(e==null){e=B.last_config}this.setButton(e);return this.showButton()};UserlikePreview.setTheme=function(e){var t;if(!(B!=null?B.start():void 0)){return}e.theme=B!=null?B.themeGroupedToMerged(e.theme):void 0;if(B!=null){B.setButton(e)}x("popup").setConfig(e).setupTheme();return B!=null?(t=B.last_config)!=null?t.theme=e.theme:void 0:void 0};UserlikePreview.showTransfer=function(e){if(!(B!=null?B.start():void 0)){return}if(e==null){e=B.last_config}return new c({config:e}).showTransfer()};UserlikePreview.showProgress=function(e){var t;if(!(B!=null?B.start():void 0)){return}if(e==null){e=B.last_config}t=new m({config:e});t.show();return t.updateSpinnerColor()};UserlikePreview.showError=function(e){if(!(B!=null?B.start():void 0)){return}if(e==null){e=B.last_config}return new c({config:e}).showErrorMessage()};UserlikePreview.showFeedbackOffline=function(e){if(!(B!=null?B.start():void 0)){return}if(e==null){e=B.last_config}return new c({config:e}).showOfflineMessageFeedback()};UserlikePreview.showFeedbackRatingComposite=function(e){if(!(B!=null?B.start():void 0)){return}if(e==null){e=B.last_config}return new s({config:e}).show()};UserlikePreview.showSocialComposite=function(e){if(!(B!=null?B.start():void 0)){return}if(e==null){e=B.last_config}return new k({config:e}).show()};UserlikePreview.registerEvents=function(){var e;if(!(B!=null?B.has_registered_events:void 0)){b("#userlike-preview-state").on("click",function(){if(B!=null?B.isActive():void 0){if(B!=null){B.stop()}}else{if(B!=null){B.start()}if(B!=null){B.cycleView()}}return B!=null?B.setUIState():void 0});b("#userlike-preview-next").on("click",function(){return B!=null?B.cycleView(1):void 0});b("#userlike-preview-prev").on("click",function(){return B!=null?B.cycleView(-1):void 0});e=S()?"change":"input";b("#userlike-preview-slider").on(e,function(e){return function(t){return e.goToView(parseInt(t.target.value),10)}}(this));return B!=null?B.has_registered_events=true:void 0}};UserlikePreview.unregisterEvents=function(){b("#userlike-preview-state").off("click");b("#userlike-preview-next").off("click");b("#userlike-preview-prev").off("click");b("#userlike-preview-slider").off("input");return B!=null?B.has_registered_events=false:void 0};UserlikePreview.setUIState=function(){b("#userlike-preview-slider").attr("max",(B!=null?B.view_functions.length:void 0)-1);if(B!=null?B.isActive():void 0){b("#userlike-preview-state").removeClass("icon-play").addClass("icon-pause");b(".preview-has-disabled").removeClass("disabled");return b("#userlike-preview-slider").get().disabled=false}else{b("#userlike-preview-state").removeClass("icon-pause").addClass("icon-play");b(".preview-has-disabled").addClass("disabled");return b("#userlike-preview-slider").get().disabled=true}};UserlikePreview.cycleView=function(e){if(e==null){e=1}if(!(B!=null?B.start():void 0)){return}if(!(B!=null?B.isActive():void 0)){return}if(B!=null){B.current_view_index+=e}return B!=null?B.goToView(B!=null?B.current_view_index:void 0):void 0};UserlikePreview.goToView=function(e){var t;if(!(B!=null?B.isActive():void 0)){return}if(B!=null){B.current_view_index=e}if((B!=null?B.current_view_index:void 0)<0){if(B!=null){B.current_view_index=(B!=null?B.view_functions.length:void 0)-1}}if((B!=null?B.current_view_index:void 0)>=(B!=null?B.view_functions.length:void 0)){if(B!=null){B.current_view_index=0}}b("#userlike-preview-slider").val(B!=null?B.current_view_index:void 0);t=B!=null?B.view_functions[B!=null?B.current_view_index:void 0]:void 0;if(B!=null){B.setUIState()}x("popup").setConfig(B.last_config).setupTheme();return B[t]()};UserlikePreview.themeGroupedToMerged=function(e){var t,i,n,o,s,a;a={};for(t in l){if(!r.call(l,t))continue;s=l[t];for(i=0,n=s.length;i<n;i++){o=s[i];a[o]=e[t]}}return a};return UserlikePreview}();return C.set("preview",B)};l={lead_color:["headbar_bg_color","icon_active_color","button_bg_color","input_active_text_color","chat_operator_text color","icon_hover_color"],lead_text_color:["headbar_text_color","headbar_icon_color","button_text_color","button_symbol_color"],text_color:["headline_text_color","text_default_color"],background_color:["window_bg_color"],chat_text_color:["chat_text_color_1","chat_text_color_2"],chat_bg_color_1:["chat_bg_color_1"],chat_bg_color_2:["chat_bg_color_2"],link_color:["link_text_color","icon_default_color","input_default_text_color","border_color"],font:["font"],button_orientation:["button_orientation"],button_offset_x:["button_offset_x"],button_style:["button_style"],button_symbol_online:["button_symbol_online"],button_symbol_offline:["button_symbol_offline"],border_radius:["border_radius"],shadow:["shadow"],icon_set:["icon_set"]};return t.exports={assignPreview:function(e){return w.call(e)},userlikePreview:function(){return x("preview")},MAP:l}})()},{"./buttons/button_factory.coffee":6,"./fsm.coffee":12,"./global.coffee":13,"./session.coffee":24,"./utils/jq.coffee":31,"./utils/utils.coffee":36,"./views/chat.coffee":38,"./views/disclaimer.coffee":39,"./views/feedback_rating_composite.coffee":43,"./views/group_select.coffee":44,"./views/message.coffee":46,"./views/offline_message.coffee":47,"./views/progress.coffee":48,"./views/register.coffee":50,"./views/social_composite.coffee":51,"./views/survey.coffee":52,"./views/transcript.coffee":53}],20:[function(e,t,i){var r=function(e,t){for(var i in t){if(n.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e},n={}.hasOwnProperty;(function(){var i,n,o,s,a,u,l,c,p,f,h,d,m,g,k,_,v,b,y,w,x,C,S,P,B,A;P=e("./global.coffee");C=P.get;w=P._ullog;b=P.UserlikeLS;S=function(){return C("preview")};h=e("./fsm.coffee").FSM;A=e("./utils/utils.coffee").unpack;B=e("./session.coffee");l=B.BackendMemory;u=B.BackendLocalStorage;o=B.BackendCookie;p=B.BackendSessionCookie;n=B.BackendContainerCookie;c=B.BackendSessionContainerCookie;s=B.BackendExpireContainerCookie;a=B.BackendExpireCookie;m=B.SessionFactory;v=B.Storage;d=B.Session;g=B.SessionStorage;k=B.SessionStoragePrivacy;f=e("./utils/cookies.coffee").Cookies;y=e("./utils/jq.coffee")._jq;_=function(){var e;function Singleton(){}e=null;Singleton.get=function(){if(this.instance==null){this.instance=new this}return this.instance};return Singleton}();i=function(e){r(App,e);function App(){return App.__super__.constructor.apply(this,arguments)}App.prototype.run=function(e,t,i,r){var n;n=new h;P.set("fsm",n);return n.start({app_key:e,widget_key:t,config:A(i),router:r})};return App}(_);x=function(){this.userlikeInit=function(e,t,r){return i.get().run(e,t,r)};this.userlikePushState=function(){};this.userlikeMonitorGoal=function(){};this.userlikeQuitChat=function(){return C("fsm").event("receiveQuit")};this.userlikeStartChat=function(e){C("fsm").event("chatButton");if(e!=null){return y.event(e).preventDefault()}};this.userlikeHideButton=function(e){return y(C("button").el()).hide()};this.userlikeShowButton=function(e){return y(C("button").el()).show()};this.userlikeChatButton=function(e){C("fsm").event("chatButton");if(e!=null){return y.event(e).preventDefault()}};this.userlikeCloseButton=function(e){C("fsm").event("closeButton");if(e!=null){return y.event(e).preventDefault()}};this.userlikeUpdateAPI=function(){return C("fsm").event("updateAPI")};this.userlikeInputEnter=function(e){C("fsm").event("inputEnter");if(e!=null){return y.event(e).preventDefault()}};this.userlikeCheckOperatorStatus=function(e){w("#######################################################################");w("# This feature has been removed an please use userlikeCheckSlotStats()#");return w("#######################################################################")};this.userlikeCheckSlotStats=function(e){return C("slot").checkSlotStats(e)};this.userlikeRequestOperatorChat=function(e){return C("fsm").event("directRequest",e)};this.userlikeChatState=function(){return C("session").getState()};this.userlikeSendEvent=function(e,t){return C("fsm").event(e,t)};this.userlikeDeleteCookies=function(e){var t,i;if(e==null){e=1}i=void 0;P.set("session",i);try{w("userlikeDeleteCookies: clear memory");v.memory.removeAllItems()}catch(r){t=r;w("userlikeDeleteCookies: Exception=",t)}try{w("userlikeDeleteCookies: remove expire cookie");f.remove("uslk_e")}catch(r){t=r;w("userlikeDeleteCookies: Exception=",t)}try{w("userlikeDeleteCookies: remove session cookie");f.remove("uslk_s")}catch(r){t=r;w("userlikeDeleteCookies: Exception=",t)}try{w("userlikeDeleteCookies: clear localstorage");b.clear();b.setItem("uslk_debug",true)}catch(r){t=r;w("userlikeDeleteCookies: Exception=",t)}if(e){return window.location.reload()}};this.userlikeGetFsmStateName=function(){return C("fsm").state.getName()};this.userlikeIsFsmStateFrozen=function(){return C("fsm").freeze};this.userlikeEnableDebug=function(){return C("session").set("debug",true)};this.userlikeDisableDebug=function(){return C("session").set("debug",false)};this.userlikeEnableNoState=function(){return C("userlike").nostate=true};this.userlikeDisableNoState=function(){return C("userlike").nostate=false};this.userlikeRemoteApiModeNormal=function(){return C("fsm").event("normal")};this.userlikeRemoteApiModeProactivePassive=function(e,t){return C("fsm").event("proactive_passive",{timeout:e,message:t})};this.userlikeRemoteApiModeProactivePassiveAndRegister=function(e,t){return C("fsm").event("proactive_passive_register",{timeout:e,message:t})};this.userlikeRemoteApiModeRegister=function(){return C("fsm").event("register")};this.userlikeRemoteApiResetState=function(){return C("fsm").event("reset")};this.userlikeFacebookLoginCallback=function(e){return C("fsm").event("facebookLoginResponse",e)};this.userlikeSelectValue=function(e){return C("fsm").event("select",e)};this.userlikeDebugViews=function(){var e;return(e=S())!=null?e.cycleView():void 0};this.userlikeInjectConfig=function(){var e;e=C("config");e.chat_widget_id="37256";e.id="37256";e.customer_id="2";e.operator_group_id="84970";e.widget_key="";C("session").set("inject",JSON.stringify(e));return window.location.reload()};this.userlikeInjectBubble=function(e,t,i,r,n){return C("fsm").event("injectBubble",{body:e,type:t,prefix:i,css_class:r||"injected",extract_callback:typeof n==="function"?n:void 0})};this.userlikeRemoveConfig=function(){C("session")["delete"]("inject");return window.location.reload()};this.userlikeTesting={BackendMemory:l,BackendLocalStorage:u,BackendCookie:o,BackendSessionCookie:p,BackendContainerCookie:n,BackendSessionContainerCookie:c,BackendExpireContainerCookie:s,BackendExpireCookie:a,SessionFactory:m,Storage:v,Session:d,SessionStorage:g,SessionStoragePrivacy:k,Cookies:f,fsm:C("fsm"),config:C("config")};return this.userlikeDebugLivePreview=function(){var e,t;t="a";e=function(){t=t+"a";C("fsm").event("livePreview",t);if(t.length<20){return setTimeout(e,1e3)}else{return C("fsm").event("sendMessage",t)}};return e()}};return t.exports={assignApi:function(e){return x.call(e)},App:i,Singleton:_}})()},{"./fsm.coffee":12,"./global.coffee":13,"./session.coffee":24,"./utils/cookies.coffee":28,"./utils/jq.coffee":31,"./utils/utils.coffee":36}],21:[function(e,t,i){(function(){var i,r,n,o,s,a;n=e("./utils/jq.coffee")._jq;o=e("./global.coffee")._ullog;s=e("./global.coffee").get;r=e("./utils/urlparser.coffee").UrlParser;a=e("./utils/utils.coffee").isIE11;i=function(){function Push(){}Push.prototype.send=function(e,t){var i,u;o("Push::send  url="+e);u=new r(e);if(u.isOffsite()){if(n.browser.msie||a()){return t({action:"not_supported"})}if(u.isInsecure()){o("Push::send offsite failed insecure url="+u.url());return t({action:"insecure"})}o("Push::send offsite url="+u.url());i={url:encodeURIComponent(u.url())};return n.ajaxJsonp({url:"https://api.userlike.com/api/client/iframe/?url="+encodeURIComponent(u.url()),success:function(e){if(e.status!=="200"||e.xframe){return t({action:"xframe"})}else{s("popup").injectIframe(u.url_inherit());return t({action:"open"})}},error:function(e){o("Push::send offsite failed ajax url="+u.url());return t({action:"failed"})}})}else{o("Push::send onsite url="+u.original());if(u.isSame()){o("Push::send onsite failed same url="+u.original());return t({action:"same"})}return n.ajaxGet({url:u.original(),success:function(){o("Push::send onsite navigate url="+u.original());window.location=u.original();return t({action:"navigate"})},error:function(){o("Push::send onsite failed url="+u.original());return t({action:"failed"})}})}};return Push}();return t.exports.Push=i})()},{"./global.coffee":13,"./utils/jq.coffee":31,"./utils/urlparser.coffee":35,"./utils/utils.coffee":36}],22:[function(e,t,i){(function(){var i,r,n,o,s,a,u,l,c,p;c=e("./global.coffee");l=c.get;u=c._ullog;a=e("./utils/jq.coffee")._jq;n=e("./utils/loader.coffee").Loader;r=e("./fsm.coffee").FSM;o=function(){function PropertyStore(){
this.cache={}}PropertyStore.prototype.get=function(e,t){if(e in this.cache){return t(this.cache[e])}else{return this.fetch(e,function(i){return function(r){i.cache[e]=r;return t(r)}}(this))}};PropertyStore.prototype.fetch=function(e,t){var i,r;switch(e){case"url":return t(window.location.href);case"language":i=navigator.languages?navigator.languages[0]:navigator.language||navigator.userLanguage;r=i&&i.toLowerCase().split("-")[0];return t(r);case"device":return t(c.isMobile()?"mobile":"desktop");case"user_agent":return t(window.navigator.userAgent);case"geolocation.continent":return this.get("geolocation",function(e){return t(e!=null?e.continent_code:void 0)});case"geolocation.country":return this.get("geolocation",function(e){return t(e!=null?e.country_code:void 0)});case"geolocation":return this.fetchGeolocation(function(e){return t(e)})}};PropertyStore.prototype.fetchGeolocation=function(e){var t;t="userlikeCallbackGeolocation";c.setJsonpCallback(t,e);return n.loadScript("api.userlike.com/api/chat/geoip/?callback=userlike."+t,function(){})};return PropertyStore}();i=function(){function Condition(e){var t;this.field=e.field,this.operator=e.operator,this.value=e.value;if(this.field==="geolocation"){t=this.value.split(".");this.field="geolocation."+t[0];this.value=t[1]}}Condition.prototype.match=function(e,t){return e.get(this.field,function(e){return function(i){switch(e.operator){case"equal":return t(i===e.value);case"regex":return t(RegExp(e.value).test(i));default:return t(false)}}}(this))};return Condition}();p=function(e,t,r){var n;if(!(e&&e.length>0)){return r(true)}n=e[0];return new i(n).match(t,function(i){return function(i){if(i){return p(e.slice(1),t,r)}else{return r(false)}}}(this))};s=function(){function Router(e){this.config=e;this.ruleset=this.config.ruleset||[];this.properties=new o}Router.prototype.resolve=function(){if(!this.config.enabled){u("Router::resolve router is disabled");return}return this._resolve(this.ruleset.slice())};Router.prototype._resolve=function(e){var t,i,r,n;if(!(e.length>0)){u("Router::resolve no matching widget found - falling back to default");this.fetchWidgetLoader(this.config.default_widget);return}i=e[0],r=i.rules,n=i.widget,t=i.config;return p(r,this.properties,function(i){return function(r){if(r){return i.fetchWidgetLoader(n,t)}else{return i._resolve(e.slice(1))}}}(this))};Router.prototype.fetchWidgetLoader=function(e,t){if(!e){u("Router::fetchWidgetLoader No widget specified");return}u("Router::fetchWidgetLoader Loading widget "+e.key);l("userlike")._config=void 0;l("userlike")._router=t||{};return n.loadScript(e.url,function(){})};return Router}();return t.exports={Router:s}})()},{"./fsm.coffee":12,"./global.coffee":13,"./utils/jq.coffee":31,"./utils/loader.coffee":32}],23:[function(e,t,i){(function(){var i,r,n,o,s,a;o=e("./utils/jq.coffee")._jq;s=e("./global.coffee")._ullog;n=e("./global.coffee").UserlikeLS;a=e("./global.coffee").isDebugEnabled;i=e("./utils/loader.coffee").Loader;r=function(){var e;function Screenshot(){}e=function(){return init_screenshot()};Screenshot.prototype.load=function(e){var t;if(window.Promise!=null){t={html2canvas:"dq4irj27fs462.cloudfront.net/javascripts/html2canvas-production-1005.min.js"}}else{t={es6:"dq4irj27fs462.cloudfront.net/javascripts/es6-production-1005.min.js",html2canvas:"dq4irj27fs462.cloudfront.net/javascripts/html2canvas-production-1005.min.js"}}return i.loadScripts(t,e)};Screenshot.prototype.unsupported=function(){return o.browser.msie&&parseInt(o.browser.version)<10};Screenshot.prototype.take=function(){o(".userlike").attr("data-html2canvas-ignore","");o("#userlike").attr("data-html2canvas-ignore","");return window.userlike.html2canvas([document.body],{logging:a(),proxy:"https://www.userlike.com/api/proxy/image/"})};Screenshot.prototype.crossDomainPost=function(e,t,i){var r;r=JSON.stringify(t);return o.ajaxPost({url:e,data:r,success:function(e){return i(false,JSON.parse(e))},error:function(){return i(true)}})};return Screenshot}();return t.exports.Screenshot=r})()},{"./global.coffee":13,"./utils/jq.coffee":31,"./utils/loader.coffee":32}],24:[function(e,t,i){var r={}.hasOwnProperty,n=function(e,t){for(var i in t){if(r.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e};(function(){var i,o,s,a,u,l,c,p,f,h,d,m,g,k,_,v,b,y,w,x,C,S,P,B,A,T,O,M,E;T=e("./global.coffee");y=T._ullog;C=T.get;P=e("./utils/utils.coffee").getLocation;v=T.UserlikeLS;h=e("./utils/cookies.coffee").Cookies;b=e("./utils/validator.coffee").Validator;O=e("./utils/utils.coffee").guid;f=e("./utils/utils.coffee").Base64;S=function(){var e,t;try{h.set("_uslk_test","test");t=h.get("_uslk_test")==="test";h.remove("_uslk_test");return t}catch(i){e=i;return false}};t.exports.getCookieSupport=S;A=function(){var e;try{v.setItem("_uslk_test","test");v.removeItem("_uslk_test");return true}catch(t){e=t;return false}};t.exports.getStorageSupport=A;E=function(){var e;e=window.location.hostname.match(/[a-z0-9][a-z0-9\-]+\.[a-z\.]{2,6}$/i);if(e){return"."+e[0]}else{return""}};t.exports.subDomain=E;x=function(){if(C("config").wildcard_cookie){return E()}else{}};t.exports.cookiesDomain=x;w=function(){var e,t,i,n,o,s,a,u,l,c;if(C("config").wildcard_cookie){h.remove("uslk_e");h.remove("uslk_s")}else{h.remove("uslk_e",{domain:E()});h.remove("uslk_s",{domain:E()})}e=_.expireContainerCookie;a={_uslk_uuid:"uuid",_uslk_email:"client_email",_uslk_name:"client_name",_uslk_additional01:"client_additional01_value",_uslk_additional02:"client_additional02_value",_uslk_additional03:"client_additional03_value",_uslk_visits:"visits"};for(s in a){if(!r.call(a,s))continue;o=a[s];c=h.set(s);if(c){e.setItem(o,c)}}u=["widget_config","widget_key","state","app_state","referrer","chat_meta_id","id","ct","co","created","operator_id","operator_name","operator","bootstrapped","active","page_impressions","email","name","uuid","additional01","additional02","additional03","visits"];l=[];for(t=0,i=u.length;t<i;t++){n=u[t];l.push(h.remove("_uslk_"+n,{domain:x()}))}return l};t.exports.cookieCleanup=w;B=function(e){var t,i,r;r=e!=null?e.split(";"):void 0;if(!r){return null}i=r[0];t=parseInt(r[1]);return{state:i,expires:t}};t.exports.getStateData=B;l=function(){function BackendMemory(){}BackendMemory.prototype.data={};BackendMemory.prototype.setItem=function(e,t){return this.data[e]=t};BackendMemory.prototype.getItem=function(e){var t;t=this.data[e];return t};BackendMemory.prototype.removeItem=function(e){return delete this.data[e]};BackendMemory.prototype.removeAllItems=function(){return this.data={}};return BackendMemory}();t.exports.BackendMemory=l;u=function(){function BackendLocalStorage(){}BackendLocalStorage.prototype.prefix="uslk_";BackendLocalStorage.prototype.setItem=function(e,t){if(t===""){return}return v.setItem(""+this.prefix+e,t)};BackendLocalStorage.prototype.getItem=function(e){var t;t=v.getItem(""+this.prefix+e);return t};BackendLocalStorage.prototype.removeItem=function(e){return v.removeItem(""+this.prefix+e)};BackendLocalStorage.prototype.removeAllItems=function(){var e,t;t=[];for(e in v){if(!r.call(v,e))continue;if(e.indexOf(this.prefix)>-1){t.push(v.removeItem(e))}else{t.push(void 0)}}return t};return BackendLocalStorage}();t.exports.BackendLocalStorage=u;o=function(){function BackendCookie(){}BackendCookie.prototype.prefix="uslk_";BackendCookie.prototype.domain=function(){var e;e=window.location.hostname.match(/[a-z0-9][a-z0-9\-]+\.[a-z\.]{2,6}$/i);if(e){return"."+e[0]}else{return""}}();BackendCookie.prototype.setItem=function(e,t,i){return h.set(this.prefix+e,t,{expires:i,domain:x()})};BackendCookie.prototype.getItem=function(e){var t;t=h.get(this.prefix+e);return t};BackendCookie.prototype.removeItem=function(e){return h.remove(this.prefix+e,{domain:x()})};return BackendCookie}();t.exports.BackendCookie=o;p=function(e){n(BackendSessionCookie,e);function BackendSessionCookie(){return BackendSessionCookie.__super__.constructor.apply(this,arguments)}BackendSessionCookie.prototype.setItem=function(e,t){return BackendSessionCookie.__super__.setItem.call(this,e,t)};return BackendSessionCookie}(o);t.exports.BackendSessionCookie=p;i=function(e){n(BackendContainerCookie,e);BackendContainerCookie.prototype.sep="~";function BackendContainerCookie(e){this.map=e;this.data={}}BackendContainerCookie.prototype.escape=function(e){return e};BackendContainerCookie.prototype.unescape=function(e){return e};BackendContainerCookie.prototype.serialize=function(){var e,t,i,r,n,o;n="";r=this.map;for(t=0,i=r.length;t<i;t++){e=r[t];o=this.data[e];if(o!==void 0&&o!==null){n+=""+this.escape(o)+this.sep}else{n+=this.sep}}return n};BackendContainerCookie.prototype.deserialize=function(e){var t,i,n,o,s;if(!e){return}t=e.split(this.sep);o=[];for(i in t){if(!r.call(t,i))continue;s=t[i];n=this.map[i];o.push(this.data[n]=decodeURIComponent(this.unescape(s)))}return o};BackendContainerCookie.prototype.removeItem=function(e){return this.setItem(e,void 0)};BackendContainerCookie.prototype.removeAllItems=function(){var e,t,i;t=this.data;i=[];for(e in t){if(!r.call(t,e))continue;i.push(this.removeItem(e))}return i};return BackendContainerCookie}(o);t.exports.BackendContainerCookie=i;c=function(e){n(BackendSessionContainerCookie,e);function BackendSessionContainerCookie(){this.data={};this.map=["app_state","id","duration","client_terminating","client_originating","chat_meta_id"];this.deserialize(h.get(this.prefix+"s"))}BackendSessionContainerCookie.prototype.getItem=function(e){var t;t=this.data[e];return t};BackendSessionContainerCookie.prototype.setItem=function(e,t){this.data[e]=t;return BackendSessionContainerCookie.__super__.setItem.call(this,"s",this.serialize())};return BackendSessionContainerCookie}(i);t.exports.BackendSessionContainerCookie=c;s=function(e){n(BackendExpireContainerCookie,e);function BackendExpireContainerCookie(){this.data={};this.map=["uuid","blocked","client_name","client_email","client_additional01_value","client_additional02_value","client_additional03_value","visits"];this.deserialize(h.get(this.prefix+"e"))}BackendExpireContainerCookie.prototype.getItem=function(e){var t;t=this.data[e];return t};BackendExpireContainerCookie.prototype.setItem=function(e,t){this.data[e]=t;return BackendExpireContainerCookie.__super__.setItem.call(this,"e",this.serialize(),parseInt(C("config").cookie_expire))};return BackendExpireContainerCookie}(i);t.exports.BackendExpireContainerCookie=s;a=function(e){n(BackendExpireCookie,e);function BackendExpireCookie(){return BackendExpireCookie.__super__.constructor.apply(this,arguments)}BackendExpireCookie.prototype.setItem=function(e,t){return BackendExpireCookie.__super__.setItem.call(this,e,t,parseInt(C("config").cookie_expire))};return BackendExpireCookie}(o);t.exports.BackendExpireCookie=a;m=function(){function SessionFactory(){}SessionFactory.prototype.get=function(){if(C("config").data_privacy){return new k}else{return new g}};return SessionFactory}();t.exports.SessionFactory=m;_=function(){function Storage(){}Storage.memory=new l;Storage.expireCookie=new a;Storage.sessionCookie=new p;Storage.localStorage=new u;Storage.expireContainerCookie=new s;Storage.sessionContainerCookie=new c;return Storage}();t.exports.Storage=_;M=function(e){return e==="Chat"||e==="ChatMinimized"};t.exports.isSessionActive=M;d=function(){function Session(){}Session.is_number=new RegExp("^[-]?[0-9]+[.]?[0-9]+$");Session.is_bool=new RegExp("^[01]$");Session.prototype.items={widget_key:_.localStorage,config:_.localStorage,app_key:_.localStorage,drag:_.localStorage,operator_binding:_.localStorage,goal_reached:_.localStorage,referrer:_.localStorage,ip:_.localStorage,longitude:_.localStorage,latitude:_.localStorage,operator_display_name:_.localStorage,operator_id:_.localStorage,in_service_time:_.localStorage,chatbutler_start_time:_.localStorage,chatbutler_dialog:_.localStorage,chatbutler_topic:_.localStorage,chatbutler_extra_info:_.localStorage,was_proactive:_.localStorage,inital_url:_.localStorage,chat_meta_id:_.sessionContainerCookie,page_impressions:_.localStorage,locale:_.localStorage,debug:_.localStorage,inject:_.localStorage,uuid:_.expireContainerCookie,blocked:_.expireContainerCookie,client_name:_.expireContainerCookie,client_email:_.expireContainerCookie,client_additional01_value:_.expireContainerCookie,client_additional02_value:_.expireContainerCookie,client_additional03_value:_.expireContainerCookie,visits:_.expireContainerCookie,app_state:_.sessionContainerCookie,id:_.sessionContainerCookie,duration:_.sessionContainerCookie,client_terminating:_.sessionContainerCookie,client_originating:_.sessionContainerCookie};Session.state_map={Chat:"Offline",ChatMinimized:"Offline"};Session.prototype.getCrossDomainSessionState=function(){var e,t,i,r,n;t=["config","inject","blocked"];e={};r=this.items;for(i in r){n=r[i];if(t.indexOf(i)===-1){e[i]=this.get(i)}}return e};Session.prototype.setCrossDomainSessionState=function(e){var t,i,r,n;i=e.session;r=[];for(t in i){n=i[t];if(n){r.push(this.set(t,n))}else{r.push(void 0)}}return r};Session.prototype.lookup=function(e){return this.items[e]||_.memory};Session.prototype.set=function(e,t){return this.lookup(e).setItem(e,t)};Session.prototype.get=function(e){var t;t=this.lookup(e).getItem(e);if(Session.is_number.test(t)){t=parseFloat(t)}else if(Session.is_bool.test(t)){t=parseInt(t)}return t};Session.prototype["delete"]=function(e){return this.lookup(e).removeItem(e)};Session.prototype.setIfEmpty=function(e,t){if(!this.get(e)){return this.set(e,t)}};Session.prototype.reset=function(){this.deleteConfig();this.setState(null);this.resetChatDuration();return this.resetSession()};Session.prototype.resetSession=function(){this["delete"]("id");this["delete"]("chat_meta_id");this["delete"]("was_proactive");this["delete"]("operator_display_name");this["delete"]("operator_id");this["delete"]("chatbutler_start_time");this["delete"]("chatbutler_dialog");this["delete"]("chatbutler_topic");this["delete"]("chatbutler_extra_info");return this["delete"]("chatbutler_minimized")};Session.prototype.resetChatDuration=function(){this.set("duration",0);return this["delete"]("chatbutler_start_time")};Session.prototype.resetStats=function(){this.set("client_terminating",0);return this.set("client_originating",0)};Session.prototype.deleteConfig=function(){this["delete"]("widget_key");this["delete"]("config");return this["delete"]("app_key")};Session.prototype.saveConfig=function(){this.set("widget_key",C("config").widget_key);this.set("app_key",C("config").app_key);return this.set("config",JSON.stringify(C("config")))};Session.prototype.persistDrag=function(e){return this.set("drag",JSON.stringify(e))};Session.prototype.getDrag=function(){var e;e=this.get("drag");if(!e){return}return JSON.parse(e)};Session.prototype.resetDrag=function(){return this["delete"]("drag")};Session.prototype.getConfig=function(){return{widget_key:this.get("widget_key"),app_key:this.get("app_key"),config:JSON.parse(this.get("config"))}};Session.prototype.hasClientTerminating=function(){return this.get("client_terminating")!==0};Session.prototype.hasClientOriginating=function(){return this.get("client_originating")!==0};Session.prototype.incClientTerminating=function(){return this.set("client_terminating",this.get("client_terminating")+1)};Session.prototype.incClientOriginating=function(){return this.set("client_originating",this.get("client_originating")+1)};Session.prototype.setState=function(e,t){if(t){return this.set("app_state",e+";"+(+new Date+t))}else{return this.set("app_state",e+";0")}};Session.prototype.getState=function(){var e,t,i,r,n,o,s;e=this.get("app_state");s=B(e);if(!s){return}o=s.state;t=s.expires;r=+new Date;i=t>0&&t<r;if(i){n=Session.state_map[o];this.setState(n);return n}else{return o}};Session.prototype.updateUserData=function(){var e,t,i,r,n,o;e=window.userlikeData||C("data");if(b.validateName(e!=null?(t=e.user)!=null?t.name:void 0:void 0)){this.set("client_name",e.user.name)}if(b.validateEmail((i=e.user)!=null?i.email:void 0)){this.set("client_email",e.user.email)}if(b.validateAdditional((r=e.user)!=null?r.additional01:void 0)){this.set("client_additional01_value",e.user.additional01)}if(b.validateAdditional((n=e.user)!=null?n.additional02:void 0)){this.set("client_additional02_value",e.user.additional02)}if(b.validateAdditional((o=e.user)!=null?o.additional03:void 0)){this.set("client_additional03_value",e.user.additional03)}return this.updateSegment()};Session.prototype.updateSegment=function(){var e,t;if(!C("segment_analytics_enabled")){return}try{t=this.get("uuid");return typeof analytics!=="undefined"&&analytics!==null?typeof analytics.identify==="function"?analytics.identify(t,{name:this.get("client_name"),email:this.get("client_email"),id:t}):void 0:void 0}catch(i){e=i;return y("Session::updateSegment exception=",e)}};Session.prototype.addAdditionalRegisterValues=function(e){var t,i,r,n;n=[1,2,3];for(i=0,r=n.length;i<r;i++){t=n[i];if(C("config")["register_additional0"+t+"_enabled"]){e["client_additional0"+t+"_value"]=this.get("client_additional0"+t+"_value");e["client_additional0"+t+"_name"]=C("config")["register_additional0"+t+"_name"]}}return e};Session.prototype.setGoal=function(e){var t;t=this.get("goal_reached");if(t){t=JSON.parse(t)}else{t={}}t[e]=(new Date).getTime();return this.set("goal_reached",JSON.stringify(t))};Session.prototype.getGoal=function(e){var t;t=this.get("goal_reached");if(t){t=JSON.parse(t)}else{t={}}return t[e]};Session.prototype.setOperator=function(e){var t;this.set("operator_display_name",e.display_name);this.set("operator_id",e.id);t=this.get("operator_binding");if(t){t=JSON.parse(t)}else{t={}}t[e.operator_group_id]=e.id;return this.set("operator_binding",JSON.stringify(t))};Session.prototype.getOperatorBinding=function(e){var t;t=this.get("operator_binding");if(t){t=JSON.parse(t)}else{t={}}return t[e]};Session.prototype.startChatDuration=function(){if(this.get("duration")===0){this.set("duration",+new Date);return true}};Session.prototype.getChatDuration=function(){var e;e=this.get("duration");if(e>0){return(+new Date-e)/1e3}};Session.prototype.isActive=function(){return M(this.getState())};Session.prototype.isChatbutlerActive=function(){var e;e=this.getState();return e&&e.match(/^ChatButler/)};Session.prototype.isOffline=function(){return this.getState()==="Offline"};Session.prototype.isRject=function(){return this.getState()==="ProactiveSlotReject"};Session.prototype.isInServiceTime=function(){return parseInt(this.get("in_service_time"))===1};Session.prototype.addMessageFromChatbutler=function(e){var t;this.setIfEmpty("chatbutler_dialog","[]");t=JSON.parse(this.get("chatbutler_dialog"));t.push(["ct",e,+new Date]);if(typeof t.toJSON==="function"){t.toJSON=void 0}return this.set("chatbutler_dialog",JSON.stringify(t))};Session.prototype.addMessageToChatbutler=function(e){var t;this.setIfEmpty("chatbutler_dialog","[]");t=JSON.parse(this.get("chatbutler_dialog"));t.push(["co",e,+new Date]);if(typeof t.toJSON==="function"){t.toJSON=void 0}return this.set("chatbutler_dialog",JSON.stringify(t))};Session.prototype.getChatbutlerDialog=function(){var e,t;e=this.get("chatbutler_dialog");if(e==null){return e}e=function(){var i,r,n,o;n=JSON.parse(e);o=[];for(i=0,r=n.length;i<r;i++){t=n[i];o.push({type:t[0],body:t[1],sent_at:new Date(t[2]).toISOString()})}return o}();return e};return Session}();t.exports.Session=d;g=function(e){n(SessionStorage,e);function SessionStorage(){var e;if(!this.get("uuid")){C("slot").checkSlotUser()}this.setIfEmpty("uuid",f.encode(O()));this.bootstrap();this.updateUserData();e=this.get("page_impressions")||0;this.set("page_impressions",++e)}SessionStorage.prototype.getLocation=function(){return P(function(e){return function(t){if(t){e.set("latitude",t.coords.latitude);e.set("longitude",t.coords.longitude);return C("fsm").event("locationchange")}}}(this))};SessionStorage.prototype.bootstrap=function(){var e;if(this.get("app_state")){return}y("SessionStorage::bootstrap init values");e=this.get("visits")||0;this.set("visits",++e);this.set("page_impressions",0);this.set("referrer",document.referrer);this.set("app_state",null);this.set("inital_url",document.location.href.substring(0,4096));this.resetStats();this.resetChatDuration();return this.resetDrag()};SessionStorage.prototype.packet=function(){var e,t;this.updateUserData();e={client_uuid:this.get("uuid"),client_name:this.get("client_name"),client_email:this.get("client_email"),locale:this.get("locale"),url:document.location.href.substring(0,4096),inital_url:this.get("inital_url"),title:document.title,custom:(t=window.userlikeData||C("data"))!=null?t.custom:void 0,pre_survey_option:this.get("pre_survey_option"),goal:this.get("goal"),page_impressions:this.get("page_impressions"),visits:this.get("visits"),referrer:this.get("referrer"),ip:this.get("ip"),latitude:this.get("latitude"),longitude:this.get("longitude"),duration:this.getChatDuration(),chatbutler_dialog:this.getChatbutlerDialog()};return this.addAdditionalRegisterValues(e)};return SessionStorage}(d);t.exports.SessionStorage=g;k=function(e){n(SessionStoragePrivacy,e);function SessionStoragePrivacy(){if(!this.get("uuid")){C("slot").checkSlotUser()}this.setIfEmpty("uuid",f.encode(O()));this.bootstrap();this.updateUserData()}SessionStoragePrivacy.prototype.packet=function(){var e,t;this.updateUserData();e={client_uuid:this.get("uuid"),client_name:this.get("client_name"),client_email:this.get("client_email"),pre_survey_option:this.get("pre_survey_option"),goal:this.get("goal"),url:document.location.href.substring(0,4096),custom:(t=window.userlikeData||C("data"))!=null?t.custom:void 0,duration:this.getChatDuration(),chatbutler_dialog:this.getChatbutlerDialog()};return this.addAdditionalRegisterValues(e)};SessionStoragePrivacy.prototype.getLocation=function(){};SessionStoragePrivacy.prototype.bootstrap=function(){if(this.get("app_state")){return}y("SessionStoragePrivacy::bootstrap init values");this.set("app_state",null);this.resetChatDuration();return this.resetDrag()};return SessionStoragePrivacy}(d);return t.exports.SessionStoragePrivacy=k})()},{"./global.coffee":13,"./utils/cookies.coffee":28,"./utils/utils.coffee":36,"./utils/validator.coffee":37}],25:[function(e,t,i){(function(){var i,r,n,o;i=e("./utils/loader.coffee").Loader;n=e("./global.coffee")._ullog;o=e("./global.coffee").get;r=function(){function Slot(){this.socket=null;this.requests=[];this.queue_timer=null;this.cache=null;this.timer=null}Slot.prototype.resetCache=function(){n("Slot::resetCache");return this.cache=null};Slot.prototype.setCache=function(e){n("Slot::setCache data=",e);this.cache=e;clearTimeout(this.timer);return this.timer=setTimeout(function(e){return function(){return e.resetCache()}}(this),15*1e3)};Slot.prototype.repairCallback=function(e){if(typeof window.userlike!=="object"){window.userlike={}}if(typeof window.userlike[e]!=="function"){return window.userlike[e]=o("jsonp_callbacks")[e]}};Slot.prototype.checkCache=function(e){if(this.cache){n("Slot::checkCache found callback="+e+" data=",this.cache);window.userlike[e](this.cache);return true}return false};Slot.prototype.checkButton=function(e){var t;this.repairCallback(e);if(this.checkCache(e)){return}t=o("config");return i.loadScript("api.userlike.com/api/chat/button/check/?customer_id="+t.customer_id+"&chat_widget_id="+t.chat_widget_id+"&callback=userlike."+e,function(){})};Slot.prototype.checkAvailable=function(e){var t;this.repairCallback(e);t=o("config");return i.loadScript("api.userlike.com/api/chat/slot/available/?customer_id="+t.customer_id+"&chat_widget_id="+t.chat_widget_id+"&callback=userlike."+e,function(){})};Slot.prototype.checkAvailableChatbutler=function(e,t){var r,n;this.repairCallback(t);r=o("config");n=o("session");return i.loadScript("api.userlike.com/api/chat/slot/available/chatbutler/?customer_id="+r.customer_id+"&chat_widget_id="+r.chat_widget_id+"&notify="+(e?"1":"0")+"&client_name="+encodeURIComponent(n.get("client_name"))+"&topic="+encodeURIComponent(n.get("chatbutler_topic"))+"&callback=userlike."+t,function(){})};Slot.prototype.checkProactive=function(e){var t,r;this.repairCallback(e);t=o("config");r=o("session").getOperatorBinding(t.operator_group_id);if(r){return i.loadScript("api.userlike.com/api/chat/slot/proactive/?customer_id="+t.customer_id+("&chat_widget_id="+t.chat_widget_id+"&operator_id="+r)+("&operator_group_id="+t.operator_group_id+"&callback=userlike."+e),function(){})}else{return i.loadScript("api.userlike.com/api/chat/slot/proactive/?customer_id="+t.customer_id+("&chat_widget_id="+t.chat_widget_id+"&operator_group_id="+t.operator_group_id)+("&callback=userlike."+e),function(){})}};Slot.prototype.checkPassiveConnect=function(e){var t,r,n;this.repairCallback(e);t=o("config");r=o("session").get("group_select_id");if(r){return i.loadScript("api.userlike.com/api/chat/slot/passive/?customer_id="+t.customer_id+("&chat_widget_id="+t.chat_widget_id+"&operator_group_id="+r)+("&callback=userlike."+e),function(){})}else{n=o("session").getOperatorBinding(t.operator_group_id);if(n){return i.loadScript("api.userlike.com/api/chat/slot/passive/?customer_id="+t.customer_id+("&chat_widget_id="+t.chat_widget_id+"&operator_id="+n)+("&operator_group_id="+t.operator_group_id+"&callback=userlike."+e),function(){})}else{return i.loadScript("api.userlike.com/api/chat/slot/passive/?customer_id="+t.customer_id+("&chat_widget_id="+t.chat_widget_id+"&operator_group_id="+t.operator_group_id)+("&callback=userlike."+e),function(){})}}};Slot.prototype.checkSlotStats=function(e){var t,r;this.repairCallback(r);t=o("config");r="userlikeCallback"+ +new Date;window.userlike[r]=function(t){return e(t)};return i.loadScript("api.userlike.com/api/chat/slot/stats/?customer_id="+t.customer_id+("&chat_widget_id="+t.chat_widget_id+"&callback=userlike."+r),function(){})};Slot.prototype.checkSlotUser=function(){var e,t,i;e=o("config");i="//api.userlike.com/api/chat/slot/user/?is_amd_loader="+o("is_amd_loader")+"&is_mobile="+o("is_mobile")+"&locale="+e.locale;t=document.createElement("img");t.setAttribute("src",i);t.setAttribute("width",1);t.setAttribute("height",1);t.style="width: 1px!important; height: 1px!important;";t.className="userlike-tracking-img";return document.body.appendChild(t)};Slot.prototype.checkOperatorStatus=function(e){var t;this.repairCallback(t);t="userlikeCallbackOperatorStatus";window.userlike[t]=function(t){return e(t)};return i.loadScript("api.userlike.com/api/chat/operator/status/?customer_id="+o("config").customer_id+("&callback=userlike."+t),function(){})};Slot.prototype.sendTranscript=function(e){var t;this.repairCallback(t);t="userlikeCallbackSendTranscript";window.userlike[t]=function(t){return e(t)};i.loadScript("api.userlike.com/api/client/message/chat_meta/email/?customer_id="+o("config").customer_id+("&chat_meta_id="+o("session").get("chat_meta_id"))+("&client_email="+encodeURIComponent(o("session").get("client_email")))+("&client_uuid="+encodeURIComponent(o("session").get("uuid"))+"&callback=userlike."+t),function(){});return i.loadScript("api.userlike.com/api/chat/slot/passive/?customer_id="+o("config").customer_id+"&chat_widget_id="+o("config").chat_widget_id+"&operator_group_id="+o("config").operator_group_id+"&callback=userlike."+t,function(){})};Slot.prototype.create=function(e){var t,i,r,s;t=o("config");s=o("session");n("Slot::create data=",JSON.stringify(e));if(e.group_select_id){i="create";r={customer_id:t.customer_id,chat_widget_id:t.chat_widget_id,operator_group_id:e.group_select_id,info:s.packet(),proactive:false}}else if(e.operator_id){i="direct";r={customer_id:t.customer_id,chat_widget_id:t.chat_widget_id,operator_id:e.operator_id,operator_group_id:t.operator_group_id,info:s.packet(),proactive:false}}else{i="create";r={customer_id:t.customer_id,chat_widget_id:t.chat_widget_id,operator_id:s.getOperatorBinding(t.operator_group_id),operator_group_id:t.operator_group_id,info:s.packet(),proactive:e.proactive}}n("Slot::create event="+i+" packet=",JSON.stringify(r));return this.queue("emit",i,r,function(e){return o("fsm").event("slotCreated",e)})};Slot.prototype.restart=function(e){var t,i;i=o("session");t={id:i.get("id"),info:i.packet()};n("Slot::restart packet=",t);return this.queue("emit","restart",t,function(e){return o("fsm").event("slotRestarted",e)})};Slot.prototype["switch"]=function(e){var t,i;i=o("session");t={id:i.get("id"),info:i.packet()};return this.queue("emit","switch",t,function(e){return o("fsm").event("slotSwitched",e)})};Slot.prototype.playback=function(){return this.queue("emit","playback",null,function(e){return o("fsm").event("slotPlayback",e)})};Slot.prototype.urlinfo=function(e,t){return this.queue("emit","urlinfo",e,function(e){return t(e)})};Slot.prototype.wakeup=function(){var e,t;t=o("session");e={id:t.get("id"),info:t.packet()};return this.queue("emit","wakeup",e,function(e){return o("fsm").event("wakeupDone",e)})};Slot.prototype.disconnect=function(){var e;n("Slot::disconnect");clearInterval(this.queue_timer);if(this.socket){try{this.socket.removeAllListeners("disconnect");this.socket.removeAllListeners("connect");this.socket.removeAllListeners("connecting");this.socket.removeAllListeners("reconnect");this.socket.removeAllListeners("reconnecting");this.socket.disconnect()}catch(t){e=t;n("Slot::disconnect raised an exception ",e)}return delete this.socket}};Slot.prototype.queue=function(e,t,i,r){return this.requests.push([e,t,i,r])};Slot.prototype.emit=function(e,t,i){return this.socket.emit(e,t,i)};Slot.prototype.connect=function(){var e;try{this.socket=window.userlike.userlikeIO.connect("https://chat.userlike.com:443",{path:"/chat"})}catch(t){e=t;n("Slot::connect raised an exception ",e);o("fsm").signal("error");return}this.queue_timer=setInterval(function(e){return function(){var t;if(e.requests.length){t=e.requests.shift();return e[t[0]](t[1],t[2],t[3])}}}(this),100);this.socket.on("error",function(){return o("fsm").signal("error")});this.socket.on("connect",function(){return o("fsm").signal("connect")});this.socket.on("connecting",function(e){return o("fsm").signal("connecting",e)});this.socket.on("connect_failed",function(){return o("fsm").signal("connectFailed")});this.socket.on("disconnect",function(){return o("fsm").signal("disconnect")});this.socket.on("reconnect",function(){return o("fsm").signal("reconnect")});this.socket.on("reconnecting",function(e,t){return o("fsm").signal("reconnecting",{delay:e,count:t})});this.socket.on("reconnect_failed",function(){return o("fsm").signal("reconnectFailed")});this.socket.on("chat_message",function(e){return o("fsm").event("receiveMessage",e)});this.socket.on("composing",function(e){return o("fsm").event("receiveComposing",e)});this.socket.on("paused",function(e){return o("fsm").event("receivePaused",e)});this.socket.on("block",function(){return o("fsm").signal("receiveBlock")});this.socket.on("replace",function(e){return o("fsm").event("receiveReplaceText",e)});this.socket.on("name",function(e){return o("fsm").event("receiveName",e)});this.socket.on("email",function(e){return o("fsm").event("receiveEmail",e)});this.socket.on("locale",function(e){return o("fsm").event("receiveLocale",e)});this.socket.on("additional",function(e){return o("fsm").event("receiveAdditional",e)});this.socket.on("offline",function(e){return o("fsm").signal("receiveOffline")});this.socket.on("inactive",function(e){return o("fsm").event("receiveInactive")});this.socket.on("operator_disconnect",function(e){return o("fsm").signal("receiveOperatorDisconnect")});this.socket.on("operator_reconnect",function(e){return o("fsm").signal("receiveOperatorReconnect")});this.socket.on("quit",function(e,t){t();return o("fsm").signal("receiveQuit")});this.socket.on("switch",function(){return o("fsm").signal("receiveSwitch")});this.socket.on("screenshot",function(e,t){return o("fsm").signal("receiveScreenshot",t)});this.socket.on("slot",function(e){return o("fsm").signal("receiveSlot",e)});this.socket.on("forward",function(e){
return o("fsm").signal("receiveForward",e)});this.socket.on("push",function(e,t){e.callback=t;return o("fsm").event("receivePush",e)});this.socket.on("download",function(e){return o("fsm").event("receiveDownload",e)});this.socket.on("image",function(e){return o("fsm").event("receiveImage",e)});this.socket.on("video",function(e){return o("fsm").event("receiveVideo",e)});this.socket.on("chips",function(e){return o("fsm").event("receiveChips",e)});this.socket.on("links",function(e){return o("fsm").event("receiveLinks",e)});return this.socket.on("hibernate",function(){return o("fsm").signal("receiveHibernate")})};return Slot}();return t.exports.Slot=r})()},{"./global.coffee":13,"./utils/loader.coffee":32}],26:[function(e,t,i){(function(){var i,r,n,o;o=e("./global.coffee").get;n=e("./global.coffee")._ullog;r=e("./utils/jq.coffee")._jq;i=function(){function Survey(){}Survey.prototype.send=function(e,t){var i,s;s="//api.userlike.com/api/client/survey/";n("Survey::send "+s);i={operator_id:o("session").get("operator_id"),customer_id:o("config").customer_id,chat_meta_id:o("session").get("chat_meta_id"),option:e,index:t};return r.ajaxJsonp({url:s,data:i,error:function(e){return n("Survey::sendError "+e)},success:function(e){return n("Survey::sendSuccess "+e)}})};return Survey}();return t.exports.Survey=i})()},{"./global.coffee":13,"./utils/jq.coffee":31}],27:[function(e,t,i){var r=function(e,t){for(var i in t){if(n.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e},n={}.hasOwnProperty;(function(){var i,n,o,s,a,u,l,c,p,f,h,d;f=e("./global.coffee")._ullog;h=e("./global.coffee").get;d=function(){return e("./global.coffee").get("CONTEXT")};o=function(){function TrackingFactory(e){this.widget=e}TrackingFactory.prototype.get=function(e){f("TrackingFactory type="+h("config").tracking);if(h("config").tracking==="ga"){return new u(e)}else if(h("config").tracking==="matomo"){return new c(e)}else if(h("config").tracking==="kissmetr"){return new l(e)}else if(h("config").tracking==="mixpanel"){return new p(e)}else{return new i}};return TrackingFactory}();i=function(){function TrackingDummy(){}TrackingDummy.prototype.sendOfflineMessage=function(){};TrackingDummy.prototype.offerProactiveChat=function(){};TrackingDummy.prototype.sendMessage=function(){};TrackingDummy.prototype.receiveMessage=function(){};TrackingDummy.prototype.startSlot=function(){};TrackingDummy.prototype.startProactiveSlot=function(){};return TrackingDummy}();u=function(e){r(TrackingGoogleComposite,e);function TrackingGoogleComposite(e){this.trackers=[new s(e),new a(e)]}TrackingGoogleComposite.prototype._executeTrackingFunction=function(e){var t,i,r,n,o,s;try{n=this.trackers;o=[];for(i=0,r=n.length;i<r;i++){s=n[i];o.push(s[e]())}return o}catch(a){t=a;return f("TrackingGoogleComposite::_executeTrackingFunction: exception=",t)}};TrackingGoogleComposite.prototype.sendOfflineMessage=function(){return this._executeTrackingFunction("sendOfflineMessage")};TrackingGoogleComposite.prototype.offerProactiveChat=function(){return this._executeTrackingFunction("offerProactiveChat")};TrackingGoogleComposite.prototype.sendMessage=function(){return this._executeTrackingFunction("sendMessage")};TrackingGoogleComposite.prototype.receiveMessage=function(){return this._executeTrackingFunction("receiveMessage")};TrackingGoogleComposite.prototype.startSlot=function(){return this._executeTrackingFunction("startSlot")};TrackingGoogleComposite.prototype.startProactiveSlot=function(){return this._executeTrackingFunction("startProactiveSlot")};return TrackingGoogleComposite}(i);s=function(e){r(TrackingGA,e);function TrackingGA(){return TrackingGA.__super__.constructor.apply(this,arguments)}TrackingGA.prototype.sendOfflineMessage=function(){return typeof _gaq!=="undefined"&&_gaq!==null?_gaq.push(["_trackEvent","Userlike_Chat","Offline_message_sent",""]):void 0};TrackingGA.prototype.offerProactiveChat=function(){return typeof _gaq!=="undefined"&&_gaq!==null?_gaq.push(["_trackEvent","Userlike_Chat","Proactive_chat_offered_to_webuser","Operator_"+h("session").get("operator_display_name")]):void 0};TrackingGA.prototype.sendMessage=function(){return typeof _gaq!=="undefined"&&_gaq!==null?_gaq.push(["_trackEvent","Userlike_Chat","Webuser_sent_message","Operator_"+h("session").get("operator_display_name")]):void 0};TrackingGA.prototype.receiveMessage=function(){return typeof _gaq!=="undefined"&&_gaq!==null?_gaq.push(["_trackEvent","Userlike_Chat","Webuser_received_message","Operator_"+h("session").get("operator_display_name")]):void 0};TrackingGA.prototype.startSlot=function(){return typeof _gaq!=="undefined"&&_gaq!==null?_gaq.push(["_trackEvent","Userlike_Chat","Chat_session_started","Operator_"+h("session").get("operator_display_name")]):void 0};TrackingGA.prototype.startProactiveSlot=function(){return typeof _gaq!=="undefined"&&_gaq!==null?_gaq.push(["_trackEvent","Userlike_Chat","Proactive_chat_session_started","Operator_"+h("session").get("operator_display_name")]):void 0};return TrackingGA}(i);a=function(e){r(TrackingGAUniversal,e);function TrackingGAUniversal(){return TrackingGAUniversal.__super__.constructor.apply(this,arguments)}TrackingGAUniversal.prototype.sendOfflineMessage=function(){var e;return typeof ga!=="undefined"&&ga!==null?(e=ga.getAll()[0])!=null?e.send("event","Userlike_Chat","Offline_message_sent",""):void 0:void 0};TrackingGAUniversal.prototype.offerProactiveChat=function(){var e;return typeof ga!=="undefined"&&ga!==null?(e=ga.getAll()[0])!=null?e.send("event","Userlike_Chat","Proactive_chat_offered_to_webuser","Operator_"+h("session").get("operator_display_name")):void 0:void 0};TrackingGAUniversal.prototype.sendMessage=function(){var e;return typeof ga!=="undefined"&&ga!==null?(e=ga.getAll()[0])!=null?e.send("event","Userlike_Chat","Webuser_sent_message","Operator_"+h("session").get("operator_display_name")):void 0:void 0};TrackingGAUniversal.prototype.receiveMessage=function(){var e;return typeof ga!=="undefined"&&ga!==null?(e=ga.getAll()[0])!=null?e.send("event","Userlike_Chat","Webuser_received_message","Operator_"+h("session").get("operator_display_name")):void 0:void 0};TrackingGAUniversal.prototype.startSlot=function(){var e;return typeof ga!=="undefined"&&ga!==null?(e=ga.getAll()[0])!=null?e.send("event","Userlike_Chat","Chat_session_started","Operator_"+h("session").get("operator_display_name")):void 0:void 0};TrackingGAUniversal.prototype.startProactiveSlot=function(){var e;return typeof ga!=="undefined"&&ga!==null?(e=ga.getAll()[0])!=null?e.send("event","Userlike_Chat","Proactive_chat_session_started","Operator_"+h("session").get("operator_display_name")):void 0:void 0};return TrackingGAUniversal}(i);c=function(e){r(TrackingMatomo,e);function TrackingMatomo(){return TrackingMatomo.__super__.constructor.apply(this,arguments)}TrackingMatomo.prototype.sendOfflineMessage=function(){if(typeof _paq!=="undefined"&&_paq!==null){_paq.push(["setCustomVariable",1,"Offline_message_sent",""])}return typeof _paq!=="undefined"&&_paq!==null?_paq.push(["trackPageView"]):void 0};TrackingMatomo.prototype.offerProactiveChat=function(){if(typeof _paq!=="undefined"&&_paq!==null){_paq.push(["setCustomVariable",2,"Proactive_chat_offered_to_webuser","Operator_"+h("session").get("operator_display_name")])}return typeof _paq!=="undefined"&&_paq!==null?_paq.push(["trackPageView"]):void 0};TrackingMatomo.prototype.startProactiveSlot=function(){if(typeof _paq!=="undefined"&&_paq!==null){_paq.push(["setCustomVariable",3,"Proactive_chat_session_started","Operator_"+h("session").get("operator_display_name")])}return typeof _paq!=="undefined"&&_paq!==null?_paq.push(["trackPageView"]):void 0};TrackingMatomo.prototype.startSlot=function(){if(typeof _paq!=="undefined"&&_paq!==null){_paq.push(["setCustomVariable",4,"Chat_session_started","Operator_"+h("session").get("operator_display_name")])}return typeof _paq!=="undefined"&&_paq!==null?_paq.push(["trackPageView"]):void 0};TrackingMatomo.prototype.sendMessage=function(){};TrackingMatomo.prototype.receiveMessage=function(){};return TrackingMatomo}(i);l=function(e){r(TrackingKissMetrics,e);function TrackingKissMetrics(){if(typeof _kmq!=="undefined"&&_kmq!==null){_kmq.push(["identify",h("session").get("uuid")])}}TrackingKissMetrics.prototype.sendOfflineMessage=function(){return typeof _kmq!=="undefined"&&_kmq!==null?_kmq.push(["record","Userlike_Chat",{action:"Offline_message_sent",operator:""}]):void 0};TrackingKissMetrics.prototype.offerProactiveChat=function(){return typeof _kmq!=="undefined"&&_kmq!==null?_kmq.push(["record","Userlike_Chat",{action:"Proactive_chat_offered_to_webuser",operator:h("session").get("operator_display_name")}]):void 0};TrackingKissMetrics.prototype.startProactiveSlot=function(){return typeof _kmq!=="undefined"&&_kmq!==null?_kmq.push(["record","Userlike_Chat",{action:"Proactive_chat_session_started",operator:h("session").get("operator_display_name")}]):void 0};TrackingKissMetrics.prototype.startSlot=function(){return typeof _kmq!=="undefined"&&_kmq!==null?_kmq.push(["record","Userlike_Chat",{action:"Chat_session_started",operator:h("session").get("operator_display_name")}]):void 0};TrackingKissMetrics.prototype.sendMessage=function(){return typeof _kmq!=="undefined"&&_kmq!==null?_kmq.push(["record","Userlike_Chat",{action:"Webuser_sent_message",operator:h("session").get("operator_display_name")}]):void 0};TrackingKissMetrics.prototype.receiveMessage=function(){return typeof _kmq!=="undefined"&&_kmq!==null?_kmq.push(["record","Userlike_Chat",{action:"Webuser_received_message",operator:h("session").get("operator_display_name")}]):void 0};return TrackingKissMetrics}(i);p=function(e){r(TrackingMixpanel,e);function TrackingMixpanel(){if(typeof mixpanel!=="undefined"&&mixpanel!==null){mixpanel.identify(h("session").get("uuid"))}}TrackingMixpanel.prototype.sendOfflineMessage=function(){return typeof mixpanel!=="undefined"&&mixpanel!==null?mixpanel.track("Userlike_Chat",{action:"Offline_message_sent",operator:""}):void 0};TrackingMixpanel.prototype.offerProactiveChat=function(){return typeof mixpanel!=="undefined"&&mixpanel!==null?mixpanel.track("Userlike_Chat",{action:"Proactive_chat_offered_to_webuser",operator:h("session").get("operator_display_name")}):void 0};TrackingMixpanel.prototype.startProactiveSlot=function(){return typeof mixpanel!=="undefined"&&mixpanel!==null?mixpanel.track("Userlike_Chat",{action:"Proactive_chat_session_started",operator:h("session").get("operator_display_name")}):void 0};TrackingMixpanel.prototype.startSlot=function(){return typeof mixpanel!=="undefined"&&mixpanel!==null?mixpanel.track("Userlike_Chat",{action:"Chat_session_started",operator:h("session").get("operator_display_name")}):void 0};TrackingMixpanel.prototype.sendMessage=function(){return typeof mixpanel!=="undefined"&&mixpanel!==null?mixpanel.track("Userlike_Chat",{action:"Webuser_sent_message",operator:h("session").get("operator_display_name")}):void 0};TrackingMixpanel.prototype.receiveMessage=function(){return typeof mixpanel!=="undefined"&&mixpanel!==null?mixpanel.track("Userlike_Chat",{action:"Webuser_received_message",operator:h("session").get("operator_display_name")}):void 0};return TrackingMixpanel}(i);n=function(){function TrackingEvent(){}TrackingEvent.prototype.events_chat={rating_show:true,rating_cancel:true,rating_submit:true,feedback_show:true,feedback_cancel:true,feedback_submit:true,post_survey_show:true,post_survey_cancel:true,post_survey_submit:true,facebook_like_show:true,facebook_like_cancel:true,twitter_tweet_show:true,twitter_tweet_tweeted:true,twitter_tweet_cancel:true,chat_connected:true,chat_connected_proactive:true,chat_started:true,chat_started_proactive:true,chat_quit:true,chat_window_minimzed:true,chat_window_maximized:true,chat_reconnect:true,message_operator_terminating:true,message_client_terminating:true,message_client_terminating_first:true,proactive_offer:true,proactive_reject:true};TrackingEvent.prototype.events={chat_passive_connect:true,register_show:true,register_cancel:true,register_submit:true,group_select_show:true,group_select_cancel:true,group_select_submit:true,pre_survey_show:true,pre_survey_cancel:true,pre_survey_submit:true,button_hidden:true,button_displayed:true,chat_requested:true,proactive_timer:true,proactive_unavailable:true,slot_check:true,slot_available:true,slot_unavailable:true,slot_connect:true,error_message:true,chatbutler:true,chatbutler_cancel:true,chatbutler_connect:true,chatbutler_offline_submit:true,offline_mode:true,offline_form_show:true,offline_view_show:true,offline_form_submit:true,facebook_login_timeout:true,facebook_login_status_response:true,facebook_login_success:true,facebook_login_failure:true,facebook_me_response:true,window_visible:true,window_invisible:true};TrackingEvent.prototype.globalCTX=function(){var e;e={widget_id:h("config").chat_widget_id,widget_lang:h("config").lang,operator_group_id:h("config").operator_group_id,client_uuid:h("session").get("uuid")};return e};TrackingEvent.prototype.sessionCTX=function(e){var t,i;i={client_name:h("session").get("client_name"),client_email:h("session").get("client_email"),session_id:h("session").get("id"),chat_id:void 0,custom_data:((t=window.userlikeData||h("data"))!=null?t.custom:void 0)!=null,duration:h("session").getChatDuration(),operator_id:void 0,operator_name:void 0};if(this.events_chat[e]!=null){i.operator_id=h("session").get("operator_id");i.operator_name=h("session").get("operator_display_name");i.chat_id=h("session").get("chat_meta_id")}return i};TrackingEvent.prototype.trigger=function(e){var t,i;i=window.userlikeTrackingEvent||d().userlikeTrackingEvent;if(!h("config").tracking_external){return}if(typeof i!=="function"){return}try{return i(e,this.globalCTX(),h("session").addAdditionalRegisterValues(this.sessionCTX(e)))}catch(r){t=r;return f("TrackingEvent::trigger exception=",t)}};return TrackingEvent}();return t.exports={TrackingFactory:o,TrackingDummy:i,TrackingGoogleComposite:u,TrackingGA:s,TrackingGAUniversal:a,TrackingMatomo:c,TrackingKissMetrics:l,TrackingMixpanel:p,TrackingEvent:n}})()},{"./global.coffee":13}],28:[function(e,t,i){var r={}.hasOwnProperty;(function(){return t.exports.Cookies=function(){var e,t;e=function(){var e,t,i,n;t=0;n={};while(t<arguments.length){e=arguments[t];for(i in e){if(!r.call(e,i))continue;n[i]=e[i]}t++}return n};t=function(i){var r;r=function(t,n,o){var s,a,u,l,c,p,f,h,d;d=void 0;if(arguments.length>1){o=e({path:"/"},r.defaults,o);if(typeof o.expires==="number"){l=new Date;l.setMilliseconds(l.getMilliseconds()+o.expires*864e5);o.expires=l}try{d=JSON.stringify(n);if(/^[\{\[]/.test(d)){n=d}}catch(m){u=m}if(!i.write){n=encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent)}else{n=i.write(n,t)}t=encodeURIComponent(String(t));t=t.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent);t=t.replace(/[\(\)]/g,escape);return document.cookie=[t,"=",n,o.expires&&"; expires="+o.expires.toUTCString(),o.path&&"; path="+o.path,o.domain&&"; domain="+o.domain,o.secure?"; secure":""].join("")}if(!t){d={}}a=document.cookie?document.cookie.split("; "):[];h=/(%[0-9A-Z]{2})+/g;c=0;while(c<a.length){f=a[c].split("=");p=f[0].replace(h,decodeURIComponent);s=f.slice(1).join("=");if(s.charAt(0)==='"'){s=s.slice(1,-1)}try{s=i.read?i.read(s,p):i(s,p)||s.replace(h,decodeURIComponent);if(this.json){try{s=JSON.parse(s)}catch(m){u=m}}if(t===p){d=s;break}if(!t){d[p]=s}}catch(m){u=m}c++}return d};r.get=r.set=r;r.getJSON=function(){return r.apply({json:true},[].slice.call(arguments))};r.defaults={};r.remove=function(t,i){r(t,"",e(i,{expires:-1}))};r.withConverter=t;return r};return t(function(){})}()})()},{}],29:[function(e,t,i){var r={}.hasOwnProperty;(function(){var i,n;i=e("../global.coffee").UL_EMOTICONS;n=function(){var e,t,i;n=void 0;e=void 0;t={};i=[];n=function(r,n){n=n||function(e,t,i,r){var n;t=(t+", "+i).replace(/"/g,"&quot;").replace(/</g,"&lt;");n=e.substr(0,e.indexOf(".png"));return'<div class="userlike-emoji userlike-emoji-'+n+'"></div>'};return r.replace(e,function(e,r,o){var s,a,u;u=0;a=o;s=t[o];if(!s){while(u<i.length&&!i[u].regexp.test(o)){u++}a=i[u].name;s=t[a]}if(s){return r+n(s[0],s[1],a,o)}else{return e}})};n.emoticons=function(){var n,o,s,a,u,l,c,p,f,h;o=Array.prototype.slice.call(arguments);a=typeof o[0]==="string"?o.shift():"";h=o[0];u=void 0;s=[];n=void 0;l=void 0;f=void 0;for(c=0,p=h.length;c<p;c++){u=h[c];t[u.code]=[a+u.image,u.name].concat(u.equivalents)}for(u in t){if(!r.call(t,u))continue;if(t[u].length>2){n=t[u].slice(2).concat(u);l=n.length;while(l--){n[l]=n[l].replace(/(\W)/g,"\\$1")}f=n.join("|");i.push({name:u,regexp:new RegExp("^"+f+"$")})}else{f=u.replace(/(\W)/g,"\\$1")}s.push(f)}e=new RegExp("(^|\\s)("+s.join("|")+")(?=(?:$|\\s))","g");return t};return n}();n.emoticons(i);return t.exports.emotify=n})()},{"../global.coffee":13}],30:[function(e,t,i){(function(i){var r,n,o,s,a,u,l,c,p,f,h,d,m,g,k,_,v,b,y,w,x,C,S,P;n=e("../global.coffee")._ullog;r={};u=null;g=null;k=document.title;p=null;a=null;_=window.devicePixelRatio||1;C=16*_;m={width:7,height:9,font:10*_+"px arial",colour:"#ffffff",background:"#F00",fallback:true,crossOrigin:true,abbreviate:true};S=function(){var e;e=navigator.userAgent.toLowerCase();return function(t){return e.indexOf(t)!==-1}}();s={ie:S("msie")||S("trident/7.0"),chrome:S("chrome"),webkit:S("chrome")||S("safari"),safari:S("safari")&&!S("chrome"),mozilla:S("mozilla")&&!S("chrome")&&!S("safari")};d=function(){var e,t,i,r,n,o;n=document.getElementsByTagName("link");t=0;i=n.length;e=false;while(t<i){r=n[t];o=r.getAttribute("rel")||"";if(o.match(/\bicon\b/)&&o.match(/\bshortcut\b/)){e=r}t++}if(e){return e}t=0;while(t<i){r=n[t];o=r.getAttribute("rel")||"";if(o.match(/\bicon\b/)){e=r}t++}return e};b=function(){var e,t,i,r,n,o;n=document.getElementsByTagName("link");t=document.getElementsByTagName("head")[0];i=0;r=n.length;o=[];while(i<r){e=typeof n[i]!=="undefined";if(e&&(n[i].getAttribute("rel")||"").match(/\bicon\b/)){t.removeChild(n[i])}o.push(i++)}return o};h=function(){var e;if(!g||!u){e=d();g=u=e?e.getAttribute("href"):"/favicon.ico"}return u};f=function(){if(!a){a=document.createElement("canvas");a.width=C;a.height=C}return a};x=function(e){var t;b();t=document.createElement("link");t.type="image/x-icon";t.rel="icon";t.href=e;return document.getElementsByTagName("head")[0].appendChild(t)};c=function(e,t){var r;if(!f().getContext||s.ie||s.safari){return P(e)}i=f().getContext("2d");t=t||"#000000";r=h();p=document.createElement("img");p.onload=function(){i.clearRect(0,0,C,C);i.drawImage(p,0,0,p.width,p.height,0,0,C,C);if((e+"").length>0){l(i,e,t)}return v()};if(!r.match(/^data/)&&m.crossOrigin){p.crossOrigin="anonymous"}return p.src=r};P=function(e){if(m.fallback){if((e+"").length>0){return document.title="("+e+") "+k}else{return document.title=k}}};l=function(e,t,i){var r,n,a,u,l,c,p,f;if(typeof t==="number"&&t>99&&m.abbreviate){t=o(t)}u=(t+"").length-1;f=m.width*_+6*_*u;n=m.height*_;p=C-n;a=C-f-_;r=16*_;c=16*_;l=2*_;e.font=(s.webkit?"bold ":"")+m.font;e.fillStyle=m.background;e.strokeStyle=m.background;e.lineWidth=_;e.beginPath();e.moveTo(a+l,p);e.quadraticCurveTo(a,p,a,p+l);e.lineTo(a,r-l);e.quadraticCurveTo(a,r,a+l,r);e.lineTo(c-l,r);e.quadraticCurveTo(c,r,c,r-l);e.lineTo(c,p+l);e.quadraticCurveTo(c,p,c-l,p);e.closePath();e.fill();e.beginPath();e.strokeStyle="rgba(0,0,0,0.3)";e.moveTo(a+l/2,r);e.lineTo(c-l/2,r);e.stroke();e.fillStyle=m.colour;e.textAlign="right";e.textBaseline="top";return e.fillText(t,_===2?29:15,s.mozilla?7*_:6*_)};v=function(){if(!f().getContext){return}return x(f().toDataURL())};o=function(e){var t,i;i=[["G",1e9],["M",1e6],["k",1e3]];t=0;while(t<i.length){if(e>=i[t][1]){e=y(e/i[t][1])+i[t][0];break}++t}return e};y=function(e,t){var i;i=new Number(e);return i.toFixed(t)};w=function(e,t){var i;e=e||"";try{c(e,t)}catch(r){i=r;n("Favicon::setBubble drawFavicon failed",i)}return this};return t.exports={setBubble:function(e,t){return w.call(this,e,t)}}})(this)},{"../global.coffee":13}],31:[function(e,t,i){var r={}.hasOwnProperty;(function(){var e,i,n,o,s;n=function(e,t){var r;if(t==null){t=window.document}if(typeof e==="string"){r=t.querySelectorAll(e);if(r.length===1){r=r[0]}if(r.length===0){r=null}return new i(r)}else if((e!=null?e.nodeType:void 0)!=null){return new i(e)}else{return e}};n.uaMatch=function(e){var t;e=e.toLowerCase();t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}};if(!n.browser){s=n.uaMatch(navigator.userAgent);o={};if(s.browser){o[s.browser]=true;o.version=s.version}if(o.chrome){o.webkit=true}else if(o.webkit){o.safari=true}n.browser=o}n.ajaxGet=function(e){var t;t=new XMLHttpRequest;t.open("GET",e.url,true);t.onreadystatechange=function(){if(this.readyState===4){if(this.status>=200&&this.status<400){e.success(this.responseText)}else{e.error(this.responseText)}}};return t.send()};n.ajaxPost=function(e){var t;if(n.browser.msie&&parseInt(n.browser.version)<10){t=new XDomainRequest;t.open("POST",e.url,true);t.onload=function(){return e.success(this.responseText)}}else{t=new XMLHttpRequest;t.open("POST",e.url,true);t.setRequestHeader("Content-Type","application/json; charset=UTF-8")}t.onreadystatechange=function(){if(this.readyState===4){if(this.status>=200&&this.status<400){e.success(this.responseText)}else{e.error(this.responseText)}}};t.onerror=function(){return e.error(t.responseText)};return t.send(e.data)};n.ajaxJsonp=function(t){e.init({error:t.error});return e.get(t.url,t.data,function(e){return t.success(e)})};n.windowOn=function(e,t){if(window.addEventListener!=null){return window.addEventListener(e,t)}else{return window.attachEvent("on"+e,function(){return t.call(window)})}};n.windowOff=function(e,t){if(window.removeEventListener!=null){return window.removeEventListener(e,t)}else{return window.detachEvent("on"+e,function(){return t.call(window)})}};n.windowSize=function(){return{width:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,height:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}};n.event=function(e){var t;t=e;if(t.preventDefault==null){t.preventDefault=function(){return e.returnValue=false}}if(t.stopPropagation==null){t.stopPropagation=function(){return e.returnValue=false}}if(t.target==null){t.target=window.event.target||window.event.srcElement}if(t.which==null){t.which=e.keyCode}return t};n.extend=function(e){var t,i,n;e=e||{};t=1;while(t<arguments.length){if(!arguments[t]){t++;continue}n=arguments[t];for(i in n){if(!r.call(n,i))continue;if(arguments[t].hasOwnProperty(i)){e[i]=arguments[t][i]}}t++}return e};i=function(){function UserlikeJqObj(e){this.el=e}UserlikeJqObj.prototype.get=function(e){if(this.el==null){return this}if(!e){return this.el}return this.el[e]};UserlikeJqObj.prototype.find=function(e){if(this.el==null){return this}return n(e,this.el)};UserlikeJqObj.prototype.contains=function(e){if(this.el==null){return false}e=n(e);return this.el.contains(e.el)};UserlikeJqObj.prototype._getStyle=function(e){if(getComputedStyle!=="undefined"){return getComputedStyle(this.el,null).getPropertyValue(e)}else{return this.el.currentStyle[e]}};UserlikeJqObj.prototype._toJSAttribute=function(e){var t;t=e.replace(/-([a-z])/g,function(e){return e[1].toUpperCase()});return t};UserlikeJqObj.prototype._addPxSuffix=function(e){if(typeof e!=="string"){e+="px"}return e};UserlikeJqObj.prototype.each=function(e){var t,i,r,o,s,a,u;if(this.el!=null&&!this.el.length){return e.call(this,0,this)}if(!((s=this.el)!=null?s.length:void 0)){return this}a=this.el;u=[];for(i=r=0,o=a.length;r<o;i=++r){t=a[i];u.push(e.call(this,i,n(t)))}return u};UserlikeJqObj.prototype.width=function(e){var t;if(this.el==null){return this}if(e){return this.css("width",e)}else{}t=this._getStyle("width");t.replace("px","");return parseInt(t,10)};UserlikeJqObj.prototype.outerWidth=function(){if(this.el==null){return this}return this.el.offsetWidth};UserlikeJqObj.prototype.height=function(e){var t;if(this.el==null){return this}if(e){return this.css("height",e)}else{t=this._getStyle("height");t.replace("px","");return parseInt(t,10)}};UserlikeJqObj.prototype.outerHeight=function(){if(this.el==null){return this}return this.el.offsetHeight};UserlikeJqObj.prototype.attr=function(e,t){if(this.el==null){return this}if(this.el.length){this.each(function(i,r){return r.attr(e,t)});return this}if(t==null){return this.el.getAttribute(e)}else{this.el.setAttribute(e,t)}return this};UserlikeJqObj.prototype.removeAttr=function(e){if(this.el==null){return this}if(this.el!=null){this.el.removeAttribute(e)}return this};UserlikeJqObj.prototype.css=function(e,t){var i,n;if(this.el==null){return this}if(this.el.length){this.each(function(i,r){return r.css(e,t)});return this}if(e==null){return window.getComputedStyle(this.el)}if(typeof e==="string"){if(t!=null){this.unimportize();this.el.style[this._toJSAttribute(e)]=this._addPxSuffix(t)}else{return window.getComputedStyle(this.el)[this._toJSAttribute(e)]}}if(typeof e==="object"){for(i in e){if(!r.call(e,i))continue;n=e[i];try{this.unimportize();this.el.style[this._toJSAttribute(i)]=this._addPxSuffix(n)}catch(o){}}}return this};UserlikeJqObj.prototype.offset=function(){var e;if(this.el==null){return this}e=this.el.getBoundingClientRect();return{top:e.top+document.body.scrollTop,left:e.left+document.body.scrollLeft}};UserlikeJqObj.prototype.position=function(){if(this.el==null){return this}return{left:this.el.offsetLeft,top:this.el.offsetTop}};UserlikeJqObj.prototype.removeClass=function(e){if(this.el==null){return this}if(this.el.length){this.each(function(t,i){return i.removeClass(e)});return this}if(this.el.classList){this.el.classList.remove(e)}else{this.el.className=this.el.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")}return this};UserlikeJqObj.prototype.addClass=function(e){if(this.el==null){return this}if(this.el.length){this.each(function(t,i){return i.addClass(e)});return this}if(this.el.classList){this.el.classList.add(e)}else{this.el.className+=" "+e}return this};UserlikeJqObj.prototype.hasClass=function(e){if(this.el==null){return this}if(this.el.classList){return this.el.classList.contains(e)}else{return new RegExp("(^| )"+e+"( |$)","gi").test(this.el.className)}};UserlikeJqObj.prototype.hasFocus=function(){if(this.el==null){return this}if(this.el.matches!=null){return this.el.matches(":focus")}else{return document.activeElement===this.el}};UserlikeJqObj.prototype.nodeName=function(){if(this.el==null){return this}return this.el.nodeName.toLowerCase()};UserlikeJqObj.prototype.unimportize=function(){var e,t;if(t=this.el.getAttribute("style")){e=RegExp(/! ?important/g);this.el.setAttribute("style",t.replace(e,""))}return this};UserlikeJqObj.prototype.importize=function(){var e,t;if(t=this.el.getAttribute("style")){this.unimportize();e=RegExp(/;/g);this.el.setAttribute("style",t.replace(e,"!important;"))}return this};UserlikeJqObj.prototype.on=function(e,t){if(this.el==null){return this}if(this.el.length){this.each(function(i,r){return n(r).on(e,t)});return this}if(this.el.addEventListener){this.el.addEventListener(e,t)}else{this.el.attachEvent("on"+e,function(e){return function(i){return t.call(e.el,i)}}(this))}return this};UserlikeJqObj.prototype.off=function(e,t){var i,r,n,o;if(t==null){t=null}if(this.el==null){return this}if(this.el.length){this.each(function(i,r){return r.off(e,t)});return this}if(this.el.length){o=this.el;for(r=0,n=o.length;r<n;r++){i=o[r];new UserlikeJqObj(i).off(e)}return this}if(this.el.removeEventListener){this.el.removeEventListener(e,t)}else{this.el.detachEvent("on"+e,t)}return this};UserlikeJqObj.prototype.scrollTop=function(e){if(this.el==null){return this}if(e!=null){return this.el.scrollTop=e}else{return this.el.scrollTop}};UserlikeJqObj.prototype.val=function(e){if(this.el==null){return this}if(e==null){return this.el.value}else if(typeof e==="function"){this.el.value=e(this.el.value)}else{this.el.value=e}return this};UserlikeJqObj.prototype.html=function(e){if(this.el==null){return this}if(e==null){return this.el.innerHTML}else{this.el.innerHTML=e}return this};UserlikeJqObj.prototype.text=function(e){var t;if(this.el==null){return this}if(this.el.length){this.each(function(t,i){return n(i).text(e)});return this}t=this.el.textContent!=null?"textContent":"innerText";if(e==null){return this.el[t]}else{this.el[t]=e}return this};UserlikeJqObj.prototype.focus=function(e){if(this.el==null){return this}if(e==null){this.el.focus()}else{this.on("focus",e)}return this};UserlikeJqObj.prototype.blur=function(e){if(this.el==null){return this}this.on("blur",e);return this};UserlikeJqObj.prototype.parent=function(){if(this.el==null){return this}return n(this.el.parentNode)};UserlikeJqObj.prototype.first=function(){if(this.el==null||!this.el.length){return this}return n(this.el[0])};UserlikeJqObj.prototype.after=function(e){if(this.el==null){return this}this.el.insertAdjacentHTML("afterend",e.get().outerHTML);return this};UserlikeJqObj.prototype.append=function(e){if(this.el==null){return this}e=n(e);this.el.appendChild(e.get());return this};UserlikeJqObj.prototype.prepend=function(e){if(this.el==null){return this}e=n(e);this.el.insertBefore(e.get(),this.el.firstChild);return this};UserlikeJqObj.prototype.remove=function(){if(this.el==null){return this}if(this.el.length){this.each(function(e,t){return n(t).remove()});return this}if(this.el instanceof NodeList&&!this.el.length){return}else if(this.el.parentNode!=null){this.el.parentNode.removeChild(this.el)}return this};UserlikeJqObj.prototype.empty=function(){if(this.el==null){return this}while(this.el.firstChild){this.el.removeChild(this.el.firstChild)}return this};UserlikeJqObj.prototype.last=function(){if(this.el==null){return this}if(this.el.length){return n(this.el[this.el.length-1])}else{return this}};UserlikeJqObj.prototype.data=function(e,t){var i,n,o,s,a,u,l,c,p;if(typeof e==="object"){for(s in e){if(!r.call(e,s))continue;p=e[s];this.data(s,p)}return}if(this.el==null){return this}if(!this.el.dataset){if(e&&t){return this.attr("data-"+e,t)}else if(e){return this.attr("data-"+e)}else{u="data-";i={};c=this.el.attributes;for(o=0,a=c.length;o<a;o++){n=c[o];l=n.name.indexOf(u);if(l===0){i[n.name.substr(u.length)]=this.attr(n.name)}}return i}}else{if(e!=null){e=this._toJSAttribute(e)}if(e==null){return this.el.dataset}if(t==null){return this.el.dataset[e]}else{this.el.dataset[e]=t}}return this};UserlikeJqObj.prototype.size=function(){var e;if((e=this.el)!=null?e.length:void 0){return this.el.length}else if(this.el!=null){return 1}else{return 0}};UserlikeJqObj.prototype.show=function(){if(this.el==null){return this}this.el.style.display="";return this};UserlikeJqObj.prototype.hide=function(e){var t;if(this.el==null){return this}if((t=this.el.style)!=null){t.display="none"}return this};UserlikeJqObj.prototype.fadeIn=function(e){var t,i,r;if(this.el==null){return this}i=1;this.el.style.display="";if(e.complete!=null){e.complete()}return;i=0;this.el.style.display="block";this.el.style.opacity=0;this.el.style.filter="";t=+new Date;r=function(n){return function(){i+=(new Date-t)/400;n.el.style.opacity=i;n.el.style.filter="alpha(opacity="+100*i|0+")";t=+new Date;if(i<1){window.requestAnimationFrame&&requestAnimationFrame(r)||setTimeout(r,16)}else{if((e!=null?e.complete:void 0)!=null){e.complete()}}}}(this);r();return this};UserlikeJqObj.prototype.fadeOut=function(e,t){var i,r,n;if(this.el==null){return this}r=0;this.el.style.display="none";if(t!=null){t()}return this;r=1;this.el.style.opacity=r;this.el.style.filter="";i=+new Date;n=function(e){return function(){r-=(new Date-i)/400;e.el.style.opacity=r;e.el.style.filter="alpha(opacity="+100*r|0+")";i=+new Date;
if(r<1){window.requestAnimationFrame&&requestAnimationFrame(n)||setTimeout(n,16)}else{e.el.style.display="none";if(t!=null){t()}}}}(this);n();return this};return UserlikeJqObj}();!("getComputedStyle"in this)&&(this.getComputedStyle=function(){var e,t,i,r;i=function(e,t,r){var n,o,s,a;a=e.document&&e.currentStyle[t].match(/([\d\.]+)(%|cm|em|in|mm|pc|pt|)/)||[0,0,""];o=a[1];s=a[2];n=void 0;r=!r?r:/%|em/.test(s)&&e.parentElement?i(e.parentElement,"fontSize",null):16;n=t=="fontSize"?r:/width/i.test(t)?e.clientWidth:e.clientHeight;if(s=="%"){return o/100*n}else if(s=="cm"){return o*.3937*96}else if(s=="em"){return o*r}else if(s=="in"){return o*96}else if(s=="mm"){return o*.3937*96/10}else if(s=="pc"){return o*12*96/72}else if(s=="pt"){return o*96/72}else{return o}};r=function(e,t){var i,r,n,o,s;r=t=="border"?"Width":"";s=t+"Top"+r;o=t+"Right"+r;i=t+"Bottom"+r;n=t+"Left"+r;e[t]=(e[s]==e[o]&&e[s]==e[i]&&e[s]==e[n]?[e[s]]:e[s]==e[i]&&e[n]==e[o]?[e[s],e[o]]:e[n]==e[o]?[e[s],e[o],e[i]]:[e[s],e[o],e[i],e[n]]).join(" ")};e=function(e){var t,n,o,s,a,u;a=this;t=e.currentStyle;o=i(e,"fontSize");u=function(e){return"-"+e.toLowerCase()};s=void 0;for(s in t){s=s;Array.prototype.push.call(a,s=="styleFloat"?"float":s.replace(/[A-Z]/,u));if(s=="width"){a[s]=e.offsetWidth+"px"}else if(s=="height"){a[s]=e.offsetHeight+"px"}else if(s=="styleFloat"){a.float=t[s]}else if(/margin.|padding.|border.+W/.test(s)&&a[s]!="auto"){a[s]=Math.round(i(e,s,o))+"px"}else if(/^outline/.test(s)){try{a[s]=t[s]}catch(l){n=l;a.outlineColor=t.color;a.outlineStyle=a.outlineStyle||"none";a.outlineWidth=a.outlineWidth||"0px";a.outline=[a.outlineColor,a.outlineWidth,a.outlineStyle].join(" ")}}else{a[s]=t[s]}}r(a,"margin");r(a,"padding");r(a,"border");a.fontSize=Math.round(o)+"px"};e.prototype={constructor:e,getPropertyPriority:function(){throw new Error("NotSupportedError: DOM Exception 9")},getPropertyValue:function(e){return this[e.replace(/-\w/g,function(e){return e[1].toUpperCase()})]},item:function(e){return this[e]},removeProperty:function(){throw new Error("NoModificationAllowedError: DOM Exception 7")},setProperty:function(){throw new Error("NoModificationAllowedError: DOM Exception 7")},getPropertyCSSValue:function(){throw new Error("NotSupportedError: DOM Exception 9")}};t=function getComputedStyle(t){return new e(t)};return t}(this));e=function(){var e,t,i,r,n,o,s,a;t=0;r=void 0;a=this;e={};o=function(t,i){var n,o,s;s=document.createElement("script");n=false;s.src=t;s.async=true;o=i||e.error;if(typeof o=="function"){s.onerror=function(e){o({url:t,event:e})}}s.onload=s.onreadystatechange=function(){if(!n&&(!this.readyState||this.readyState=="loaded"||this.readyState=="complete")){n=true;s.onload=s.onreadystatechange=null;if(s&&s.parentNode){s.parentNode.removeChild(s)}}};if(!r){r=document.getElementsByTagName("head")[0]}r.appendChild(s)};i=function(e){return encodeURIComponent(e)};n=function(r,n,s,u){var l,c,p;c=(r||"").indexOf("?")==-1?"?":"&";l=void 0;u=u||e["callbackName"]||"callback";p=u+"_json"+ ++t;n=n||{};for(l in n){l=l;if(n.hasOwnProperty(l)){c+=i(l)+"="+i(n[l])+"&"}}a[p]=function(e){var t;s(e);try{delete a[p]}catch(i){t=i}a[p]=null};o(r+c+u+"="+p);return p};s=function(t){e=t};return{get:n,init:s}}();return t.exports._jq=n})()},{}],32:[function(e,t,i){var r={}.hasOwnProperty;(function(){var i,n,o,s,a,u,l;n=e("../global.coffee")._ullog;s=e("../global.coffee").get;o=e("../markup.coffee");a=e("../global.coffee").isDebugEnabled;l=o.userlike_html;u=o.userlike_css;i=function(){function Loader(){}Loader.loadLib=function(e){var t;t={userlikelib:"dq4irj27fs462.cloudfront.net/javascripts/userlikelib-production-1005.min.js"};if(window.JSON==null){t.json="dq4irj27fs462.cloudfront.net/javascripts/json3-production-1005.min.js"}return Loader.loadScripts(t,function(){return e()})};Loader.loadPostRobot=function(e){var t;t={userlikelib:"dq4irj27fs462.cloudfront.net/javascripts/post-robot.ie-production-1005.min.js"};return Loader.loadScripts(t,function(){var t;t=a()?"debug":"error";if(typeof postRobot!=="undefined"&&postRobot!==null){postRobot.CONFIG.LOG_LEVEL=t}return e()})};Loader.loadScripts=function(e,t){var i,n,o,s,a,u;u=[];for(o in e){if(!r.call(e,o))continue;if(!(o in window)){u.push(e[o])}}i=u.length;if(i===0){t()}n=0;s=[];while(n<u.length){a=u[n];Loader.loadScript(a,function(){if(--i===0){return t()}});s.push(n++)}return s};Loader.loadScript=function(e,t){var i;n("loadScript: "+e);i=document.createElement("script");i.setAttribute("charset","UTF-8");i.setAttribute("type","text/javascript");i.setAttribute("src","https://"+e);i.onload=i.onreadystatechange=function(){var e;e=i.readyState;if(!t.done&&(!e||/loaded|complete/.test(e))){t.done=true;return t()}};return document.getElementsByTagName("head")[0].appendChild(i)};Loader.loadFont=function(e){var t,i,r;try{window.WebFontConfig={google:{families:[e]}};r=document.createElement("script");r.src="https://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js";r.type="text/javascript";r.async="true";i=document.getElementsByTagName("script")[0];return i.parentNode.insertBefore(r,i)}catch(o){t=o;return n("Error loading font ",t)}};Loader.loadTheme=function(){var e;e=document.createElement("style");e.type="text/css";if(e.styleSheet){e.styleSheet.cssText=s("config").theme_css}else{e.appendChild(document.createTextNode(s("config").theme_css))}return document.getElementsByTagName("head")[0].appendChild(e)};Loader.loadCustomCss=function(){var e;e=document.createElement("style");e.type="text/css";if(e.styleSheet){e.styleSheet.cssText=s("config").custom_css}else{e.appendChild(document.createTextNode(s("config").custom_css))}return document.getElementsByTagName("head")[0].appendChild(e)};Loader.injectMarkup=function(e){var t,i,r,o,a,u,c,p;if(e==null){e=function(){}}t=document.createElement("div");t.className="userlike";t.innerHTML=l.replace(/{{POWEREDBY_LINK}}/g,s("config").poweredby_link).replace(/{{POWEREDBY_SLOGAN}}/g,s("config").poweredby_slogan);u=["body","frameset","head"];for(r=0,o=u.length;r<o;r++){a=u[r];i=document.getElementsByTagName(a);if(i[0]){i[0].appendChild(t);break}}c=100;p=function(){if((!document.getElementById("userlike")||!document.getElementById("userlike-offline-message-submit")||!document.getElementById("userlike-register-submit"))&&c--){n("Popup::inject wait");return window.setTimeout(p,300)}else{return e(!document.getElementById("userlike")&&!document.getElementById("userlike-offline-message-submit")&&!document.getElementById("userlike-register-submit"))}};return p()};return Loader}();return t.exports.Loader=i})()},{"../global.coffee":13,"../markup.coffee":16}],33:[function(e,t,i){(function(){var e;e=function(){function MessageParser(){}MessageParser.words_yes={en_US:["yes","yeah","yep","sure","ya"],ar:[],cs_CZ:["ano"],da_DK:["ja"],nl_NL:["ja"],fi_FI:["kyllä","kylla"],fr_FR:["oui"],ks_KS:["jo","ja"],de_DE:["jo","ja"],id_ID:["ya"],is_IS:["já","ja"],it_IT:["sì","si"],ja_JP:["はい","hai"],ko_KR:["예","ye","네","ne","응","eung","어","eo"],no_NO:["ja"],es_ES:["no"],ru_RU:["да","da"],pl_PL:["tak"],pt_BR:["sim","o sim"],pt_PT:["sim","o sim"],sv_SE:["ja"],th_TH:["ใช่","chai","châi","ครับ","kráp","krap","ค่ะ","kâ","ka"],tr_TR:["evet"],zh_CN:["是","shì","shi"]};MessageParser.words_no={en_US:["no","nope","nah"],ar:[],cs_CZ:["ne"],da_DK:["nej"],nl_NL:["nee"],fi_FI:["ei"],fr_FR:["non"],ks_KS:["nä","enä","nein"],de_DE:["nein","nee","nö"],id_ID:["tidak"],is_IS:["nei"],it_IT:["no"],ja_JP:["いいえ","īe"],ko_KR:["아니요","aniyo","아니","ani"],no_NO:["nei"],es_ES:["si","sí"],ru_RU:["нет","net","nyet","не́ту"],pl_PL:["nie"],pt_BR:["não","nao"],pt_PT:["não","nao"],sv_SE:["nej"],th_TH:["ไม่ใช่","mai chai","mâi châi"],tr_TR:["hayır","hayir"],zh_CN:["没有","méi yŏu","mei you","不是的","bù shì de","bu shi de","不要","bù yào","bu yao"]};MessageParser.interpunction="!.,¡?¿:;…–-";MessageParser.setLocale=function(e){return this.locale=e};MessageParser.checkMatch=function(e,t){var i,r;i=t[this.locale];if(!i){i=t["en_US"]}r=new RegExp("^[s"+this.interpunction+"]*("+t[this.locale].join("|")+")[s"+this.interpunction+"]*$","i");return r.test(e)};MessageParser.checkYes=function(e){return this.checkMatch(e,this.words_yes)};MessageParser.checkNo=function(e){return this.checkMatch(e,this.words_no)};return MessageParser}();return t.exports.MessageParser=e})()},{}],34:[function(e,t,i){(function(){var i,r,n,o,s;s=e("../global.coffee").get;o=e("../global.coffee")._ullog;n=function(){function SoundFactory(){}SoundFactory.prototype.get=function(){var e;e=s("config");if(e.audio_message_received||e.audio_message_sent){return new i}else{return new r}};return SoundFactory}();r=function(){function SoundDummy(){}SoundDummy.prototype.play=function(){};SoundDummy.prototype.load=function(){};return SoundDummy}();i=function(){function Sound(){}Sound.prototype.load=function(){var e;this.audio={message_received:document.createElement("audio"),message_sent:document.createElement("audio")};try{this.audio.message_received.setAttribute("src","//dq4irj27fs462.cloudfront.net/sounds/message_received.mp3");return this.audio.message_sent.setAttribute("src","//dq4irj27fs462.cloudfront.net/sounds/message_sent.mp3")}catch(t){e=t;return o("Sound::load raised an exception ",e)}};Sound.prototype.play=function(e){var t;try{if(s("config")["audio_"+e]){return this.audio[e].play()}}catch(i){t=i;return o("Sound::play raised an exception ",t)}};return Sound}();return t.exports={SoundFactory:n,SoundDummy:r,Sound:i}})()},{"../global.coffee":13}],35:[function(e,t,i){(function(){var e;e=function(){function UrlParser(e,t){this.source=e;this.force_absolute=t!=null?t:false;if(this.isAbsolute()){this.addHttp()}this.loc=window.location;this.e=document.createElement("a");this.e.href=this.source}UrlParser.prototype.original=function(){return this.source};UrlParser.prototype.url=function(){var e;e=document.createElement("a");e.href=this.source;return e.href};UrlParser.prototype.url_inherit=function(){var e;e=document.createElement("a");e.href=this.source;e.protocol=this.loc.protocol;return e.href};UrlParser.prototype.url_http=function(){var e;e=document.createElement("a");e.href=this.source;e.protocol="http:";return e.href};UrlParser.prototype.url_https=function(){var e;e=document.createElement("a");e.href=this.source;e.protocol="https:";return e.href};UrlParser.prototype.isSame=function(){return this.loc.href===this.e.href};UrlParser.prototype.isInsecure=function(){return this.e.protocol==="http:"&&this.loc.protocol==="https:"};UrlParser.prototype.isOffsite=function(){return this.loc.hostname!==this.e.hostname&&this.e.hostname.length>0};UrlParser.prototype.isAbsolute=function(){var e;return this.force_absolute||((e=this.source.match(/(www\.|https?:\/\/)/))!=null?e.length:void 0)>0};UrlParser.prototype.addHttp=function(){if(!/^(?:f|ht)tps?\:\/\//.test(this.source)){return this.source="http://"+this.source}};return UrlParser}();return i.UrlParser=e})()},{}],36:[function(e,t,i){var r={}.hasOwnProperty;(function(){var i,n,o,s,a,u,l,c,p,f,h,d,m,g,k,_,v,b,y,w,x,C,S,P,B,A,T,O,M,E,j,R,F,I,V,q,D,z,U,L,N,W,H,G,J,Q,K,Y,X,$,Z;m=e("../global.coffee").get;n=e("./jq.coffee")._jq;o=e("../global.coffee")._ullog;i=function(){function Base64(){}Base64.key="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";Base64.encode=function(e){var t,i,r,n,o,s,a,u,l;l="";t=void 0;i=void 0;r=void 0;n=void 0;o=void 0;s=void 0;a=void 0;u=0;e=Base64._utf8_encode(e);while(u<e.length){t=e.charCodeAt(u++);i=e.charCodeAt(u++);r=e.charCodeAt(u++);n=t>>2;o=(t&3)<<4|i>>4;s=(i&15)<<2|r>>6;a=r&63;if(isNaN(i)){s=a=64}else{if(isNaN(r)){a=64}}l=l+Base64.key.charAt(n)+Base64.key.charAt(o)+Base64.key.charAt(s)+Base64.key.charAt(a)}return l};Base64.decode=function(e){var t,i,r,n,o,s,a,u,l;l="";u=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(u<e.length){n=Base64.key.indexOf(e.charAt(u++));o=Base64.key.indexOf(e.charAt(u++));s=Base64.key.indexOf(e.charAt(u++));a=Base64.key.indexOf(e.charAt(u++));t=n<<2|o>>4;i=(o&15)<<4|s>>2;r=(s&3)<<6|a;l=l+String.fromCharCode(t);if(s!==64){l=l+String.fromCharCode(i)}if(a!==64){l=l+String.fromCharCode(r)}}l=Base64._utf8_decode(l);return l};Base64._utf8_encode=function(e){var t,i,r;e=e.replace(/\r\n/g,"\n");r="";i=0;while(i<e.length){t=e.charCodeAt(i);if(t<128){r+=String.fromCharCode(t)}else if(t>127&&t<2048){r+=String.fromCharCode(t>>6|192);r+=String.fromCharCode(t&63|128)}else{r+=String.fromCharCode(t>>12|224);r+=String.fromCharCode(t>>6&63|128);r+=String.fromCharCode(t&63|128)}i++}return r};Base64._utf8_decode=function(e){var t,i,r,n,o,s;s="";o=0;t=i=r=0;while(o<e.length){t=e.charCodeAt(o);if(t<128){s+=String.fromCharCode(t);o++}else if(t>191&&t<224){r=e.charCodeAt(o+1);s+=String.fromCharCode((t&31)<<6|r&63);o+=2}else{r=e.charCodeAt(o+1);n=e.charCodeAt(o+2);s+=String.fromCharCode((t&15)<<12|(r&63)<<6|n&63);o+=3}}return s};return Base64}();C=function(e){var t,i,r;i=0;if(e.length===0){return i}r=0;while(r<e.length){t=e.charCodeAt(r);i=(i<<5)-i+t;i=i&i;r++}return i};$=function(e){var t;t=i.decode(e);return JSON.parse(t)};l=function(e){if(e==null){e=""}if(typeof e!=="string"){e=e.toString()}return e.charAt(0).toUpperCase()+e.slice(1)};P=function(e,t,i){var r;r=e;if(t>0){r=e.substring(0,t)+i+e.substring(t,e.length)}else{r=i+e}return r};_=function(e){var t,i;t=0;i=0;if(!e){e=window.event}if(e.pageX||e.pageY){t=e.pageX;i=e.pageY}else if(e.clientX||e.clientY){t=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;i=e.clientY+document.body.scrollTop+document.documentElement.scrollTop}return{x:t,y:i}};V=function(){var e,t;t=function(e){var t,i,r,o;r=void 0;o=void 0;i=void 0;t=n(e);r=t.offset();o=t.width();i=t.height();return[[r.left,r.left+o],[r.top,r.top+i]]};e=function(e,t){var i,r;i=void 0;r=void 0;i=e[0]<t[0]?e:t;r=e[0]<t[0]?t:e;return i[1]>r[0]||i[0]===r[0]};return function(i,r){var n,o;n=t(i);o=t(r);return e(n[0],o[0])&&e(n[1],o[1])}}();f=function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")};A=function(e){var t,i;try{i=e.getBoundingClientRect();return i.top>=0&&i.left>=0&&i.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&i.right<=(window.innerWidth||document.documentElement.clientWidth)}catch(r){t=r;return true}};N=function(e){var t,i;try{t=/rgba\( *(\d+)[^,]*, *(\d+)[^,]*, *(\d+)[^,]*,.*\)/.exec(e);return"rgb("+t[1]+","+t[2]+","+t[3]+")"}catch(r){i=r;o("rgb: parse error",i);return"rgb(0,174,239)"}};G=function(e){var t,i;i=[];for(t in e){if(e.hasOwnProperty(t)&&e[t]){i.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]))}}return i.join("&")};U=new RegExp("(?:\\s|^)"+"(?:(?:https?|ftps?)://)?"+"(?:"+"(?!(?:10|127)(?:\\.\\d{1,3}){3})"+"(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})"+"(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})"+"(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])"+"(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}"+"(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))"+"|"+"(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)"+"(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*"+"(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))"+")"+"(?::\\d{2,5})?"+"(?:/\\S*)?"+"(?!\\S)","i");z=/(?:\s|^)(([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,})+)(?!\S)/gi;j=function(e){var t;t=new RegExp("^"+U.source);return t.test(Y(e))};T=function(){var e,t;if(navigator.appName==="Netscape"){e=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})");if(e.exec(navigator.userAgent)!==null){t=parseInt(parseFloat(RegExp.$1));return t===11}}return false};O=function(){return n.browser.msie&&parseInt(n.browser.version,10)<9};B=function(){return navigator.userAgent.toLowerCase().indexOf("android")>-1};M=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;E=M&&/OS 11_/.test(navigator.userAgent);w=function(){var e,t,i,r,n,s;r=navigator.userAgent.toLowerCase();n={msie:7,android:4.2,applewebkit:534.24};for(e in n){s=n[e];i=new RegExp(e+"(?:\\s|/)(\\d+(?:\\.\\d+)?)");t=i.exec(r);if((t!=null?t.length:void 0)>1&&parseFloat(t[1])<=s){o("hasIconFontSupport=false");return false}}o("hasIconFontSupport=true");return true};x=false;a="animation";R="";c="Webkit Moz O ms Khtml".split(" ");q="";p=document.createElement("div");if(p.style.animationName!==void 0){x=true}if(x===false){S=0;while(S<c.length){if(p.style[c[S]+"AnimationName"]!==void 0){q=c[S];a=q+"Animation";R="-"+q.toLowerCase()+"-";x=true;break}S++}}g=function(e){var t;t=n(e);if(t.val()===t.data("default")){return void 0}else{return t.val()}};s=function(e){var t,i,r,n,o,s;n=10;s=0;t=e;i=-1;o=t.parent().outerHeight();r=parseInt(t.css("font-size"));while(s<n){if(t.outerHeight()>o){r--;t.css({"font-size":r+"px"}).importize()}else if(t.outerHeight()<o){i=r;r++;t.css({"font-size":r+"px"}).importize()}else{s=n}s++}if(i>0){return t.css({"font-size":i-1+"px"}).importize()}};u=function(e,t){var i,o,s,a,u,l;if(t==null){t="#userlike"}if(e==null){e=m("config").theme}if(typeof t==="string"){t=n(t)}for(s in e){if(!r.call(e,s))continue;l=e[s];u=s.replace(/_/g,"-");t.find(".userlike-theme-"+u+".userlike-theme-bg").css({"background-color":l});t.find(".userlike-theme-"+u+".userlike-theme-text").css({color:l});a=/(rgba)\(([0-9]+),\s{0,}([0-9]+),\s{0,}([0-9]+),\s{0,}([.0-9]+)\)/;if(typeof l==="string"){o=l.replace(a,"rgba($2,$3,$4,1.0)");i=l.replace(a,"rgba($2,$3,$4,0.0)");t.find(".userlike-theme-"+u+".userlike-theme-gradient").css({background:"-webkit-linear-gradient("+i+" 0%, "+o+" 100%)"})}}return t.find(".userlike-symbol-has-active-state").on("mouseenter",function(t){if(!n(this).hasClass("userlike-disabled")){return n(this).css({color:e.icon_active_color})}}).on("mouseleave",function(t){if(!n(this).hasClass("userlike-disabled")){return n(this).css({color:e.icon_default_color})}})};b=function(e){var t,i;i=new RegExp(/rgba?\(\s?(\d+)\s?,\s?(\d+)\s?,\s?(\d+)\s?(?:,\s?([0-9\.]+)\s?)?/i);t=i.exec(e);return Math.round((parseInt(t[1])*299+parseInt(t[2])*587+parseInt(t[3])*114)/1e3)};Q=function(e,t){var i,r;r="userlike-symbol-fallback-";i=b(t);if(i>200&&i<240){return e.addClass(r+"black")}else if(i<80||i>=240){return e.addClass(r+"gray")}else{return e.addClass(r+"white")}};W=function(e){var t,i;t=void 0;i=void 0;e=e.replace(" ","");if(e.indexOf("rgba(")!==0){return e}t=/(.*?)rgba\((\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([0-9]+\.[0-9]+|\d)\s*\)/;i=t.exec(e);if(!i){return e}return"rgb("+i.splice(2,3).join(",")+")"};k=function(e){if(navigator.geolocation){o("getLocation request");return navigator.geolocation.getCurrentPosition(function(t){o("SessionStorage::getLocation response=",t);return e(t)})}else{return o("getLocation not supported")}};J=function(e){if(e>0){n("#userlike-message-badge-count").text(e);return n("#userlike-message-badge").addClass("userlike-show")}else{return n("#userlike-message-badge").removeClass("userlike-show")}};Z=function(e){var t,i;i="iframe_blacklist_"+C(e.url);t=e.status!=="200"||e.xframe;o("userlikeCallbackIframeCheck: url="+e.url+" status="+e.status+" xframe="+e.xframe+" blacklist="+t);return m("session").set(i,t)};v=function(){if(window.orientation!=null){if(window.orientation===0){return"portrait"}else{return"landscape"}}if(window.innerHeight>window.innerWidth){return"portrait"}else{return"landscape"}};I=function(e,t){var i,r;r=n.windowSize();i=r.width+r.height;return n.windowOn("resize",function(){var r;r=n.windowSize();if(r.width+r.height!==i){o("onKeyboardStateChange: showFunction");return e()}else{o("onKeyboardStateChange: hideFunction");return t()}})};Y=function(e){if(e.trim!=null){return e.trim()}return e.replace(/^[\s\uFEFF]+|[\s\uFEFF]+$/g,"")};X=function(e){var t;if(typeof e==="string"){t=e.indexOf("px");return parseInt(e.substr(0,t),10)}return e};h=function(e){return(""+e).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};K=function(e){return(""+e).replace(/(<([^>]+)>)/gi,"")};d=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};L=function(e){return(""+e).replace(/(?:\r\n|\r|\n)/g,"<br />")};D=function(){var e,t,i,r,n;i={};r=window.location.search.substring(1);n=r.split("&");S=0;while(S<n.length){t=n[S].split("=");e=t[0];if(e.indexOf("_uslk_")===0){i[e.replace("_uslk_","")]=decodeURIComponent(t[1])}S++}return i};y=function(){return H()+H()+"-"+H()+"-"+H()+"-"+H()+"-"+H()+H()+H()};H=function(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)};F=function(e,t){var i,n,o;n=[];for(i in t){if(!r.call(t,i))continue;o=t[i];if(typeof e[i]==="object"&&typeof o==="object"){n.push(F(e[i],o))}else{n.push(e[i]=o)}}return n};return t.exports={Base64:i,hashCode:C,unpack:$,capitalize:l,insertStringAtIndex:P,getMousePosition:_,overlapDiv:V,escapeRegExp:f,isElementInViewport:A,rgb:N,serialize:G,regex_url_full:U,regex_email:z,isURL:j,isIE11:T,isIE8:O,isIOS:M,isIOS11:E,isAndroid:B,hasIconFontSupport:w,has_css_animation_support:x,getInput:g,adjustFontSize:s,applyTheme:u,getRgbBrightness:b,setIconClassByColor:Q,rgbaToRgb:W,getLocation:k,setBadge:J,userlikeCallbackIframeCheck:Z,getOrientation:v,onKeyboardStateChange:I,trim:Y,trimPxSuffix:X,escapeTag:h,stripTag:K,escapeUrl:d,replaceNewlines:L,queryString:D,guid:y,mergeObjects:F}})()},{"../global.coffee":13,"./jq.coffee":31}],37:[function(e,t,i){(function(){var e;e=function(){function Validator(){}Validator.validateEmail=function(e){var t;if(!e||e.length>100){return false}t=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,})+$/i;return t.test(e)};Validator.validateName=function(e){if(!e||e.length>100){return false}return true};Validator.validateAdditional=function(e){if(!e||e.length>100){return false}return true};return Validator}();return t.exports.Validator=e})()},{}],38:[function(e,t,i){var r=function(e,t){return function(){return e.apply(t,arguments)}},n=function(e,t){for(var i in t){if(o.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e},o={}.hasOwnProperty;(function(){var i,o,s,a,u,l,c,p,f,h,d,m,g,k,_,v,b,y,w,x,C;s=e("./view.coffee").View;o=e("../utils/urlparser.coffee").UrlParser;l=e("../utils/utils.coffee").applyTheme;_=e("../utils/utils.coffee").isURL;h=e("../utils/utils.coffee").getInput;d=e("../utils/utils.coffee").getOrientation;x=e("../utils/favicon.coffee").setBubble;g=e("../utils/utils.coffee").has_css_animation_support;f=e("../global.coffee").get;v=e("../global.coffee").isMobile();k=e("../utils/utils.coffee").isIOS11;c=e("../utils/emotify.coffee").emotify;m=function(){return f("preview")};b=e("../utils/utils.coffee").onKeyboardStateChange;w=e("../utils/utils.coffee").rgb;a=e("../utils/jq.coffee")._jq;u=e("../global.coffee")._ullog;p=e("../utils/utils.coffee").escapeTag;y=e("../utils/utils.coffee").replaceNewlines;C=e("../utils/utils.coffee").trim;i=function(e){n(ChatView,e);ChatView.preview_connecting_timeout=null;ChatView.prototype.height=568;ChatView.prototype.is_minimizable=true;ChatView.prototype.update_timestamps_interval=null;ChatView.prototype.chat_state_message=null;ChatView.prototype.incoming_messages=0;function ChatView(e){this.onChipSelected=r(this.onChipSelected,this);this.scrollDownDelayed=r(this.scrollDownDelayed,this);this.onKeyboardShow=r(this.onKeyboardShow,this);this.destroyPreviewBubble=r(this.destroyPreviewBubble,this);this.removePreviewBubble=r(this.removePreviewBubble,this);this.renderPreviewBubble=r(this.renderPreviewBubble,this);this.onFocusOutMobile=r(this.onFocusOutMobile,this);this.onFocusInMobile=r(this.onFocusInMobile,this);ChatView.__super__.constructor.call(this,e)}ChatView.prototype.el=function(){return a("#userlike-chat")};ChatView.prototype.setupDomReferences=function(){this.$popup=a("#userlike-popup");this.$input=a("#userlike-chat-textarea");this.$content=a("#userlike-chat-content");return this.$};ChatView.prototype.scrollDown=function(e){var t;if(e==null){e=0}t=1e4;if(e){return setTimeout(function(e){return function(){return e.$content.scrollTop(t)}}(this),e)}else{return this.$content.scrollTop(t)}};ChatView.prototype._hasChangedPreviewText=function(e){var t,i,r;if(((t=userlike.preview)!=null?(i=t.last_config)!=null?i[e]:void 0:void 0)==null){return false}return((r=userlike.preview)!=null?r.last_config[e]:void 0)!==this.config[e]};ChatView.prototype.showPreview=function(){var e,t,i;if(!this.$popup){this.setupDomReferences()}this.setMomentLocale();this.reset();i=false;t=true;if(this._hasChangedPreviewText("connect_message")){this.showConnectView();t=false}else if(this._hasChangedPreviewText("quit_message")){this.setOperatorInfo(this.config.operator_display_name,true,this.config.quit_message);t=false}else if(this._hasChangedPreviewText("default_message")){this.sendWelcomeMessage(this.config.operator_display_name)}else if(this._hasChangedPreviewText("status_message")){i=true}else if(this._hasChangedPreviewText("inactivity_message")){this.sendInactivityMessage(this.config.operator_display_name)}else if(this._hasChangedPreviewText("forward_message")){this.sendForwardMessage(this.config.operator_display_name)}else if(this._hasChangedPreviewText("proactive_message")){this.sendProactiveMessage(this.config.operator_display_name)}else if(this._hasChangedPreviewText("feedback_download_link")){this.receiveDownload(null,"http://www.userlike.com/static/web/downloads/userlike-logo-800px-transparent.png","Userlike")}else{i=true}if(t){this.displaySlot(this.config.operator_display_name,this.config.operator_url_image,this.config.status_message)}if(i){this.sendWelcomeMessage(this.config.operator_display_name);this.addMessage("co","Hello, I have a Question");this.addMessage("ct","Hey, how can i help you?")}this.show();if((e=userlike.preview)!=null){e.last_config=this.config}return this};ChatView.prototype.reset=function(){if(this.$content!=null){return this.$content.html("")}};ChatView.prototype.show=function(e){var t;if(e==null){e=function(){}}this.setMomentLocale();if(!this.$popup){this.setupDomReferences()}if(this.update_timestamps_interval==null){this.startTimstampUpdate()}t=f("popup");t.clearInput("#userlike-chat-textarea",C(this.config.default_textarea));t.transition(this,function(t){return function(){t.scrollDown();return e()}}(this));if(v){b(this.onKeyboardShow,this.onKeyboardHide);this.$input.on("focusin",this.onFocusInMobile);this.$input.on("focusout",this.onFocusOutMobile);a(document).on("focusout",this.onKeyboardHide)}else{this.registerOperatorZoom()}a(document).on("webkitfullscreenchange",function(e){return function(){return e.scrollDown(1)}}(this));a(document).on("mozfullscreenchange",function(e){return function(){return e.scrollDown(1)}}(this));return a(document).on("fullscreenChange",function(e){return function(){return e.scrollDown(1)}}(this))};ChatView.prototype.onFocusInMobile=function(){var e,t;e="1px solid "+this.config.theme.symbol_active_color;this.$input.css({"border-top":e,"border-bottom":e});t=this.$input.get(0);if(t!=null){if(typeof t.scrollIntoViewIfNeeded==="function"){t.scrollIntoViewIfNeeded()}}if(k){this.renderPreviewBubble();return this.$input.on("input",this.renderPreviewBubble)}};ChatView.prototype.onFocusOutMobile=function(){this.$input.css("border","none");if(k){return this.destroyPreviewBubble()}};ChatView.prototype.renderPreviewBubble=function(){var e,t,i,r,n,o,s;s=h("#userlike-chat-textarea");o=s;s=s.replace(/\r/g,"");r=this.createMessageContainer("preview",s);this.removePreviewBubble();this.$content.prepend(r);i=r.position().top;t=i+r.height();e=this.$content.height()/2;n=t-e;return this.$content.scrollTop(n)};ChatView.prototype.removePreviewBubble=function(){var e;e=this.$content.find(".userlike-message-container-preview");return e.remove()};ChatView.prototype.destroyPreviewBubble=function(){this.removePreviewBubble();this.$input.off("input",this.renderPreviewBubble);return this.scrollDown()};ChatView.prototype.onKeyboardShow=function(){this.scrollDownDelayed();if(d()==="landscape"){return a("#userlike").addClass("userlike-chat-textarea-fullscreen")}else{return a("#userlike").removeClass("userlike-chat-textarea-fullscreen")}};ChatView.prototype.onKeyboardHide=function(){return a("#userlike").removeClass("userlike-chat-textarea-fullscreen")};ChatView.prototype.scrollDownDelayed=function(){return window.setTimeout(function(e){return function(){var t;e.scrollDown();if(v){t=e.$input.get(0);return t!=null?typeof t.scrollIntoViewIfNeeded==="function"?t.scrollIntoViewIfNeeded():void 0:void 0}}}(this),250)};ChatView.prototype.registerOperatorZoom=function(){var e,t,i;i=null;e=a("#userlike-subheader-operator-image-zoomed");t=function(t){clearTimeout(i);i=null;if(t){return e.addClass("userlike-zoom")}else{return e.removeClass("userlike-zoom")}};a("#userlike-subheader-operator-image-zoomed").on("click",function(){var i;i=!e.hasClass("userlike-zoom");return t(i)});a("#userlike-subheader-operator-image-zoomed").on("mouseenter",function(){if(i===null){return i=setTimeout(function(){return t(true)},500)}});return a("#userlike-subheader-operator-image-zoomed").on("mouseleave",function(){return t(false)})};ChatView.prototype.setMomentLocale=function(){userlike.moment.locale(this.config.locale.replace("_","-"));return this.updateTimestamps()};ChatView.prototype.startTimstampUpdate=function(){return this.update_timestamps_interval=window.setInterval(this.updateTimestamps,1e4)};ChatView.prototype.updateTimestamps=function(){var e;e=a(".userlike-message-timestamp");if(e.size()){return e.each(function(e,t){var i;i=t.data("timestamp");if(i!=null){return t.text(userlike.moment(parseInt(i,10)).fromNow())}})}};ChatView.prototype.stopTimstampUpdate=function(){return window.clearInterval(this.update_timestamps_interval)};ChatView.prototype.isEmptyMessage=function(e){if(e==null){return false}return e.charCodeAt(0)===10};ChatView.prototype.isValidMessage=function(e){var t,i;if(e==null){return false}t=e.length>0;i=e.length<=5e3;return t&&i};ChatView.prototype.sendMessage=function(){var e,t,i;i=h("#userlike-chat-textarea");if(this.isEmptyMessage(i)){a("#userlike-chat-textarea").val("");i=h("#userlike-chat-textarea")}if(!this.isValidMessage(i)){return}this.checkAndRequestURLInfo(i,"co");e=i;this.$input.val("");i=i.replace(/\r/g,"");this.addMessage("co",i);if(v){if((t=this.$input.get())!=null){if(typeof t.blur==="function"){t.blur()}}this.scrollDownDelayed()}return e};ChatView.prototype.onChipSelected=function(e){return f("fsm").event("chipSelected",e.currentTarget.getAttribute("data-message"))};ChatView.prototype.sendChipMessage=function(e){this.addMessage("co",e);return e};ChatView.prototype.sendWelcomeMessage=function(e){var t,i;t=e||f("session").get("operator_display_name");i=this.replaceName(this.config.default_message,t);i=this.replaceInfo(i);return this.addMessage("ct",i)};ChatView.prototype.sendProactiveMessage=function(e){var t,i;t=e||f("session").get("operator_display_name");i=this.replaceName(this.config.proactive_message,t);i=this.replaceInfo(i);return this.addMessage("ct",i)};ChatView.prototype.sendForwardMessage=function(e){var t,i;t=e||f("session").get("operator_display_name");i=this.replaceName(this.config.forward_message,t);i=this.replaceInfo(i);return this.addMessage("ct",i)};ChatView.prototype.sendQuitMessage=function(e){var t,i;t=e||f("session").get("operator_display_name");i=this.replaceName(this.config.quit_message,t);i=this.replaceInfo(i);return this.addMessage("ct",i)};ChatView.prototype.sendInactivityMessage=function(e){var t,i;t=e||f("session").get("operator_display_name");i=this.replaceName(this.config.quit_message,t);i=this.replaceInfo(i);return this.addMessage("ct",this.config.inactivity_message)};ChatView.prototype.sendChatbutlerMessage=function(e){var t;t=this.replaceName(f("config")["chatbutler_"+e],this.config.chatbutler_name);t=this.replaceInfo(t);this.addMessage("ct",t);return f("session").addMessageFromChatbutler(t)};ChatView.prototype.sendChatbutlerMessageDelayed=function(e,t,i){return setTimeout(function(t){return function(){t.sendChatbutlerMessage(e);return i()}}(this),t)};ChatView.prototype.setOperatorInfo=function(e,t,i){if(e&&i){return this.setInfoBar({text:this.replaceName(i,e),url:t})}};ChatView.prototype.showOperatorQuitInfo=function(){this.setOperatorInfo(f("session").get("operator_display_name"),true,f("config").quit_message);
return this.removeChatState()};ChatView.prototype.setProactiveMessage=function(e){if(e!=null){return this.config.proactive_message=e}};ChatView.prototype.checkAndRequestURLInfo=function(e,t){var i;if(!e){return}if(_(e)){e=C(e).split("#")[0];i=new o(e,true);return f("fsm").event("requestUrlInfo",{url:i.url(),callback:function(e){return function(i){return e.addUrlInfo(i,t)}}(this)})}};ChatView.prototype.addUrlInfo=function(e,t){var i,r,n,s,u,l,c;if(e==null){return}u="";i="";if(e.title){u='<br><br><div class="userlike-url-info-title">'+e.title+"</div><br>"}if(e.description){i=e.description+"<br>"}n=this.replaceUrls(e.url);l=n+"\n"+u+"\n"+i+'\n<a style="color: '+w(this.config.theme.link_text_color)+'" href="'+e.url+'" target="_blank">\n<img class="userlike-url-info-image "src="'+e.screenshot_url+'" alt="'+e.url+'">\n</a>';c=this.createMessageContainer(t,l);s=null;r=a(".userlike-message-container-"+t);r.each(function(t,i){var r,n;r=C(i.find(".userlike-chat-message-text").text());n=new o(r,true);if(n.url()===e.url){return i.html(c.html())}});this.scrollDown(2e3);return this.scrollDown(5e3)};ChatView.prototype.replaceName=function(e,t){var i;i=new RegExp("{{name}}","g");t=t||"";return e.replace(i,t)};ChatView.prototype.replaceInfo=function(e){var t,i,r,n,o,s;o=["client_name","client_email","loc_city","loc_country"];for(r=0,n=o.length;r<n;r++){i=o[r];t=new RegExp("{{"+i+"}}","g");s=f("session").get(i)||"";e=e.replace(t,s)}return e};ChatView.prototype.replaceText=function(e){var t,i;i=this.$content.find(".userlike-message-bubble-ct").get();if(i.length){if(this.chat_state_message!=null){t=a(i[i.length-2])}else{t=a(i[i.length-1])}}else if(i!=null){t=a(i)}return t!=null?t.find(".userlike-chat-message-text").text(t.text().replace(e[1],e[2])):void 0};ChatView.prototype.checkIframe=function(e){if(f("session").get("iframe_blacklist_"+hashCode(e))!==void 0){return}return Loader.loadScript("api.userlike.com/api/client/iframe/?url="+encodeURIComponent(e)+"&callback=userlikeCallbackIframeCheck",function(){})};ChatView.prototype.addMessage=function(e,t,i){var r;t=p(t);t=c(t.replace(/&gt;/g,">"));t=this.replaceLinks(t);t=y(t);this.addToContent(e,t,i);if(e==="co"||((r=userlike.preview)!=null?r.isActive():void 0)){this.incoming_messages=0}else{this.incoming_messages++}f("button").setBadge(this.incoming_messages);if(this.config.favicon_enabled){return x(this.incoming_messages)}};ChatView.prototype.resetIncomingMessages=function(){this.incoming_messages=0;f("button").setBadge(this.incoming_messages);if(this.config.favicon_enabled){return x(this.incoming_messages)}};ChatView.prototype.createMessageContainer=function(e,t,i){var r,n,o,s,u;n=a(document.createElement("div")).addClass("userlike-message-container").addClass("userlike-message-container-"+e);r=a(document.createElement("div")).addClass("userlike-message-bubble").addClass("userlike-message-bubble-"+e).addClass("userlike-theme-bg");o=a(document.createElement("span")).addClass("userlike-chat-message-text").addClass("userlike-theme-text").addClass("userlike-theme-chat-text-color-1").html(t);r.append(o);if(e==="co"||e==="preview"){r.addClass("userlike-theme-chat-bg-color-2")}else if(e==="ct"){r.addClass("userlike-theme-chat-bg-color-1")}if(i==null){i=+new Date}u=userlike.moment(i);s=a(document.createElement("div")).addClass("userlike-message-timestamp").addClass("userlike-message-timestamp-"+e).addClass("userlike-theme-text").addClass("userlike-theme-link-text-color").data("timestamp",+u).text(u.fromNow());n.append(r).append(s);l(this.config.theme,n);return n};ChatView.prototype.addToContent=function(e,t,i){var r,n;if(e==="ct"){this.removeChatState()}n=this.createMessageContainer(e,t,i);this.$content.append(n);r=this.$content.find(".userlike-message-container-preview").size();if(!r){this.scrollDown()}return n};ChatView.prototype.injectInContent=function(e){var t;if(e.type==="ct"){this.removeChatState()}t=this.createMessageContainer(e.type,e.body);t.addClass(e.css_class);this.$content.append(t);this.scrollDown();return t};ChatView.prototype.showChatState=function(e){var t;this.removeChatState();t=null;if(g){t='<div id="userlike-spinner">\n  <div id="userlike-bounce-1" class="userlike-theme-bg userlike-theme-symbol-active-color"></div>\n  <div id="userlike-bounce-2" class="userlike-theme-bg userlike-theme-symbol-active-color"></div>\n  <div id="userlike-bounce-3" class="userlike-theme-bg userlike-theme-symbol-active-color"></div>\n</div>'}else{t='<img id="userlike-spinner" src="//dq4irj27fs462.cloudfront.net/images/spinner.gif"/>'}this.chat_state_message=this.addToContent("ct",t);return window.setTimeout(function(e){return function(){return e.removeChatState()}}(this),6e4)};ChatView.prototype.removeChatState=function(){if(this.chat_state_message!=null){this.chat_state_message.remove();return this.chat_state_message=null}};ChatView.prototype.showInfoMessage=function(e){this.removeChatState();this.addToContent("ct",e);return this.scrollDown()};ChatView.prototype.receiveDownload=function(e,t,i){return this.addToContent("ct",this.config.feedback_download_link+(' <a style="color: '+w(this.config.theme.link_text_color)+'" href="'+t+'" target="_blank">'+i+"</a>"))};ChatView.prototype.receiveImage=function(e,t,i,r){var n,o,s;t=p(t);i=i!=null?p(i):t;if(r!=null){n=p(r);o='<a href="'+t+'" target="_blank" rel="noopener noreferrer"><img class="userlike-command-image" src="'+i+'" alt="'+n+'"/></a><br>'+n}else{o='<a href="'+t+'" target="_blank" rel="noopener noreferrer"><img class="userlike-command-image" src="'+i+'"/></a>'}s=this.addToContent("ct",o);return s.find("img").el.onload=function(e){return function(){return e.scrollDown(1)}}(this)};ChatView.prototype.receiveVideo=function(e,t,i,r){var n,o,s;t=p(t);o=i!=null?' poster="'+p(i)+'"':"";n='<video controls class="userlike-command-video" width="100%" src="'+t+'"'+o+"></video>";if(r!=null){r=p(r);n=n+"<br>"+r}s=this.addToContent("ct",n);return s.find("video").el.onloadeddata=function(e){return function(){return e.scrollDown(1)}}(this)};ChatView.prototype.receiveChips=function(e,t){var i,r,n,o,s;s=function(e){return function(t){var i,r;r=p(t.title);r=c(r.replace(/&gt;/g,">"));r=e.replaceLinks(r);r=y(r);i=t.message!=null?p(t.message):r;return'<li class="userlike-command-chips-choice">\n   <button class="userlike-theme-bg\n                  userlike-theme-chat-bg-color-2"\n           data-message="'+i+'">\n     <span class="userlike-theme-text\n                  userlike-theme-chat-text-color-1">'+r+"</span>\n  </button>\n</li>"}}(this);n='<ul class="userlike-command-chips">'+function(){var t,r,n;n=[];for(t=0,r=e.length;t<r;t++){i=e[t];n.push(s(i))}return n}().join("")+"</ul>";if(t!=null){r=p(t);n=r+"<br><br>"+n}o=this.addToContent("ct",n);return o.find("button").on("click",function(e){return function(t){return e.onChipSelected(t)}}(this))};ChatView.prototype.receiveLinks=function(e){var t,i,r;t=function(){var t,i,n;n=[];for(t=0,i=e.length;t<i;t++){r=e[t];n.push(this.replaceLinkOffsite(r.target,r.title))}return n}.call(this);i=t.join("<br>");if(i){return this.addToContent("ct",i)}};ChatView.prototype.receiveMessage=function(e,t,i){this.checkAndRequestURLInfo(t,"ct");return this.addMessage("ct",t,i)};ChatView.prototype.stateComposing=function(e){return this.showChatState()};ChatView.prototype.statePaused=function(e){return this.removeChatState()};ChatView.prototype.showConnectView=function(e){if(e==null){e=function(){}}a("#userlike-subheader-operator-image-zoomed").hide();return this.show(function(t){return function(){t.setInfoBar({text:t.config.connect_message});t.scrollDown();return e()}}(this))};ChatView.prototype.displaySlot=function(e,t,i,r){if(r==null){r=function(){}}if(!this.$popup){this.setupDomReferences()}if(i){this.setOperatorInfo(e,t,i)}u("displaySlot name="+e+" status_text="+i+" url="+t);this.scrollDown();this.enable();return r()};ChatView.prototype.setInfoBar=function(e){if(e.text){a("#userlike-subheader-operator-info-text").text(e.text)}if(e.url){a(".userlike-operator-connect-spinner").hide();if(typeof e.url==="string"){a("#userlike-subheader-operator-image").attr("src",e.url);a("#userlike-subheader-operator-image-zoomed").attr("src",e.url);a("#userlike-subheader-operator-image-zoomed").show()}return a("#userlike-subheader-operator-image").show()}else{if(g){a("#userlike-subheader-operator-image").hide();return a(".userlike-operator-connect-spinner").show()}else{a("#userlike-subheader-operator-image").show();return a("#userlike-subheader-operator-image").attr("src","//dq4irj27fs462.cloudfront.net/images/spinner.gif")}}};ChatView.prototype.playbackSlot=function(e){var t,i,r,n;this.reset();n=[];for(i=0,r=e.length;i<r;i++){t=e[i];if(t.type==="co"){this.checkAndRequestURLInfo(t.body,"co");n.push(this.addMessage("co",t.body,t.sent_at))}else if(t.type==="ct"){this.checkAndRequestURLInfo(t.body,"ct");n.push(this.addMessage("ct",t.body,t.sent_at))}else if(t.type==="op"){n.push(this.displaySlot(f("session").get("operator_display_name"),t.url,f("config").status_message))}else if(t.type==="command"){if(t.command_type==="image"){n.push(this.receiveImage(t.from,t.data.url,t.data.thumbnail_url,t.data.title))}else if(t.command_type==="chips"){n.push(this.receiveChips(t.data.choices,t.data.title))}else if(t.command_type==="video"){n.push(this.receiveVideo(t.from,t.data.url,t.data.thumbnail_url,t.data.title))}else if(t.command_type==="links"){n.push(this.receiveLinks(t.data.links))}else{n.push(void 0)}}else{n.push(void 0)}}return n};ChatView.prototype.disable=function(){return a("#userlikeTextarea").attr("disabled","disabled")};ChatView.prototype.enable=function(){return a("#userlikeTextarea").removeAttr("disabled")};ChatView.prototype.destroy=function(){a("#userlike-subheader-operator-image-zoomed").hide();return this.stopTimstampUpdate()};return ChatView}(s);return t.exports.ChatView=i})()},{"../global.coffee":13,"../utils/emotify.coffee":29,"../utils/favicon.coffee":30,"../utils/jq.coffee":31,"../utils/urlparser.coffee":35,"../utils/utils.coffee":36,"./view.coffee":55}],39:[function(e,t,i){var r=function(e,t){for(var i in t){if(n.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e},n={}.hasOwnProperty;(function(){var i,n,o,s;n=e("./view.coffee").View;s=e("../global.coffee").get;o=e("../utils/jq.coffee")._jq;i=function(e){r(DisclaimerView,e);function DisclaimerView(){return DisclaimerView.__super__.constructor.apply(this,arguments)}DisclaimerView.prototype.el=function(){return o("#userlike-disclaimer")};DisclaimerView.prototype.setupEventHandlers=function(){return o("#userlike-disclaimer-submit").on("click",function(e){s("fsm").event("submitButton");o.event(e).preventDefault();return o.event(e).stopPropagation()})};DisclaimerView.prototype.show=function(e){this.setupEventHandlers();this.highlightText("#userlike-disclaimer-headline",this.config.disclaimer_headline);this.highlightText("#userlike-disclaimer-text",this.config.disclaimer_text);o("#userlike-disclaimer-headline").text(this.config.disclaimer_headline);o("#userlike-disclaimer-text").text(this.config.disclaimer_text);return s("popup").transition(this,e)};DisclaimerView.prototype.destroy=function(){return o("#userlike-disclaimer-submit").off("click")};return DisclaimerView}(n);return t.exports.DisclaimerView=i})()},{"../global.coffee":13,"../utils/jq.coffee":31,"./view.coffee":55}],40:[function(e,t,i){var r=function(e,t){return function(){return e.apply(t,arguments)}},n=function(e,t){for(var i in t){if(o.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e},o={}.hasOwnProperty;(function(){var i,o,s,a,u,l,c;s=e("./view.coffee").View;u=e("../utils/utils.coffee").applyTheme;l=e("../utils/utils.coffee").insertStringAtIndex;a=e("../utils/jq.coffee")._jq;c=e("../utils/utils.coffee").trim;o=e("../global.coffee").UL_EMOTICONS;i=function(e){n(EmojiPopoverView,e);EmojiPopoverView.prototype.el_id="userlike-emoji-button";EmojiPopoverView.prototype.is_visible=false;EmojiPopoverView.prototype.textarea_caret_postion=null;EmojiPopoverView.prototype.template='<span style="cursor:pointer" data-code="$$code">\n  <div title="$$name" class="userlike-emoji userlike-emoji-$$class_name"></div>\n</span>';function EmojiPopoverView(e){if(e==null){e={}}this.onDocumentClick=r(this.onDocumentClick,this);this.onEmojiClick=r(this.onEmojiClick,this);this.onPopupButtonClick=r(this.onPopupButtonClick,this);EmojiPopoverView.__super__.constructor.call(this,e);this.$el=a("#"+this.el_id);this.$el.on("click",this.onPopupButtonClick);this.$emoji_list=null}EmojiPopoverView.prototype.onPopupButtonClick=function(){if(this.is_visible){return this.hide()}else{return this.show()}};EmojiPopoverView.prototype.onEmojiClick=function(e){var t;e=a.event(e);t=a(e.target).parent().data("code");if(t==null){return}a("#userlike-chat-textarea").val(function(e){return function(i){var r,n,o;r=i.replace(c(e.config.default_textarea),"");n=" "+t+" ";o=l(r,e.textarea_caret_postion,n);e.textarea_caret_postion+=n.length;return o}}(this));return this.hide()};EmojiPopoverView.prototype.onDocumentClick=function(e){var t,i;e=a.event(e);i=a(e.target);t=a(".userlike-drag");if(!i.contains(this.$emoji_list)&&!i.contains(this.$el)&&!i.hasClass("userlike-drag")){return this.hide()}};EmojiPopoverView.prototype.show=function(){this.textarea_caret_postion=document.querySelector("#userlike-chat-textarea").selectionStart;if(this.$emoji_list!=null){a("#userlike-emoji-list").addClass("show")}else{this.compileTemplate();a("#userlike-chat-scroll-textarea").append(this.$emoji_list);u(null,"#userlike-chat-scroll-textarea");a("#userlike-emoji-list .userlike-emoji").on("click",this.onEmojiClick)}a(document).on("click",this.onDocumentClick);return this.is_visible=true};EmojiPopoverView.prototype.hide=function(){a("#userlike-emoji-list").removeClass("show");a("#userlike-chat-textarea").focus();document.querySelector("#userlike-chat-textarea").selectionStart=this.textarea_caret_postion;document.querySelector("#userlike-chat-textarea").selectionEnd=this.textarea_caret_postion;a(document).off("click",this.onDocumentClick);return this.is_visible=false};EmojiPopoverView.prototype.compileTemplate=function(){var e,t,i,r,n,s;i=document.createElement("div");i.id="userlike-emoji-list";i.className="show userlike-theme-bg userlike-theme-window-bg-color";s="";for(r=0,n=o.length;r<n;r++){t=o[r];e=t.image.substr(0,t.image.indexOf(".png"));s+=this.template.replace("$$code",t.code).replace("$$name",t.name).replace("$$class_name",e)}i.innerHTML=s;this.$emoji_list=a(i);return this.$emoji_list};return EmojiPopoverView}(s);return t.exports.EmojiPopoverView=i})()},{"../global.coffee":13,"../utils/jq.coffee":31,"../utils/utils.coffee":36,"./view.coffee":55}],41:[function(e,t,i){var r=function(e,t){for(var i in t){if(n.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e},n={}.hasOwnProperty;(function(){var i,n,o,s,a;n=e("./view.coffee").View;a=e("../global.coffee").isMobile();s=e("../global.coffee")._ullog;o=e("../utils/jq.coffee")._jq;i=function(e){r(FacebookView,e);function FacebookView(){return FacebookView.__super__.constructor.apply(this,arguments)}FacebookView.prototype.el=function(){return o("#userlike-facebook-like")};FacebookView.prototype.show=function(e){var t,i,r,n,u,l,c,p;o("#userlike-facebook-like-headline").text(this.config.facebook_like_headline);if(a){u="button"}else{u=this.config.facebook_like_layout}if(o("#userlike-facebook-like-button").size()===0){i='<div id="userlike-facebook-like-button" class="fb-like" ';i+='data-send="false" data-width="200" ';i+='data-show-faces="'+this.config.facebook_like_show_faces+'" ';i+='data-action="'+this.config.facebook_like_verb+'" ';if((c=this.config.facebook_like_href)!=null?c.length:void 0){i+='data-href="'+this.config.facebook_like_href+'" '}i+='data-layout="'+u+'">';o("#userlike-facebook-like-wrapper").html(i);s("Popup::showFacebookLikeView: b="+i);try{FB.XFBML.parse(o("#userlike").get());n=16;l=100;p=0;t=function(){var e,i,r;p++;i=o("#userlike-facebook-like-button > span").width();if(i>0){e=o("#userlike-facebook-like").width();r=o("#userlike-facebook-like-headline").width();if(e-r<i){return o(".userlike-facebook-like").addClass("userlike-break-facebook-line")}else{o("#userlike-facebook-like-headline").css("max-width","100%");return o("#userlike-facebook-like-headline").css("width",e-i-n).importize()}}else if(p<l){return window.setTimeout(t,100)}};t()}catch(f){r=f;s("showFacebookLikeView: err=",r)}}return this.el().show()};return FacebookView}(n);return t.exports.FacebookView=i})()},{"../global.coffee":13,"../utils/jq.coffee":31,"./view.coffee":55}],42:[function(e,t,i){var r=function(e,t){for(var i in t){if(n.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e},n={}.hasOwnProperty;(function(){var i,n,o,s,a;n=e("./view.coffee").View;a=e("../utils/utils.coffee").getInput;s=e("../global.coffee").get;o=e("../utils/jq.coffee")._jq;i=function(e){r(FeedbackView,e);function FeedbackView(){return FeedbackView.__super__.constructor.apply(this,arguments)}FeedbackView.prototype.el=function(){return o("#userlike-feedback")};FeedbackView.prototype.setupEventHandlers=function(){o("#userlike-feedback-textarea").on("keyup",function(e){return function(){if(a("#userlike-feedback-textarea")){return e.enableSubmit()}}}(this));return o("#userlike-feedback-submit").on("click",function(e){if(!o("#userlike-feedback-submit").hasClass("userlike-disabed")){s("fsm").event("submitButton");o.event(e).preventDefault();return o.event(e).stopPropagation()}})};FeedbackView.prototype.show=function(e){this.el().show();this.setupEventHandlers();return s("popup").clearInput("#userlike-feedback-textarea",this.config.feedback_default_textarea,this.config.feedback_default_textarea)};FeedbackView.prototype.hasInputValue=function(){var e;e=o("#userlike-feedback-textarea");return e.val()!==e.data("default")&&e.val()!==""};FeedbackView.prototype.isValid=function(){return this.validateFeedback()};FeedbackView.prototype.validateFeedback=function(){var e;e=a("#userlike-feedback-textarea");if(!e){return false}if(e.length>1e4){o("#userlike-feedback-textarea").focus();return false}return true};FeedbackView.prototype.getFeedback=function(){return a("#userlike-feedback-textarea")};FeedbackView.prototype.enableSubmit=function(){return o("#userlike-feedback-submit").removeClass("userlike-disabled")};FeedbackView.prototype.destroy=function(){o("#userlike-feedback-submit").off("click");return o("#userlike-feedback-textarea").on("keyup")};return FeedbackView}(n);return t.exports.FeedbackView=i})()},{"../global.coffee":13,"../utils/jq.coffee":31,"../utils/utils.coffee":36,"./view.coffee":55}],43:[function(e,t,i){var r=function(e,t){for(var i in t){if(n.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e},n={}.hasOwnProperty;(function(){var i,n,o,s,a,u,l;s=e("./view.coffee").View;o=e("./rating.coffee").RatingView;n=e("./feedback.coffee").FeedbackView;l=e("../global.coffee");u=e("../global.coffee").get;a=e("../utils/jq.coffee")._jq;i=function(e){r(FeedbackRatingCompositeView,e);function FeedbackRatingCompositeView(){return FeedbackRatingCompositeView.__super__.constructor.apply(this,arguments)}FeedbackRatingCompositeView.prototype.el=function(){return a("#userlike-feedback-rating-composite")};FeedbackRatingCompositeView.prototype.show=function(e){if(e==null){e=function(){}}return u("popup").transition(this,function(t){return function(){var i,r;l.set("rating_view",r=new o({config:t.config}));u("rating_view").show();l.set("feedback_view",i=new n({config:t.config}));u("feedback_view").show();return e()}}(this))};FeedbackRatingCompositeView.prototype.isValid=function(){return u("rating_view").isValid()||u("feedback_view").isValid()};return FeedbackRatingCompositeView}(s);return t.exports.FeedbackRatingCompositeView=i})()},{"../global.coffee":13,"../utils/jq.coffee":31,"./feedback.coffee":42,"./rating.coffee":49,"./view.coffee":55}],44:[function(e,t,i){var r=function(e,t){for(var i in t){if(n.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e},n={}.hasOwnProperty;(function(){var i,n,o,s;n=e("./view.coffee").View;s=e("../global.coffee").get;o=e("../utils/jq.coffee")._jq;i=function(e){r(GroupSelectView,e);function GroupSelectView(){return GroupSelectView.__super__.constructor.apply(this,arguments)}GroupSelectView.prototype.el=function(){return o("#userlike-group-select")};GroupSelectView.prototype.show=function(e,t){var i;if(e==null){e=this.config.data}i=this.el();this.highlightText("#userlike-group-select-headline",this.config.group_select_headline);o("#userlike-group-select-headline").text(this.config.group_select_headline);i.find(".userlike-fieldset-wrapper>div").each(function(t,i){var r,n,s;r=o(i);if(t<e.available.length){n=e.available[t];r.find("input").removeAttr("checked");r.find(".userlike-label").text(n.name);if((s=n.first)!=null?s.url_image:void 0){r.find(".userlike-group-select-operator-image").attr("src",n.first.url_image);r.find("input").hide()}else{r.find(".userlike-group-select-operator-image").hide();r.find("input").show()}return r.show()}else{return r.hide()}});return s("popup").transition(this,t)};return GroupSelectView}(n);return t.exports.GroupSelectView=i})()},{"../global.coffee":13,"../utils/jq.coffee":31,"./view.coffee":55}],45:[function(e,t,i){var r=function(e,t){for(var i in t){if(n.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e},n={}.hasOwnProperty;(function(){var i,n,o,s;n=e("./view.coffee").View;s=e("../global.coffee").get;o=e("../utils/jq.coffee")._jq;i=function(e){r(IdleView,e);function IdleView(){return IdleView.__super__.constructor.apply(this,arguments)}IdleView.prototype.height=216;IdleView.prototype.el=function(){return o("#userlike-idle")};IdleView.prototype.show=function(e){return s("popup").transition(this,e)};return IdleView}(n);return t.exports.IdleView=i})()},{"../global.coffee":13,"../utils/jq.coffee":31,"./view.coffee":55}],46:[function(e,t,i){var r=function(e,t){for(var i in t){if(n.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e},n={}.hasOwnProperty;(function(){var i,n,o,s,a,u;n=e("./view.coffee").View;u=e("../global.coffee").get;o=e("../utils/jq.coffee")._jq;s=e("../global.coffee")._ullog;a=e("../utils/utils.coffee").escapeTag;i=function(e){r(MessageView,e);function MessageView(){return MessageView.__super__.constructor.apply(this,arguments)}MessageView.prototype.height=216;MessageView.prototype.el=function(){return o("#userlike-message")};MessageView.prototype.show=function(e,t,i){s("Popup::showMessageView "+e);this.highlightText("#userlike-message-headline",e);if(i){o("#userlike-message-headline").html(e)}else{o("#userlike-message-headline").text(e)}return u("popup").transition(this,t)};MessageView.prototype.showTransfer=function(e){u("popup").reset();return this.show(this.config.feedback_transfer,e)};MessageView.prototype.showExpiredWarning=function(e){u("popup").reset();return this.show(this.config.feedback_expired,e)};MessageView.prototype.showNoCookiesMessage=function(e){u("popup").reset();return this.show(this.config.feedback_no_cookies,e)};MessageView.prototype.showErrorMessage=function(e){u("popup").reset();return this.show(this.config.feedback_error,e)};MessageView.prototype.showOfflineMessageFeedback=function(e){var t;u("popup").reset();t=this.replaceLinks(a(this.config.feedback_offline));return this.show(t,e,true)};MessageView.prototype.destroy=function(){return o("#userlike-message-headline").text("")};return MessageView}(n);return t.exports.MessageView=i})()},{"../global.coffee":13,"../utils/jq.coffee":31,"../utils/utils.coffee":36,"./view.coffee":55}],47:[function(e,t,i){var r=function(e,t){for(var i in t){if(n.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e},n={}.hasOwnProperty;(function(){var i,n,o,s,a,u,l,c,p,f,h,d;s=e("./view.coffee").View;o=e("../utils/validator.coffee").Validator;n=e("../screenshot.coffee").Screenshot;c=e("../global.coffee").get;h=e("../global.coffee").isMobile();u=e("../global.coffee")._ullog;a=e("../utils/jq.coffee")._jq;p=e("../utils/utils.coffee").getInput;d=e("../utils/utils.coffee").onKeyboardStateChange;f=e("../utils/utils.coffee").getOrientation;l=e("../utils/utils.coffee").escapeTag;i=function(e){r(OfflineMessageView,e);function OfflineMessageView(e){if(e==null){e={}}OfflineMessageView.__super__.constructor.call(this,e)}OfflineMessageView.prototype.height=568;OfflineMessageView.prototype.el=function(){return a("#userlike-offline-message")};OfflineMessageView.prototype.showOfflineMessageSent=function(e){var t;c("popup").reset();t=this.replaceLinks(l(this.config.offline_message_response));return c("message_view").show(t,e,true)};OfflineMessageView.prototype.setupEventHandlers=function(){return a("#userlike-offline-message-submit").on("click",function(e){c("fsm").event("submitButton");a.event(e).preventDefault();return a.event(e).stopPropagation()})};OfflineMessageView.prototype.showOfflineMessageForm=function(e){var t,i,r,o;o=c("session");i=c("popup");i.reset();this.highlightText("#userlike-screenshot-label",this.config.offline_message_send_screenshot);a("#userlike-screenshot-label").text(this.config.offline_message_send_screenshot);i.clearInput("#userlike-offline-email",this.config.offline_message_enter_email,o.get("client_email"));i.clearInput("#userlike-offline-name",this.config.offline_message_enter_name,o.get("client_name"));i.clearInput("#userlike-offline-textarea",this.config.offline_message_default_textarea,this.config.offline_message_default_textarea);this.setupEventHandlers();this.highlightText("#userlike-offline-message-headline",this.config.offline_message_header);t=this.replaceLinks(l(this.config.offline_message_body));this.highlightText("#userlike-offline-message-text",t);a("#userlike-offline-message-headline").text(this.config.offline_message_header);a("#userlike-offline-message-text").html(t);r=new n;if(this.config.screenshot_enabled&&!r.unsupported()){a("#userlike-screenshot-wrapper").show()}else{a("#userlike-screenshot-wrapper").hide()}i.transition(this,e);if(h){d(this.onKeyboardShow,this.onKeyboardHide);return a(document).on("focusout",this.onKeyboardHide)}};OfflineMessageView.prototype.onKeyboardShow=function(){if(f()==="landscape"){return a("#userlike").addClass("userlike-chat-textarea-fullscreen")}else{return a("#userlike").removeClass("userlike-chat-textarea-fullscreen")}};OfflineMessageView.prototype.onKeyboardHide=function(){return a("#userlike").removeClass("userlike-chat-textarea-fullscreen")};OfflineMessageView.prototype.setTextareaVal=function(e){var t,i;t=a("#userlike-offline-textarea");i=t.val().replace(this.config.offline_message_default_textarea,"");return t.val(i+e+"\n")};OfflineMessageView.prototype.appendTextareaVal=function(e){var t;t=a("#userlike-offline-textarea");return t.val(t.val()+e+"\n")};OfflineMessageView.prototype.validateOfflineMessage=function(){var e,t,i,r;e=p("#userlike-offline-email");i=p("#userlike-offline-name");t=p("#userlike-offline-textarea");if(!o.validateName(i)){a("#userlike-offline-name").focus();return false}if(!o.validateEmail(e)){a("#userlike-offline-email").focus();return false}if(!t){a("#userlike-offline-textarea").focus();return false}if(t.length>1e4){a("#userlike-offline-textarea").focus();return false}r=c("session");r.set("client_email",e);r.set("client_name",i);return true};OfflineMessageView.prototype.requestedScreenshot=function(){return a("#userlike-screenshot-checkbox").get().checked};OfflineMessageView.prototype.sendOfflineMessage=function(e){var t,i,r,n,o,s;n=e;if(n==null){n=p("#userlike-offline-textarea")}a("#userlike-offline-textarea").val("");r=c("session").packet();try{t=JSON.stringify(r.custom)}catch(l){i=l;t=void 0}s=c("session");o={chat_widget_id:this.config.chat_widget_id,customer_id:this.config.customer_id,client_name:r.client_name,client_email:r.client_email,client_uuid:s.get("uuid"),visits:r.visits,page_impressions:r.page_impressions,url:r.url,message:n,custom:t,latitude:s.get("latitude"),longitude:s.get("longitude")};u("OfflineMessage::send");return a.ajaxJsonp({url:"https://api.userlike.com/api/client/message/offline_message/",data:o,error:function(e){u("OfflineMessage::sendError "+e);return c("fsm").event("error",e)},success:function(e){u("OfflineMessage::sendSuccess "+e);return c("fsm").event("success",e)}})};OfflineMessageView.prototype.destroy=function(){return a("#userlike-offline-message-submit").off("click")};return OfflineMessageView}(s);return t.exports.OfflineMessageView=i})()},{"../global.coffee":13,"../screenshot.coffee":23,"../utils/jq.coffee":31,"../utils/utils.coffee":36,"../utils/validator.coffee":37,"./view.coffee":55}],48:[function(e,t,i){var r=function(e,t){for(var i in t){if(n.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e},n={}.hasOwnProperty;(function(){var i,n,o,s,a;n=e("./view.coffee").View;a=e("../utils/utils.coffee").has_css_animation_support;s=e("../global.coffee").get;o=e("../utils/jq.coffee")._jq;i=function(e){r(ProgressView,e);function ProgressView(){return ProgressView.__super__.constructor.apply(this,arguments)}ProgressView.prototype.height=216;ProgressView.prototype.el=function(){return o("#userlike-progress")};ProgressView.prototype.show=function(e){if(!a){o("#userlike-spinner-gif").show()}o("#userlike-close").on("click",this.onCloseClick);return s("popup").transition(this,e)};ProgressView.prototype.updateSpinnerColor=function(){return o("#userlike-spinner div").css("background-color",this.config.theme_lead_color)};ProgressView.prototype.onCloseClick=function(){return s("popup").hide()};ProgressView.prototype.destroy=function(){o("#userlike-close").off("click",this.onCloseClick);return ProgressView.__super__.destroy.call(this)};return ProgressView}(n);return t.exports.ProgressView=i})()},{"../global.coffee":13,"../utils/jq.coffee":31,"../utils/utils.coffee":36,"./view.coffee":55}],49:[function(e,t,i){var r=function(e,t){for(var i in t){if(n.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e},n={}.hasOwnProperty;(function(){var i,n,o;n=e("./view.coffee").View;o=e("../utils/jq.coffee")._jq;i=function(e){r(RatingView,e);function RatingView(){return RatingView.__super__.constructor.apply(this,arguments)}RatingView.prototype.el=function(){return o("#userlike-rating")};RatingView.prototype.show=function(e){this.highlightText("#userlike-rating-headline",this.config.feedback_header);o("#userlike-rating-headline").text(this.config.feedback_header);this.resetStar();this.setupStarHover();this.setupStarClick();return this.el().show()};RatingView.prototype.selectedRating=null;RatingView.prototype.isValid=function(){return this.selectedRating!==null};RatingView.prototype.setupStarClick=function(){return o("#userlike-star-rating .userlike-symbol").on("click",function(e){return function(t){var i,r;i=o(o.event(t).target);r=i.data("rating");e.selectedRating=r;e.setStarsHighlight(e.selectedRating);return e.enableSubmit()}}(this))};RatingView.prototype.setupStarHover=function(){var e;e=o("#userlike-star-rating .userlike-rating");e.on("mouseenter",function(e){return function(t){var i,r;i=o(o.event(t).target);r=i.data("rating");r=parseInt(r,10);return e.setStarsHighlight(r)}}(this));return o("#userlike-star-rating").on("mouseleave",function(e){return function(){if(e.selectedRating){
return e.setStarsHighlight(e.selectedRating)}else{return e.setStarsHighlight(0)}}}(this))};RatingView.prototype.resetStar=function(){var e;e=o("#userlike-star-rating .userlike-rating");return e.each(function(e){return function(t,i){return i.addClass("userlike-symbol-rating-inactive").css({color:e.config.theme.symbol_default_color})}}(this))};RatingView.prototype.setStarsHighlight=function(e){var t;t=o("#userlike-star-rating .userlike-rating");return t.each(function(t){return function(i,r){if(i+1<=e){return r.removeClass("userlike-symbol-rating-inactive").addClass("userlike-symbol-rating").css({color:t.config.theme.symbol_active_color})}else{return r.removeClass("userlike-symbol-rating").addClass("userlike-symbol-rating-inactive").css({color:t.config.theme.symbol_default_color})}}}(this))};RatingView.prototype.getRating=function(){return this.selectedRating};RatingView.prototype.enableSubmit=function(){return o("#userlike-feedback-submit").removeClass("userlike-disabled")};RatingView.prototype.destroy=function(){o("#userlike-star-rating .userlike-symbol").off("mouseenter");return o("#userlike-star-rating .userlike-symbol").off("click")};return RatingView}(n);return t.exports.RatingView=i})()},{"../utils/jq.coffee":31,"./view.coffee":55}],50:[function(e,t,i){var r=function(e,t){for(var i in t){if(n.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e},n={}.hasOwnProperty;(function(){var i,n,o,s,a,u;o=e("./view.coffee").View;n=e("../utils/validator.coffee").Validator;u=e("../utils/utils.coffee").getInput;a=e("../global.coffee").get;s=e("../utils/jq.coffee")._jq;i=function(e){r(RegisterView,e);function RegisterView(){return RegisterView.__super__.constructor.apply(this,arguments)}RegisterView.prototype.height=568;RegisterView.prototype.el=function(){return s("#userlike-register")};RegisterView.prototype.setupEventHandlers=function(){s("#userlike-register-submit").on("click",function(e){a("fsm").event("submitButton");s.event(e).preventDefault();return s.event(e).stopPropagation()});return s("#userlike-facebook-connect-submit").on("click",function(e){FB.login(function(e){return a("fsm").event("facebookLoginResponse",e)},{scope:"email"});s.event(e).preventDefault();return s.event(e).stopPropagation()})};RegisterView.prototype.showRegisterFormFacebook=function(e){s("#userlike-facebook-connect-submit").show();return this.show(e)};RegisterView.prototype.showRegisterForm=function(e){s("#userlike-facebook-connect-submit").hide();return this.show(e)};RegisterView.prototype.show=function(e){var t,i,r,n,o,u;n=a("popup");u=a("session");this.setupEventHandlers();n.clearInput("#userlike-register-email",this.config.register_enter_email,u.get("client_email"));n.clearInput("#userlike-register-name",this.config.register_enter_name,u.get("client_name"));this.highlightText("#userlike-register-headline",this.config.register_header);this.highlightText("#userlike-register-text",this.config.register_body);s("#userlike-register-headline").text(this.config.register_header);s("#userlike-register-text").text(this.config.register_body);o=[1,2,3];for(i=0,r=o.length;i<r;i++){t=o[i];if(this.config["register_additional0"+t+"_enabled"]){s("#userlike-register-additional0"+t).show();n.clearInput("#userlike-register-additional0"+t,this.config["register_additional0"+t+"_default"],u.get("client_additional0"+t+"_value"))}else{s("#userlike-register-additional0"+t).hide()}}return n.transition(this,e)};RegisterView.prototype.validateRegisterForm=function(){var e,t,i,r;i=a("session");r=function(e){return function(){var t,i,r,n,o;n=[1,2,3];for(i=0,r=n.length;i<r;i++){t=n[i];if(e.config["register_additional0"+t+"_enabled"]){o=u("#userlike-register-additional0"+t);if(!e.config["register_additional0"+t+"_optional"]){if(!o||o.length>100){s("#userlike-register-additional0"+t).focus();return false}}if(e.config["register_additional0"+t+"_optional"]){if(o&&o.length>100){s("#userlike-register-additional0"+t).focus();return false}}if(o){a("session").set("client_additional0"+t+"_value",o)}}}return true}}(this);t=u("#userlike-register-name");e=u("#userlike-register-email");if(this.config.optional_registration){if(!t&&!e){i["delete"]("client_name");i["delete"]("client_email")}else if(!e){i.set("client_name",t);i["delete"]("client_email")}else if(!n.validateEmail(e)){s("#userlike-register-email").focus();return false}else if(!n.validateName(t)){i["delete"]("client_name");i.set("client_email",e)}else{i.set("client_name",t);i.set("client_email",e)}}else{if(!n.validateName(t)){s("#userlike-register-name").focus();return false}if(!n.validateEmail(e)){s("#userlike-register-email").focus();return false}i.set("client_email",e);i.set("client_name",t)}return r()};return RegisterView}(o);return t.exports.RegisterView=i})()},{"../global.coffee":13,"../utils/jq.coffee":31,"../utils/utils.coffee":36,"../utils/validator.coffee":37,"./view.coffee":55}],51:[function(e,t,i){var r=function(e,t){for(var i in t){if(n.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e},n={}.hasOwnProperty;(function(){var i,n,o,s,a;a=e("../utils/utils.coffee").isIE8;n=e("./view.coffee").View;s=e("../global.coffee").get;o=e("../utils/jq.coffee")._jq;i=function(e){r(SocialCompositeView,e);function SocialCompositeView(){return SocialCompositeView.__super__.constructor.apply(this,arguments)}SocialCompositeView.prototype.el=function(){return o("#userlike-social-composite")};SocialCompositeView.prototype.show=function(e){if(e==null){e=function(){}}return s("popup").transition(this,function(t){return function(){if(s("facebook")&&t.config.facebook_like_enabled){s("facebook_view").show()}if(!a()&&s("twitter")&&t.config.twitter_integration){s("twitter_view").show()}return e()}}(this))};return SocialCompositeView}(n);return t.exports.SocialCompositeView=i})()},{"../global.coffee":13,"../utils/jq.coffee":31,"../utils/utils.coffee":36,"./view.coffee":55}],52:[function(e,t,i){var r=function(e,t){for(var i in t){if(n.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e},n={}.hasOwnProperty;(function(){var i,n,o,s;n=e("./view.coffee").View;s=e("../global.coffee").get;o=e("../utils/jq.coffee")._jq;i=function(e){r(SurveyView,e);function SurveyView(){return SurveyView.__super__.constructor.apply(this,arguments)}SurveyView.prototype.el=function(){return o("#userlike-survey")};SurveyView.prototype.show=function(e,t){var i;i=this.el();this.highlightText("#userlike-survey-headline",this.config[e+"_survey_question"]);o("#userlike-survey-headline").text(this.config[e+"_survey_question"]);i.find(".userlike-fieldset-wrapper>div").each(function(t){return function(i,r){var n,s;n=o(r);if((s=t.config[e+"_survey_option0"+(i+1)])!=null?s.length:void 0){t.highlightText(n.find(".userlike-label"),t.config[e+"_survey_option0"+(i+1)]);n.find(".userlike-label").text(t.config[e+"_survey_option0"+(i+1)]);n.find("input").removeAttr("checked");return n.show()}else{return n.hide()}}}(this));return s("popup").transition(this,t)};SurveyView.prototype.showPreSurvey=function(e){return this.show("pre",e)};SurveyView.prototype.showPostSurvey=function(e){return this.show("post",e)};SurveyView.prototype.destroy=function(){this.el().find(".userlike-label").text("");return this.el().find("#userlike-survey-headline").text("")};return SurveyView}(n);return t.exports.SurveyView=i})()},{"../global.coffee":13,"../utils/jq.coffee":31,"./view.coffee":55}],53:[function(e,t,i){var r=function(e,t){for(var i in t){if(n.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e},n={}.hasOwnProperty;(function(){var i,n,o,s,a,u;o=e("./view.coffee").View;a=e("../global.coffee").get;s=e("../utils/jq.coffee")._jq;u=e("../utils/utils.coffee").getInput;n=e("../utils/validator.coffee").Validator;i=function(e){r(TranscriptView,e);function TranscriptView(){return TranscriptView.__super__.constructor.apply(this,arguments)}TranscriptView.prototype.el=function(){return s("#userlike-transcript")};TranscriptView.prototype.setupEventHandlers=function(){return s("#userlike-transcript-submit").on("click",function(e){a("fsm").event("submitButton");s.event(e).preventDefault();return s.event(e).stopPropagation()})};TranscriptView.prototype.show=function(e){this.setupEventHandlers();a("popup").clearInput("#userlike-transcript-email",this.config.register_enter_email,a("session").get("client_email"));s("#userlike-transcript-headline").text(this.config.transcript_header);s("#userlike-transcript-text").text(this.config.transcript_body);return a("popup").transition(this,e)};TranscriptView.prototype.validateTranscriptForm=function(){var e;e=u("#userlike-transcript-email");if(!n.validateEmail(e)){s("#userlike-transcript-email").focus();return false}a("session").set("client_email",e);return true};TranscriptView.prototype.destroy=function(){return s("#userlike-transcript-submit").off("click")};return TranscriptView}(o);return t.exports.TranscriptView=i})()},{"../global.coffee":13,"../utils/jq.coffee":31,"../utils/utils.coffee":36,"../utils/validator.coffee":37,"./view.coffee":55}],54:[function(e,t,i){var r=function(e,t){for(var i in t){if(n.call(t,i))e[i]=t[i]}function ctor(){this.constructor=e}ctor.prototype=t.prototype;e.prototype=new ctor;e.__super__=t.prototype;return e},n={}.hasOwnProperty;(function(){var i,n,o,s,a;n=e("./view.coffee").View;a=e("../global.coffee").get;s=e("../global.coffee")._ullog;o=e("../utils/jq.coffee")._jq;i=function(e){r(TwitterView,e);function TwitterView(){return TwitterView.__super__.constructor.apply(this,arguments)}TwitterView.prototype.el=function(){return o("#userlike-twitter-tweet")};TwitterView.prototype.show=function(e){var t,i,r;o("#userlike-twitter-tweet-headline").text(this.config.twitter_headline);o("#userlike-twitter-tweetButton").remove();t="";if(this.config.twitter_type==="share"){t+='<a href="https://twitter.com/share" ';t+='data-size="large" ';t+='data-lang="'+this.config.lang+'" ';t+='class="twitter-share-button" ';t+='data-text="'+this.config.twitter_share_text+'" ';t+='data-via="'+this.config.twitter_share_via+'" ';t+='data-hashtags="'+this.config.twitter_share_hashtag+'" ';if(!this.config.twitter_share_show_count){t+='data-count="none" '}t+="></a>"}else if(this.config.twitter_type==="follow"){t+='<a href="https://twitter.com/'+this.config.twitter_follow_user+'" ';t+='data-size="large" ';t+='data-show-count="false" ';t+='data-lang="'+this.config.lang+'" ';t+='class="twitter-follow-button" ';if(!this.config.twitter_follow_show_username){t+='data-show-screen-name="false" '}t+="></a>"}else if(this.config.twitter_type==="mention"){t+='<a href="https://twitter.com/intent/tweet?screen_name='+this.config.twitter_mention_user+"&text="+this.config.twitter_mention_text+'" ';t+='data-size="large" ';t+='data-lang="'+this.config.lang+'" ';t+='class="twitter-mention-button" ';t+="></a>"}s("Popup::showTwitterTweetView: b="+t);r=document.createElement("div");r.id="userlike-twitter-tweetButton";r=o(r);o("#userlike-twitter-tweet-wrapper").append(r);r.html(t);try{twttr.widgets.load();twttr.events.bind("tweet",function(){return a("tracking_event").trigger("twitter_tweet_tweeted")})}catch(n){i=n;s("showTwitterTweetView: err=",i)}return this.el().show()};return TwitterView}(n);return t.exports.TwitterView=i})()},{"../global.coffee":13,"../utils/jq.coffee":31,"./view.coffee":55}],55:[function(e,t,i){(function(){var i,r,n,o,s,a,u,l,c;n=e("../utils/jq.coffee")._jq;o=e("../global.coffee").get;s=function(){return o("preview")};a=e("../utils/utils.coffee").regex_email;u=e("../utils/utils.coffee").regex_url_full;c=e("../utils/utils.coffee").trim;l=e("../utils/utils.coffee").rgb;i=e("../utils/urlparser.coffee").UrlParser;r=function(){function View(e){if(e==null){e={}}this.config=n.extend({},o("config"),e.config)}View.prototype.height=352;View.prototype.is_minimizable=false;View.prototype.height_mobile="100%";View.current_hightlight_timeout=null;View.prototype.getHeaderbarText=function(){return this.config.custom_header||""};View.prototype.el=function(){return _ullog("View::el must be implemented by child class")};View.prototype.destroy=function(){};View.prototype.highlightText=function(e,t){var i,r,o,a,u;i=n(e);o=i.nodeName();r=o==="input"||o==="textarea";a=r?i.val():i.text();if(!((u=s())!=null?u.isActive():void 0)||!a||!t||a===t){return}if(r&&i.data("default")===t){return}if(View.current_hightlight_timeout){return}this._removeAllHighlights(e);i.addClass("bounceIn");i.addClass("animated");return View.current_hightlight_timeout=window.setTimeout(function(t){return function(){t._removeAllHighlights(e);return View.current_hightlight_timeout=null}}(this),2e3)};View.prototype._removeAllHighlights=function(e){n(".animate").removeClass("animated");return n(".bounceIn").removeClass("bounceIn")};View.prototype.replaceLinkOffsite=function(e,t){return'<a style="color: '+l(this.config.theme.link_text_color)+'" href="'+e+'" target="_blank">'+(t||e)+"</a>"};View.prototype.replaceLinkOnsite=function(e){return'<a style="color: '+l(this.config.theme.link_text_color)+'" href="'+e+'">'+e+"</a>"};View.prototype.replaceEmails=function(e){return'<a style="color: '+l(this.config.theme.link_text_color)+'" href="mailto:'+e+'">'+e+"</a>"};View.prototype.replaceUrls=function(e){var t,r;r=new i(e,true);if(r.isOffsite()){if(this.config.links_offsite==="new"){t=this.replaceLinkOffsite(r.original())}else{t=this.replaceLinkOnsite(r.original())}}else{if(this.config.links_onsite==="new"){t=this.replaceLinkOffsite(r.original())}else{t=this.replaceLinkOnsite(r.original())}}return t};View.prototype.replaceLinks=function(e){e=this.regex_replace(e,a,this.replaceEmails);return e=this.regex_replace(e,u,this.replaceUrls)};View.prototype.regex_replace=function(e,t,i){var r,n,o,s,a,u,l;t=new RegExp(t.source,"i");while(true){o=t.exec(e);if(o){a=o.index;r=a+o[0].length;n=o[0];if(/^\s/.test(n)){a+=1;n=c(n)}s=i.apply(this,[n]);if(s){l=e.substr(0,a);u=e.substr(r);e=l+s+u;continue}}break}return e};return View}();return t.exports.View=r})()},{"../global.coffee":13,"../utils/jq.coffee":31,"../utils/urlparser.coffee":35,"../utils/utils.coffee":36}]},{},[1]);